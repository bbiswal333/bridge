<html>
	<head>
		<script>
    		//launch localhost in browser when started via nw
      var gui = require('nw.gui');
			//gui.Shell.openExternal('http://localhost:8000');

    		// Reference to window and tray
    		var win = gui.Window.get();
    		var tray;

    		tray = new gui.Tray({ icon: 'icon.png' });
    		tray.on('click', function() {
      			win.show();
        		this.remove();
        		tray = null;
      		});

    		// Get the minimize event
    		win.on('minimize', function() {
      			this.hide();

				tray = new gui.Tray({ icon: 'icon.png' });
    			tray.on('click', function() {
      				win.show();
        			this.remove();
        			tray = null;
      			});     			       	
    		});

        //system api
        var express = require('express');
        var app     = express();
        var fs      = require('fs');
        var exec    = require('child_process').exec;
        var path    = require("path");
        var http    = require("http");

        app.get('/api/system', function(request, response){
          var gui = require('nw.gui');
          var file = path.join(path.dirname(process.mainModule.filename), '../', 'nw-startup.html');

          gui.Shell.showItemInFolder(file);
          var data = [];
          response.setHeader('Content-Type', 'text/plain'); 
          response.send(data);
        });

        //create local server
        http.createServer(app).listen(9000);
		</script>
	</head>
	<body>
		..bridge server started

	</body>
</html>