(function(){(function(){if(!this.ovi||!this.ovi.win){var e={},l=l||this.oviConfig||{},l={win:l.win||this,doc:l.doc||this.document,modulePaths:l.modulePaths||{},version:"1.0.0.$REPOSITORY_REVISION$",buildNS:function(d){var a;for(var d=d.split("."),c=0,g=ovi.win,b;b=d[c++];)a=g[b]=g[b]||{isNs:!0},g=a;return g},provide:function(d){e[d]=1;return ovi.buildNS(d)},isLoaded:function(d){return e[d]},require:function(d,c){if(e[d])return this;var g=ovi.getLoadPath(d);try{ovi.hu(g)}catch(b){throw Error("Could not load "+
d+", reason: "+b.message);}if(!e[d]){if(c!==!1)throw Error("Namespace "+d+" was not provided by "+g);e[d]=1}return this},il:function(){return ovi.win.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},$xhr:function(){return this.il()},Tj:function(d){d=d.status;try{return!d&&location.protocol==="file:"||d>=200&&d<300||d===304||d===1223||d===0}catch(c){}return!1},$isXHRSuccess:function(d){return this.Tj(d)},hu:function(d){var c=ovi.il();c.open("GET",d,!1);c.send(null);if(!ovi.Tj(c))throw Error("Unable to load "+
d+" status: "+c.status);return ovi.win.eval(c.responseText+"\n//@ sourceURL="+d+"\n")},getLoadPath:function(d,c){var g=ovi.modulePaths[d];if(!g)for(var b=d.split("."),f=b.pop(),r=[];b.length;){g=b.join(".");if(g=ovi.modulePaths[g]){g+=r.join("/");g+=g.charAt(g.length-1)!=="/"?"/"+f:f;break}r.splice(0,0,b.pop())}g+="."+(c||"js");return g}};if(this.ovi)for(var h in l)l.hasOwnProperty(h)&&(this.ovi[h]=l[h]);else this.ovi=ovi=l;ovi.modulePaths.ovi=ovi.modulePaths.ovi||function(){for(var d=document.getElementsByTagName("script"),
c=0,g=/(^|\/|\\)ovi[\.\w]*?\.js$/i,b="",f,r,a;f=d[c++];)if(f=f.ie8_src||f.src||"",r=f.match(g)){if(f.indexOf("://")===-1){b=ovi.win.location.href;a=b.indexOf("#");var q=b.indexOf("?");a=a>q&&q>-1?q:a;b=a>-1?b.substring(0,a):b;b=b.substring(0,b.lastIndexOf("/")+1)}a=b+f.substring(0,r.index);a=a.charAt(a.length-1)==="/"?a:a+"/"}return a}();ovi.basePath=""}}).call(this);ovi.provide("ovi.browser");var Aa=ovi,Ra=navigator,$a=Ra.userAgent.toLowerCase(),Eb=Ra.appVersion;
Aa.platform={windows:/Windows/.test(Eb),mac:/MacIntel/.test(Ra.platform),linux:/X11/.test(Eb)&&!/tablet/.test($a)&&!/armv7/.test($a),maemo:/apple/.test($a)&&/linux/.test($a)&&/armv7/.test(Ra.platform),s60_v3:/Series60\/3/.test(Eb),s60_v5_touch:/Nokia5800|NokiaN97/.test(Eb)||/browserng/.test($a)};var Tb=Aa.platform;
Aa.browser={version:($a.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],chrome:/chrome/.test($a),safari:/Apple/.test(navigator.vendor)&&!/browserng/.test($a),opera:/opera/.test($a),mozilla:/firefox/.test($a)&&!/Apple/.test(navigator.vendor),s60:/series60/.test($a),cp:/browserng/.test($a),s60_v3:Tb.s60_v3,snc:Tb.s60_v3||Tb.s60_v5_snc,touch:Tb.maemo||Tb.s60_v5_touch,web:!(Tb.s60_v3||Tb.s60_v5_snc||Tb.maemo||Tb.s60_v5_touch),language:Ra.language||Ra.userLanguage};ovi.browser.msie=eval("/*@cc_on!@*/!1");
ovi.provide("ovi.lang");
(function(e){e.bind=function(a,f){if(arguments.length>2){var b=[].slice.call(arguments,2);return function(){return f.apply(a,b.concat(e.splat(arguments)))}}else return function(){return f.apply(a,arguments)}};e.each=function(a,f){if(a){var b=0,c=a.length,p;if(typeof c!=="number"||Object.prototype.toString.call(a)==="[object Object]"&&!(c-1 in a))for(p in a){if(a.hasOwnProperty(p)&&f.call(a,a[p],p,a)===!1)break}else for(p=a[0];b<c&&f.call(a,p,b,a)!==!1;p=a[++b]);}};e.extend=function(){var a="constructor toString valueOf toLocaleString isPrototypeOf propertyIsEnumerable hasOwnProperty unique".split(" "),
f,b={constructor:function(){}},c;for(f in b)c=null;c===void 0&&(c=function(f,b){for(var c=a.length,k;c--;)if(b.hasOwnProperty(k=a[c]))f[k]=b[k]});e.extend=function(a,f){for(var b=Array.prototype.slice.call(arguments,1),k=0,r=b.length;k<r;k++){var f=b[k],q;for(q in f)f.hasOwnProperty(q)&&(a[q]=f[q]);c&&f&&c(a,f,1)}return a};return e.extend.apply(null,arguments)};e.splat=function(a){var f=e.type(a);return f==="undefined"?[]:f==="arguments"?Array.prototype.slice.call(a):f==="array"?a:[a]};for(var l=
Object.prototype.toString,h={},d={1:"element",3:"textnode",9:"document",11:"fragment"},c="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),g=0,b,f;b=c[g++];)if(f=e.win[b])try{h[l.call(new f)]=b.toLowerCase()}catch(r){}e.type=function(a){return a===null&&"null"||a===void 0&&"undefined"||a.nodeType&&d[a.nodeType]||a.length!==void 0&&(typeof a.length=="number"||a.length.tagName)&&(a.callee&&"arguments"||
a.alert&&"window"||a.item&&"nodelist")||h[l.call(a)]}})(ovi);ovi.provide("ovi.Class");
(function(e){function l(c){function d(){var b=this.Xk;this.Xk=d;var f;try{f=this instanceof d?new c(arguments):c.apply(this,arguments)}finally{this.Xk=b}return f}return d}function h(){var c=this.Xk;delete this.Xk;return c.Fo.apply(this,arguments)}function d(){}e.Class=function(c){function g(){this.Ij&&this.Ij();return this.initialize?this.initialize.apply(this,arguments):this}c=c||{};if(!(this instanceof e.Class))return new e.Class(c);var b;if(c.Mixins){var f=[].concat(c.Mixins),r=[],a=0,q;for(delete c.Mixins;q=
f[a++];)for(b in q=q.prototype||q)typeof q[b]==="function"&&(b!=="initialize"?c[b]||(c[b]=q[b]):r.push(q.initialize));if(r.length>0)c.Ij=function(){k.Ij.Fo&&k.Ij.Fo.call(this);for(var a=0,f;f=r[a++];)f.call(this)}}f=c.Extends;delete c.Extends;a=c.Statics;delete c.Statics;var k;if(typeof f==="function"){d.prototype=f.prototype;k=new d;for(b in c)if(c.hasOwnProperty(b)){if(typeof k[b]==="function"&&typeof c[b]==="function")c[b]=l(c[b]),c[b].Fo=k[b];k[b]=c[b]}k._super=h;k.yx=f}else k=c;if(c.Name)k.className=
c.Name,g.Name=k.className;delete k.Name;g.constructor=e.Class;g.prototype=k;g.prototype.constructor=g;a&&e.extend(g,a);return g}})(ovi);ovi.provide("ovi.Array");
(function(e){var l="forEach indexOf lastIndexOf map filter every some reduce reduceRight".split(" "),h=/^\s*function\s+\w+\s*\(\s*\)\s*\{\s*\[\s*native\s+code\s*\]\s*\}\s*$/,d={forEach:function(f,b,a){for(var c=f.length>>>0,k=0;k<c;k++)k in f&&b.call(a,f[k],k,f)},map:function(f,b,a){var c,k,m,p;if(f==null)throw new TypeError(" array is null or not defined");k=Object(f);m=k.length>>>0;if({}.toString.call(b)!="[object Function]")throw new TypeError(b+" is not a function");f=Array(m);for(c=0;c<m;)c in
k&&(p=k[c],p=b.call(a,p,c,k),f[c]=p),c++;return f},lastIndexOf:function(f,b,a){return this.sq(f,b,a,-1)},sq:function(f,b,a,c){var c=c||1,k=f.length>>>0;isNaN(a)?a=c>0?0:k-1:(a=Math[a<0?"ceil":"floor"](a),a<0?a+=k:c<0&&a>=k&&(a=k-1));for(;a>-1&&a<k;a+=c)if(a in f&&f[a]===b)return a;return-1}},c={isOviArray:1},g=l.length;for(d.indexOf=d.sq;g--;){var b=l[g];typeof l[b]==="function"&&h.test(l[b])&&(!l[b].toString||h.test(l[b].toString))?(l.splice(g,1),d[b]=Array[b]||new Function("var ap = Array.prototype; return ap."+
b+".apply(arguments[0], ap.slice.call(arguments, 1));")):c[b]=new Function("return ovi.Array."+b+".apply(ovi.Array, [this].concat(ovi.splat(arguments)));")}e.Array=l.length?function(f){return(f=arguments.length?f:[]).isOviArray?f:e.extend(f,c)}:function(f){return arguments.length?f:[]};e.extend(e.Array,d)})(ovi);ovi.provide("nokia.maps.capturing._packaging.base");ovi.provide("nokia.maps.advertising._packaging.base");ovi.provide("nokia.maps.clustering._packaging.base");ovi.provide("nokia.maps.heatmap._packaging.base");
ovi.provide("nokia.maps.util.ResourceLoader");
(function(e){var l=nokia.maps.util.d,h={css:function(d){/###RESOURCE_START###/im.test(d)&&(d=d.replace(/[\s\S]*###RESOURCE_START###\*\//im,""),d=d.replace(/\/\*###RESOURCE_END###[\s\S]*/im,""));return d},html:function(d){/###RESOURCE_START###/im.test(d)&&(d=d.replace(/[\s\S]*###RESOURCE_START###--\>/im,""),d=d.replace(/<\!--###RESOURCE_END###[\s\S]*/im,""));return d}};e.requireString=function(d){var c=d.split("."),d=c.pop(),g=c.join("."),b=ovi.getLoadPath(g,d),c=ovi.il();c.open("GET",b,!1);c.send(null);
ovi.Tj(c)?(g=ovi.provide(""+g),c=c.responseText,c.replace(/\n/g,""),h[d]&&(c=h[d](c)),g[d]=c):l("Unable to load "+this.vu+" status: "+c.status)};e.requireI18n=function(d){for(var c=e.config.packages.language,g=c.length,b=d||"nokia.maps";g--;)d=c[g].split("-"),e.requireString(b+".resources.ui.i18n."+(d.length===2?d[0]+"."+d[1]:d[0])+".translation.json")}})(nokia.maps);ovi.provide("nokia.maps.util");
(function(e){function l(a){return function(f){return m.call(f)===a}}function h(a){return this[a]}function d(a){this.message=a;this.name="ParserError"}var c={},g=Math,b=g.min,f=g.max,r=Function(),g=document,a=g.createElement("p"),q=a.appendChild(g.createTextNode("")),k,g=function(){for(var a=window,f,b,c,p="moz webkit ms o ".split(" "),m=5;m--&&!f;)f=p[m],f=(b=a[f+(f?"R":"r")+"equestAnimationFrame"])&&!isNaN(b.call(window,r))&&(c=a[f+(f?"C":"c")+"ancelAnimationFrame"]);k=f?function(f){return b.call(a,
f)}:function(f){return a.setTimeout(f,25)};return f?function(f){return c.call(a,f)}:function(f){return a.clearTimeout(f)}}(),m={}.toString,p="Array Boolean Date Error Function Number Object RegExp String".split(" "),z=p.length;for(e.isArguments=l(m.call(arguments));z--;)e["is"+p[z]]=l(m.call(new this[p[z]]));ovi.extend(e,{db:function(a,f){var b;arguments.length>1&&f!==c?(b=Error(a+": "+f),b.type=a):b=Error(a);throw b;},d:function(a){e.db("IllegalArgument",arguments.length?a:c)},jg:function(a){e.db("IllegalState",
arguments.length?a:c)},Lo:function(a){e.db("UnsupportedOperation",arguments.length?a:c)},zw:function(a){e.db("InternalError",arguments.length?a:c)},requestAnimationFrame:k,cancelAnimationFrame:g,bo:function(a,f){var a=(""+a).split("."),b=a.length,c=0;for(arguments.length<2&&(f=window);c<b&&f!==void 0&&f!==null;c++)f=f[a[c]];return f},now:Date.now||function(){return+new Date},flatMerge:function(a,f,b,c){var k,p;for(k in f)if(p=f[k],f.hasOwnProperty(k)&&(b||!a.hasOwnProperty(k))&&(!c||c(k,p)))a[k]=
p;return a},$g:function(a){return e.Um(a).map(h,a).join("")},Um:Object.keys||function(){var a=Object.prototype.hasOwnProperty,f=!{toString:0}.propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=b.length;return function(k){var p=typeof k,m;(p!=="object"&&p!=="function"||k===null)&&e.d();p=ovi.Array([]);for(m in k)a.call(k,m)&&p.push(m);if(f)for(m=0;m<c;m++)a.call(k,b[m])&&p.push(b[m]);return p}}(),getRootNameSpace:function(a){return ovi.win[a.split(".")[0]]},
u:r,Ts:function(){e.db("Unimplemented abstract method.",c)},Nf:function(a,f){return(a%f+f)%f},Pa:function(a,c,k){return b(f(+a,+c),+k)},ll:function(a){return function(f){return a&&a[f]||null}},Ut:self.XPathResult?function(a,f,b){a=(a.ownerDocument||a).evaluate(f,a,new nokia.maps.util.ll(b),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);for(f=[];b=a.iterateNext();)f.push(b);return f||[]}:function(a,f,b){var c=a.ownerDocument||a,k=c.getProperty("SelectionLanguage"),p=c.getProperty("SelectionNamespaces"),
m,r="";for(m in b)b.hasOwnProperty(m)&&(r+="xmlns:"+m+'="'+b[m]+'" ');c.setProperty("SelectionLanguage","XPath");c.setProperty("SelectionNamespaces",r);a=a.selectNodes(f);c.setProperty("SelectionLanguage",k);c.setProperty("SelectionNamespaces",p);return a},Uf:function(a){var f,b;if(window.ActiveXObject)f=new ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.resolveExternals=!1,f.validateOnParse=!1,f.loadXML(a),f.parseError.errorCode&&(b="error on line ".concat(f.parseError.line,": ",f.parseError.reason));
else if(self.DOMParser&&(f=new DOMParser,f=f.parseFromString(a,"text/xml"),ovi.Array.indexOf([f.documentElement.nodeName,(f.documentElement.firstChild||{}).nodeName],"parsererror")>=0))a=f.getElementsByTagName("parsererror")[0],b=(a.childNodes[0].nodeType===3?a.childNodes[0].nodeValue+"\n":"")+a.childNodes[1].firstChild.nodeValue;if(b)throw new d(b);return f||null},getConstructor:function(a){try{return!a.isNs?a:null}catch(f){return null}},sanitizeText:function(f){q.nodeValue=f;return a.innerHTML},
lt:function(){var a=document.createElement("div"),f="";a.innerHTML="<svg></svg>";if(!a.firstChild)return!0;f=a.firstChild.toString();return this.Pl||(this.Pl=!(!window.SVGSVGElement||!(f==="[object HTMLElement]"||f==="[object SVGSVGElement]")))},pd:function(a,f){for(var b=(a=a.split(" ")).length,c={};b--;)c[a[b]]=f;return c},isWebGl:function(){var a=null,f=["webgl","experimental-webgl","moz-webgl","webkit-3d"],b=document.createElement("canvas"),c=f.length,k;try{for(k=0;k<c&&window.WebGLRenderingContext&&
!(a=b.getContext(f[k]));k++);}catch(p){return!1}return a!==null}})})(nokia.maps.util);ovi.provide("nokia.maps.util.services");
(function(e){function l(a){this.Ro=a||1/0;for(var a=[],f=36,b;f--;)b=Math.floor(Math.random()*16),a[f]="0123456789ABCDEF"[f===14?4:f===19?b&3|8:b];a[8]=a[13]=a[18]=a[23]="-";this.id=a.join("");this.init()}var e=nokia.maps,h=e.config,d=e.util,e=d.services,c=d.now,g=encodeURIComponent,b,f=d.getRootNameSpace("nokia.maps").Settings,r;l.prototype={isAlive:function(){return c()<this.Lm+this.Ro},init:function(){this.Lm=c()}};l.getSessionId=function(){if(!b||!b.isAlive())b=new l(h.sessionTTL);b.init();return b.id};
r="&xnlp=CL_JSMv"+g("2.5.4");ovi.extend(e,{getBaseURL:function(a,f,b,c){var p=a.get("secureConnection"),r=h&&h.isChina,d=null,g=null,e=c&&r?".china":"",l=a.get(f+"."+b+e+".baseUrl")||a.get(f+e+".baseUrl"),e=a.get(f+"."+b+e+".secure.baseUrl")||a.get(f+e+".secure.baseUrl"),v=a.get(f+"."+b+".secure.interface")||y,y=a.get(f+"."+b+".interface")||a.get(f+".interface");if(p=="force")return e&&(d=e,g=v||y,d+=g?g+"?":""),d;p=="prefer"&&(d=e,g=v);d||(d=l);g||(g=y||"");g!=""&&(g+="?");d+=g;c&&!r&&(d+="int=true&");
return d},addNlpParams:function(a,b){return a.concat(/[\?&]$/.test(a)?"":/[\?&]/.test(a)?"&":"?","app_id=",g(f.app_id),b?"&token=":"&app_code=",g(f.app_code),r,f.noSID?"":",SID_"+g(l.getSessionId()))}});d.Session=l})();ovi.provide("nokia.maps.util.animation.easeFunctions");
(function(e){e.animation.easeFunctions={LINEAR:function(e){return e},EASE_IN_QUAD:function(e){return e*e},EASE_OUT_QUAD:function(e){return-e*(e-2)},EASE_IN_OUT_QUINT:function(e){e*=2;if(e<1)return e*e*e*e*e/2;e-=2;return e*e*e*e*e/2+1},EASE_OUT_CIRC:function(e){return Math.sqrt(2*e-e*e)}}})(nokia.maps.util);ovi&&ovi.provide("nokia.maps.Detector");nokia.maps=nokia.maps||{};
(function(e){function l(e,d){for(var c=d.length,g=null;c--;)if(d[c][0]===e){g=d[c];break}return g}e.Detector=function(e,d){this.definitions=e;this.omitted=d};e.Detector.prototype={detect:function(e){switch(e){case void 0:return this.detect(this.omitted);case "auto":return this.autoDetect();case "none":return null;default:return l(e,this.definitions)===null?null:e}},autoDetect:function(){for(var e=this.definitions,d=e.length,c=0;c<d;c++)if(this.isCapable(e[c][0]))return e[c][0]},isCapable:function(e){return(e=
l(e,this.definitions))&&e[1]()}}})(nokia.maps);ovi.provide("nokia.maps.util.LinkedList");
(function(e){var l=nokia.maps.util.d,h=!h,d=!h,l=nokia.maps.util.d,c=e.LinkedList=Function(),g=e.LinkedList.Element=function(b){this.data=b};ovi.extend(c.prototype,{k:null,l:null,length:0,first:function(){return this.k},last:function(){return this.l},elementOf:function(b,f){for(var c=f||this.k;c&&c.data!==b;)c=c.next;return c||null},lastElementOf:function(b,f){for(var c=f||this.l;c&&c.data!==b;)c=c.prev;return c||null},toArray:function(b){for(var f=this.k,c=[];f;)b?c.push(f):c.push(f.data),f=f.next;
return c},indexOf:function(b){var f=b instanceof g,c=0,a=this.k;if(this.length>0)for(;a;){if(f){if(a===b)return c}else if(a.data===b)return c;c++;a=a.next}return-1},lastIndexOf:function(b){var f=b instanceof g,c=this.length-1,a=this.l;if(this.length>0)for(;a;){if(f){if(a===b)return c}else if(a.data===b)return c;c--;a=a.prev}return-1},get:function(b){var f=this.k;if(b instanceof g)return b;if((b=+b)<0)for(f=this.l;f&&++b;)f=f.prev;else for(;f&&b--;)f=f.next;return f},set:function(b,f){var c=this.k;
if(b instanceof g)c=b,c.list!==this&&l("Invalid index!");else if((b=+b)<0){for(c=this.l;c&&++b;)c=c.prev;if(!c)return this.unshift(f)}else if(b!==b)l("Invalid index!");else{for(;c&&b--;)c=c.next;if(!c)return this.push(f)}if(f instanceof g)return this.splice(b,1,f)&&this;c.data=f;return this},remove:function(b){var f,c;b instanceof g||(b=this.elementOf(b));if(!b||b.list!==this)return d;if(--this.length===0)this.k=this.l=null;else if(this.k===b){if(this.k=b.next)this.k.prev=null}else if(this.l===b){if(this.l=
b.prev)this.l.next=null}else f=b.prev,c=b.next,f.next=c,c.prev=f;b.list=b.prev=b.next=null;return h},sort:function(b,f){var c=this.k,a;if(!c)return this;this.k=this.l=null;for(this.length=0;c;)a=c.next,c.list=c.prev=c.next=null,this.addSorted(b,f,c),c=a;return this},addSorted:function(b,f){for(var c=arguments,a=c.length,f=f||this,q=1,k,m,p;++q<a;)if(m=c[q],m instanceof g?m.list&&m.list.remove(m):m=new g(m),m.list=this,p=this.k,++this.length===1)this.k=this.l=m;else{for(;p;){k=b.call(f,m.data,p.data,
m,p);if(k<=0){m.next=p;p===this.k?this.k=p.prev=m:(m.prev=p.prev,m.prev.next=m,p.prev=m);break}p=p.next}if(k>0)m.prev=this.l,this.l=this.l.next=m}return this},shift:function(){var b;if(this.length<=0)return null;this.length--;b=this.k;if(this.k.next){if(this.k=this.k.next)this.k.prev=null}else this.k=this.l=null;b.list=b.prev=b.next=null;return b},unshift:function(){for(var b=arguments,f=b.length,c,a=-1;++a<f;)c=b[a],c instanceof g?c.list&&c.list.remove(c):c=new g(c),c.list=this,++this.length===1?
this.k=this.l=c:(this.k.prev=c,c.next=this.k,this.k=c);return this.length},next:function(b){b!==void 0&&b!==null&&!(b instanceof g)&&(b=this.elementOf(b));if(!b)return this.k;return b.next},prev:function(b){b!==void 0&&b!==null&&!(b instanceof g)&&(b=this.elementOf(b));if(!b)return this.l;return b.prev},push:function(){for(var b=arguments,f=b.length,c,a=-1;++a<f;)c=b[a],c instanceof g?c.list&&c.list.remove(c):c=new g(c),c.list=this,++this.length===1?this.k=this.l=c:(this.l.next=c,c.prev=this.l,this.l=
c);return this.length},pop:function(){var b=this.l;if(!b)return null;--this.length===0?this.k=this.l=null:(this.l=this.l.prev,this.l.next=null);b.list=b.prev=b.list=null;return b},splice:function(b,f){var c=arguments,a=c.length,q=1,k=this.k,m,p=[],d;if(ovi.type(b)!=="number")b instanceof g?(k=b,!k.list===this&&l("Invalid index given to LinkedList.splice!")):(k=this.elementOf(b))||l("Invalid index given to LinkedList.splice!");else if(b>=0)for(;--b>=0&&k;)k=k.next;else{for(k=this.l;++b<0&&k;)k=k.prev;
if(!k)k=this.k}if(k)for(;--f>=0&&k;){m=k.next;p[p.length]=k;if(--this.length===0)this.k=this.l=k.list=null;else if(k===this.k){if(this.k=k.next)this.k.prev=null;k.next=k.list=null}else k===this.l?(this.l=k.prev,this.l.next=k.prev=k.list=null):(d=k.prev,d.next=k.next,d.next.prev=d,k.prev=k.next=k.list=null);k=m}else k=this.l;if(!k)k=this.l;for(;++q<a;)(d=c[q])instanceof g?d.list&&d.list.remove(d):d=new g(d),++this.length===1?k=this.k=this.l=d:k===this.l?(k.next=d,d.prev=k,k=this.l=d):(d.next=k.next,
d.next.prev=d,d.prev=k,k=k.next=d);return p}});ovi.extend(g.prototype,{list:null,next:null,prev:null})})(nokia.maps.util);ovi.provide("nokia.maps.util.OList");
(function(e){var l=e.d;e.OList=new ovi.Class({initialize:function(e){this.ia=ovi.Array(e||[])},N:function(h,d,c){this.ia.splice(d,0,h);if(h=this.Ea("add",h,d,c))return c&&e.jg(),this.oc(d,h),h},add:function(e,d){if(arguments.length<2)d=this.ia.length;d!==+d&&l();this.N(e,d);return this},addAll:function(e,d){var c=e.length,g=this.ia.length,b=0,f=Math;arguments.length<2&&(d=g);d!==+d&&l();for(g=d<0?f.max(0,g+d):f.min(g,d);b<c;b++)this.N(e[b],g+b);return this},remove:function(e){e=this.indexOf(e);return e<
0?null:this.removeAt(e)},removeAll:function(e){for(var d=e.length,c=0;c<d;c++)this.remove(e[c]);return this},oc:function(h,d){var c=this.ia.splice(h,1)[0],g;if(g=this.Ea("remove",c,h,d))return d&&e.jg(),this.N(c,h,g),g},removeAt:function(e){var d=this.get(e);return this.oc(e)?null:d},clear:function(){for(var e=this.ia.length;e--;)this.oc(e)},set:function(e,d){var c;c=this.get(d);if(!this.oc(d))if(this.N(e,d))this.N(c,d);else return c},indexOf:function(e){return this.ia.indexOf(e)},get:function(e){var d=
this.ia;(e!==+e>>>0||e>=d.length)&&l();return d[e]},getLength:function(){return this.ia.length},asArray:function(){return[].concat(this.ia)},Ea:function(e,d,c,g){var b=this.ua,f,r;g||(g=1/0);if(b)for(r=0;r in b&&r<g;)if(b[r++].call(b[r++],this,e,d,c)){f=r;break}return f},addObserver:function(h,d){!e.isFunction(h)&&l("callback");var c=this.ua||(this.ua=[]),g=c.length;c[g++]=h;d&&(c[g]=d);c.length=++g},removeObserver:function(e,d){var c,g=0,b;if(c=this.ua)for(b=c.length;g<b;)c[g]===e&&c[g+1]===d&&(c.splice(g,
2),b===2&&delete this.ua),g+=2;return this}})})(nokia.maps.util);ovi.provide("nokia.maps.util.OObject");
(function(e){var l={},h=0;e.OObject=new ovi.Class({initialize:function(d){for(var c in d)this.set(c,d[c])},set:function(d,c,g){var b;if(c===void 0&&g===void 0&&typeof d!=="string")for(b in d)this.dg(b,d[b]);else this.dg(d,c,g);return this},dg:function(d,c,g){if(d!="__proto__"){var b=this[d],f=this[l[d]||++h&&(l[d]=d+"Setter")];h>5E3&&(l={},h=0);if(g||c!==b)f&&(c=f.call(this,c)),b!==c&&this.zd(d,this[d]=c,b)}},get:function(d){return this[d]},remove:function(d){var c=this[d];this.hasOwnProperty(d)&&
(delete this[d],c!==this[d]&&this.zd(d,this[d],c))},zd:function(d,c,g){var b=this.Ne,f,r,a=1,q;if(b){q=b["*"];do if(q){q=q.slice(0);f=q.length;for(r=0;r<f;)if(q[r++].call(q[r++],this,d,c,g),this[d]!==c)return}while(a--&&(q=b[d]))}},addObserver:function(d,c,g){var b=this.Ne||(this.Ne={});(b[d]||(b[d]=[])).push(c,g);return this},removeObserver:function(d,c,g){var b=this.Ne,f,r,a=0;if(b&&(f=b[d]))for(r=f.length;a<r;)f[a]===c&&f[a+1]===g&&(f.splice(a,2),r===2&&delete b[d]),a+=2;return this},observersSetter:function(d){for(var c in d)this.addObserver(c,
d[c])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Point");
(function(e){function l(a,f,b,c){c||(c=0);return f-c<=a&&b+c>=a||f+c>=a&&b-c<=a}var h=Math,d=h.abs,c=h.sqrt,g=h.pow,b=h.round,f=h.floor,r=h.ceil,a=h.min,q=h.max,k=e.d,m=e.Point=function(a,f){this.x=+a;this.y=+f};ovi.extend(m.prototype,{validate:function(){return this.x===+this.x&&this.y===+this.y},equals:function(a){return a?this===a||this.x===a.x&&this.y===a.y:!1},clone:function(){return new m(this.x,this.y)},toString:function(){return this.x+", "+this.y},add:function(a){return new m(this.x+a.x,
this.y+a.y)},sub:function(a){return new m(this.x-a.x,this.y-a.y)},multiply:function(a){return new m(this.x*a,this.y*a)},divide:function(a){a===0&&k("divisor can not be Zero");return new m(this.x/a,this.y/a)},modulo:function(a){a===0&&k("divisor can not be Zero");return new m(this.x%a,this.y%a)},round:function(){return new m(b(this.x),b(this.y))},floor:function(){return new m(f(this.x),f(this.y))},ceil:function(){return new m(r(this.x),r(this.y))},len:function(){return c(this.x*this.x+this.y*this.y)},
min:function(f){return new m(a(this.x,f.x),a(this.y,f.y))},max:function(a){return new m(q(this.x,a.x),q(this.y,a.y))},span:function(a){return new m(d(this.x-a.x),d(this.y-a.y))},distance:function(a){return c(g(this.x-a.x,2)+g(this.y-a.y,2))},getNearest:function(a,f){var b=f.x-a.x,c=f.y-a.y,k;k=a;if(b||c)k=((this.x-a.x)*b+(this.y-a.y)*c)/(b*b+c*c),k=k<=0?a:k>=1?f:new m(a.x+k*b,a.y+k*c);return k},isCoveredBy:function(a,f,b){return m.isCoveredBy(this.x,this.y,a,f,b)}});m.fromObject=function(a){var f,
b;return a instanceof m?a:a&&("x"in a&&"y"in a&&(f=a.x,b=a.y,1)||a.length===2&&(f=a[0],b=a[1],1))?new m(f,b):null};m.isCoveredBy=function(a,f,b,k,m){for(var q=b.length,r=q,d,e,h,A=b[0],D,E=0,O=0,I=k/2||0,L=m?1:3;D!="V"&&r>L;){d=b[--r];k=b[--r];h=b[r?r-1:(q+(r-1))%q];e=b[r?r-2:(q+(r-2))%q];if(k>=a-I&&k<=a+I&&d>=f-I&&d<=f+I||e>=a-I&&e<=a+I&&h>=f-I&&h<=f+I)D="V";else if(!D&&k===a)e===a&&(d<f&&h>f||d>f&&h<f)||(A<=a&&e>a||A>=a&&e<a)&&(d>=f?++E:++O),D=l(f,d,h,I)&&c(g((a-e)*(d-h)-(f-h)*(k-e),2)/(g(k-e,2)+
g(d-h,2)))<=I&&"E";else if(!D&&l(a,k,e,I)){if(k<a&&e>a||k>a&&e<a)A=d+(h-d)*((a-k)/(e-k)),E+=A>f,O+=A<f;D=l(f,d,h,I)&&c(g((a-e)*(d-h)-(f-h)*(k-e),2)/(g(k-e,2)+g(d-h,2)))<=I&&"E"}A=k}return m&&D==="S"&&D||D||m&&O&&E%2&&"S"||!1};m.prototype.toString=function(){return this.x+", "+this.y}})(nokia.maps.util);ovi.provide("nokia.maps.util.Rectangle");
(function(e){var l=Math.max,h=e.Point,d=e.Rectangle=function(c){for(var d=c.length,b=this.topLeft=c[0].clone(),f=this.bottomRight=b.clone(),r,a;--d>=0;){a=(r=c[d]).x;r=r.y;if(a<b.x)b.x=a;else if(a>f.x)f.x=a;if(r<b.y)b.y=r;else if(r>f.y)f.y=r}return this};ovi.extend(d.prototype,{equals:function(c){var d,b,f,r;return!!c&&(d=this.topLeft).x===(f=c.topLeft).x&&d.y===f.y&&(b=this.bottomRight).x===(r=c.bottomRight).x&&b.y===r.y},addPoint:function(c){return new d([this.topLeft,this.bottomRight,c])},addPoints:function(c){return c.length?
new d(c.concat(this.topLeft,this.bottomRight)):this},getCenter:function(){var c=this.topLeft,d=this.bottomRight;return new h((c.x+d.x)/2,(c.y+d.y)/2)},centerTo:function(c){var g=this.bottomRight,b=c.span(this.topLeft),f=c.span(g),g=l(b.x,f.x),b=l(b.y,f.y);return new d([new h(c.x-g,c.y-b),new h(c.x+g,c.y+b)])},intersection:function(c){var g,b;return c&&(g=this.topLeft.max(c.topLeft||c)).x<=(b=this.bottomRight.min(c.bottomRight||c)).x&&g.y<=b.y?new d([g,b]):null},merge:function(c){return c?new d([this.topLeft.min(c.topLeft||
c),this.bottomRight.max(c.bottomRight||c)]):this.clone()},pad:function(c){return c?new d([this.topLeft.sub(new h(c,c)),this.bottomRight.add(new h(c,c))]):this.clone()},getWidth:function(){return this.bottomRight.x-this.topLeft.x},getHeight:function(){return this.bottomRight.y-this.topLeft.y},toString:function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"},contains:function(c){if(c)var d=this.topLeft,b=this.bottomRight,f=f=c.topLeft||c,r=c.bottomRight||c;return!!c&&d.x<=f.x&&d.y<=f.y&&b.x>=
r.x&&b.y>=r.y},clone:function(){return new d([this.topLeft,this.bottomRight])},initialize:d});d.prototype.toString=function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"}})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeNode");
(function(e){var l=Math.max,h=Math.min;e.RTreeNode=new ovi.Class({initialize:function(d,c){this.Leaf=d;this.ParentNode=c||null;this.Entries=[]},Leaf:null,Root:null,ParentNode:null,ParentEntry:null,Entries:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,addChild:function(d){this.Entries.push(d);this.Leaf=!1;d.ParentNode=this;d.ParentEntry=this.Entries.length-1;this.updateBoundingBox(d.X1,d.X2,d.Y1,d.Y2)},removeChild:function(d,c){for(var g=this.Entries,b=g.splice(d,1)[0],f=d,r=g.length;f<r;f++)g[f].ParentEntry--;
c&&this.calculateBoundingBox();return b},calculateBoundingBox:function(){var d=this.Entries,c=d.length;this.X1=Infinity;this.X2=-Infinity;this.Y1=Infinity;for(this.Y2=-Infinity;entry=d[--c];){if(entry.X1<this.X1)this.X1=entry.X1;if(entry.Y1<this.Y1)this.Y1=entry.Y1;if(entry.X2>this.X2)this.X2=entry.X2;if(entry.Y2>this.Y2)this.Y2=entry.Y2}this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},updateBoundingBox:function(d,c,g,b){this.Volume===null?(this.X1=d,this.X2=c,this.Y1=g,this.Y2=b):(this.X1=h(d,this.X1),
this.X2=l(c,this.X2),this.Y1=h(g,this.Y1),this.Y2=l(b,this.Y2));this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},getEnlargement:function(d,c,g,b){return(l(this.X2,c)-h(this.X1,d))*(l(this.Y2,b)-h(this.Y1,g))-this.Volume},overlaps:function(d,c,g,b){return d<this.X2&&c>this.X1&&g<this.Y2&&b>this.Y1}})})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeRecord");
(function(e){var l=Math.max,h=Math.min;e.RTreeRecord=new ovi.Class({initialize:function(d,c,g,b){var f;d>g&&(f=d,d=g,g=f);c>b&&(f=c,c=b,b=f);this.X1=d||0;this.Y1=c||0;this.X2=g||0;this.Y2=b||0;this.Leaf=!0},Id:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,Priority:32,getEnlargement:function(d,c,g,b){return(l(this.X2,c)-h(this.X1,d))*(l(this.Y2,b)-h(this.Y1,g))-this.Volume},overlaps:function(d,c,g,b){return d<this.X2&&c>this.X1&&g<this.Y2&&b>this.Y1}})})(nokia.maps.util);ovi.provide("ovi.Logger");
(function(e){function l(c,g){for(var b=d.length-1;b>-1;--b)try{d[b][c].apply(d[b],g)}catch(f){}}var h=!0,d=[];e.Logger={addLogger:function(c){if(c===null||typeof c!=="object"||typeof c.debug!=="function"||typeof c.info!=="function"||typeof c.warn!=="function"||typeof c.error!=="function")throw new TypeError("Illegal logger object");for(var g=d.length-1;g>-1;--g)if(d[g]===c)return l("warn",["The logger is already attached"]),!1;typeof c.initLogger==="function"&&c.initLogger();d.push(c);return!0},removeLogger:function(c){for(var g=
d.length-1;g>-1;--g)if(d[g]===c)return d.splice(g,1),typeof c.cleanupLogger==="function"&&c.cleanupLogger(),!0;l("warn",["The passed logger wasn't attached"]);return!1},removeAllLoggers:function(){var c=d;d=[];for(var g=c.length-1;g>-1;--g)if(typeof c[g].cleanupLogger==="function")try{c[g].cleanupLogger()}catch(b){}},isEnabled:function(){return h},enable:function(){h=!0},disable:function(){h=!1},debug:function(){h&&l("debug",arguments)},info:function(){h&&l("info",arguments)},warn:function(){h&&l("warn",
arguments)},error:function(){h&&l("error",arguments)}};e.debug=function(){e.Logger.debug.apply(this,arguments)};e.info=function(){e.Logger.info.apply(this,arguments)};e.warn=function(){e.Logger.warn.apply(this,arguments)};e.error=function(){e.Logger.error.apply(this,arguments)}})(ovi);ovi.provide("nokia.maps.util.Vector3D");
(function(e){var l=Math,h=e.d,d=l.sqrt,c=l.acos,g=180/Math.PI,b;e.Vector3D=b=function(f,b,a){this.x=+f;this.y=+b;this.z=+a};ovi.extend(b.prototype,{add:function(f){return new b(this.x+f.x,this.y+f.y,this.z+f.z)},subtract:function(f){return new b(this.x-f.x,this.y-f.y,this.z-f.z)},multiply:function(f){f instanceof b||h("Parameter should be an instanceof nokia.maps.util.Vector3D");return new b(this.x*f.x,this.y*f.y,this.z*f.z)},divide:function(f){(f.x===0||f.y===0||f.z===0)&&h("Vectors should not be divided by zero");
return new b(this.x/f.x,this.y/f.y,this.z/f.z)},angle:function(f,b,a,q){f=+f||0;a=a?f-this.x:this.x-f;f=q?f-this.y:this.y-(+b||0);f=!a&&!f?0:c(f/d(a*a+f*f))*g;a<0&&(f=360-f);return f},dot:function(f){f=this.multiply(f);return f.x+f.y+f.z},magnitude:function(){return d(this.dot(this))},normal:function(f){var c=this.x,a=this.y,q=this.z,k=f.x,m=f.y,f=f.z;return new b(a*f-q*m,-(c*f-q*k),c*m-a*k)},normalize:function(){var f=this.magnitude();return new b(this.x/f,this.y/f,this.z/f)}})})(nokia.maps.util);
ovi.provide("nokia.maps.util.Matrix3D");
(function(e){var l=Math,h=l.sqrt,d=l.sin,c=l.cos,g=l.tan,b=e.Point,f=e.Vector3D,r=e.Matrix3D=function(a){this.rows=a||[[1,0,0,0],[0,1,0,0],[0,0,1,0]]};ovi.extend(r.prototype,{Aa:function(a){for(var f=this.rows,b,c,p,d=a[0],g=a[1],u=a[2],e=[[],[],[]],h,l=3;l--;)h=e[l],a=f[l],b=a[0],c=a[1],p=a[2],h[0]=b*d[0]+c*g[0]+p*u[0],h[1]=b*d[1]+c*g[1]+p*u[1],h[2]=b*d[2]+c*g[2]+p*u[2],h[3]=b*d[3]+c*g[3]+p*u[3]+a[3];return new r(e)},concat:function(a){return this.Aa(a.rows)},scale:function(a,f,b){return this.Aa([[a,
0,0,0],[0,f,0,0],[0,0,b,0]])},getScale:function(){var a=this.rows,b;return new f(h((b=a[0])[0]*b[0]+b[1]*b[1]+b[2]*b[2]),h((b=a[1])[0]*b[0]+b[1]*b[1]+b[2]*b[2]),h((b=a[2])[0]*b[0]+b[1]*b[1]+b[2]*b[2]))},translate:function(a,f,b){return this.Aa([[1,0,0,a],[0,1,0,f],[0,0,1,b]])},getTranslate:function(){return new f(this.rows[0][3],this.rows[1][3],this.rows[2][3])},rotateX:function(a){var f=d(a),a=c(a);return this.Aa([[1,0,0,0],[0,a,-f,0],[0,f,a,0]])},rotateY:function(a){var f=d(a),a=c(a);return this.Aa([[a,
0,f,0],[0,1,0,0],[-f,0,a,0]])},rotateZ:function(a){var f=d(a),a=c(a);return this.Aa([[a,-f,0,0],[f,a,0,0],[0,0,1,0]])},skewX:function(a){return this.Aa([[1,g(a),0,0],[0,1,0,0],[0,0,1,0]])},skewY:function(a){return this.Aa([[1,0,0,0],[g(a),1,0,0],[0,0,1,0]])},transformVector:function(a){var b=this.rows,c,m=a.x,p=a.y,a=a.z;return new f((c=b[0])[0]*m+c[1]*p+c[2]*a+c[3],(c=b[1])[0]*m+c[1]*p+c[2]*a+c[3],(c=b[2])[0]*m+c[1]*p+c[2]*a+c[3])},transformPoint:function(a){var f=this.rows,c,m=a.x,a=a.y;return new b((c=
f[0])[0]*m+c[1]*a+c[3],(c=f[1])[0]*m+c[1]*a+c[3])},transformVectors:function(a,f){var b=this.rows,c,p,r,d,g,e=a.length;for(g=0;g<e;)p=+a[g++],r=+a[g++],d=+a[g++],f.push((c=b[0])[0]*p+c[1]*r+c[2]*d+c[3],(c=b[1])[0]*p+c[1]*r+c[2]*d+c[3],(c=b[2])[0]*p+c[1]*r+c[2]*d+c[3])},transformPoints:function(a,f){var b=this.rows,c,p,r,d,g=a.length;for(d=0;d<g;)p=+a[d++],r=+a[d++],f.push((c=b[0])[0]*p+c[1]*r+c[3],(c=b[1])[0]*p+c[1]*r+c[3])},clone:function(){for(var a=this.rows,f=Array(3),b=3;b--;)f[b]=a[b].slice();
return new r(f)},inverse:function(){var a=this.rows,f=a[0],b=a[1],a=a[2],c=f[0],p=f[1],d=f[2],g=b[0],u=b[1],e=b[2],h=a[0],l=a[1],y=a[2],B=c*(u*y-e*l)-p*(y*g-e*h)+d*(g*l-u*h);return B===0?null:new r([[(u*y-e*l)/B,(d*l-p*y)/B,(p*e-d*u)/B,-f[3]],[(e*h-g*y)/B,(c*y-d*h)/B,(d*g-c*e)/B,-b[3]],[(g*l-u*h)/B,(h*p-c*l)/B,(c*u-p*g)/B,-a[3]]])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.math.clipping");
(function(e){function l(a){for(var f,b,c=0,m=a.length;c<m;c++){f=k(a[c].x,a[c].y,b,null,0,0);if(f.next=b)b.prev=f;b=f}return b}function h(a,f,b){for(;f!=b&&f.alpha<a.alpha;)f=f.next;a.next=f;a.prev=f.prev;a.next.prev=a;a.prev.next=a}function d(a,f){var b,m,p=0,r;k(0,a.y,null,null,0,0);m=k(-2147483648,a.y,null,null,0,0);for(b=f;b.next;b=b.next)(r=c(m,a,b,b.next,{}))&&p++;return p%2}function c(a,f,b,c,k){var m,p;p=(f.x-a.x)*(c.y-b.y)-(f.y-a.y)*(c.x-b.x);var r;if(!p&&(a.origx=a.x,a.origy=a.y,a.x+=(z()-
0.5)/1E4,a.y+=(z()-0.5)/1E4,p=(f.x-a.x)*(c.y-b.y)-(f.y-a.y)*(c.x-b.x),!p))return 0;m=((b.x-a.x)*(c.y-b.y)-(b.y-a.y)*(c.x-b.x))/p;p=((f.y-a.y)*(b.x-a.x)-(f.x-a.x)*(b.y-a.y))/p;if(m<0||m>1||p<0||p>1)return 0;g(a,f,b,c,k,m);if(k.alpha_p===0&&(r=k.alpha_q)>=0&&r<=1){if(!a.origx)a.origx=a.x,a.origy=a.y;a.x+=(z()-0.5)/1E4;a.y+=(z()-0.5)/1E4;g(a,f,b,c,k,m)}return 1}function g(a,f,c,k,m,p){var r=a.x+p*(f.x-a.x),p=a.y+p*(f.y-a.y);m.alpha_p=b(a.x,a.y,r,p)/b(a.x,a.y,f.x,f.y);m.alpha_q=b(c.x,c.y,r,p)/b(c.x,c.y,
k.x,k.y);m.xi=1*r;m.yi=1*p}function b(a,f,b,c){return p((a-b)*(a-b)+(f-c)*(f-c))}function f(f){var b=a(f);b.prev.next=f;f.prev=b.prev}function r(a){var f=a;if(f){do f=f.next;while(f!=a&&(!f.intersect||f.intersect&&f.visited))}return f}function a(a){if(a)for(;a.next;)a=a.next;return a}function q(a){for(;a&&a.intersect;)a=a.next;return a}function k(a,f,b,c,k,m){var p={};p.x=a;p.y=f;p.next=b;if(p.prev=c)p.prev.next=p;if(b)p.next.prev=p;p.nextPoly=null;p.neighbor=null;p.intersect=k;p.entry=0;p.visited=
0;p.alpha=m;return p}var e=e.util,m=e.Point,p=Math.sqrt,z=Math.random,s;e.math.clipping={qt:s=function(a,f,b,c,k,p){var r=a.x,a=-a.y,q=f.x,f=-f.y,d,g,s,b=-b,p=-p;if(r>q){if(q>k||r<c)return;s=r;g=a;r=q;a=f;q=s;f=g;s=1}else if(r>k||q<c)return;if(a>f){if(f>b||a<p)return;d=1;a=-a;f=-f;g=p;p=-b;b=-g}else if(a>b||f<p)return;if(r<c){if((a+=(c-r)*(f-a)/(q-r))>b)return;r=c}if(a<p){if((r+=(p-a)*(q-r)/(f-a))>k)return;a=p}q>k&&(f=a+(k-r)*(f-a)/(q-r),q=k);f>b&&(q=r+(b-a)*(q-r)/(f-a),f=b);d&&(a=-a,f=-f);return s?
[new m(q,-f),new m(r,-a)]:[new m(r,-a),new m(q,-f)]},clipStrips:function(a,f,b,c,k){var m,p,r=a.length,q,d,g,e,h,z,l;if(r){for(m=[];r--;){z=a[r];e=z.length;h=0;for(q=1;q<e;q++)if(l=s(z[q-1],z[q],f,b,c,k))d=l[0],g=l[1],h&&h.equals(d)?p.push(g):m.push(p=l),h=g}e=m.length;e>1&&m[0][0].equals(m[e-1][m[e-1].length-1])&&m[0].splice.apply(m[0],[0,1].concat(m.splice(e-1,1)[0]))}else m=a;return m},INTERSECTION:0,UNION:1,COMPONENT_SHAPE:2,COMPONENT_WINDOW:3,clip:function(b,m,p){var b=l(b),m=l(m),g,s,e,z,A,
D,E;D={};s=g=1;switch(~~(1*p)){case 1:s=g=0;break;case 2:g=0;s=1;break;case 3:g=1,s=0}g={pS:g,pC:s};var p=g.pS,O=g.pC,I,L,N;if(m&&b){g=a(m);k(m.x,m.y,null,g,0,0);s=a(b);k(b.x,b.y,null,s,0,0);for(g=m;g.next;g=g.next)if(!g.intersect)for(s=b;s.next;s=s.next)if(!s.intersect&&(I=q(g.next),L=q(s.next),e=c(g,I,s,L,D)))e=D.alpha_p,E=D.alpha_q,z=D.xi,A=D.yi,e=k(z,A,null,null,1,e),z=k(z,A,null,null,1,E),e.neighbor=z,z.neighbor=e,h(e,g,I),h(z,s,L);D=d(m,b);p&&(D=1-D);for(g=m;g.next;g=g.next)if(g.intersect)g.entry=
D,D=1-D;D=d(b,m);O&&(D=1-D);for(s=b;s.next;s=s.next)if(s.intersect)s.entry=D,D=1-D;f(m);for(f(b);(b=r(m))!=m;){for(p=null;!b.visited;b=b.neighbor)for(D=b.entry;;)if(p=k(b.x,b.y,p,null,0,0),b.visited=1,b=D?b.next:b.prev,b.intersect){b.visited=1;break}p.nextPoly=N;N=p}return N}}}})(nokia.maps);ovi.provide("nokia.maps.util.IBox");ovi.provide("nokia.maps.gfx.Color");
(function(){var e=Math.round,l=RegExp("^\\s*(maroon|red|orange|yellow|olive|purple|fuchsia|white|lime|green|navy|blue|aqua|teal|black|silver|gray|grey|pink)\\s*$|^\\s*[#]?([0-9a-f]{8,8})\\s*$|^\\s*[#]?([0-9a-f]{6,6})\\s*$|^\\s*[#]?([0-9a-f]{4,4})\\s*$|^\\s*[#]?([0-9a-f]{3,3})\\s*$|^\\s*(rgb[a]?)\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,?\\s*(\\d*[.]{0,1}\\d*)?\\s*\\)\\s*$","i"),h={maroon:"800000",red:"ff0000",orange:"ffa500",yellow:"ffff00",olive:"808000",purple:"800080",fuchsia:"ff00ff",white:"ffffff",
lime:"00ff00",green:"008000",navy:"000080",blue:"0000ff",aqua:"00ffff",teal:"008080",black:"000000",silver:"c0c0c0",gray:"808080",grey:"808080",pink:"ffc0cb"},d=nokia.maps.gfx.Color=new ovi.Class({Statics:{byteOf:function(c){return e(c*255)&255},percentOf:function(c){return c>255?1:c<0?0:c/255},compress:function(c,d,b,f){return(c&255)<<24>>>0|(d&255)<<16|(b&255)<<8|f&255},red:function(c){return c>>>24},green:function(c){return c>>>16&255},blue:function(c){return c>>>8&255},alpha:function(c){return c&
255},parseCss:function(c,g){var b,f,r,a=l.exec(c),q,k;if(a&&a.length>1){b=isNaN(g)?255:g*255&255;f=b.toString(16).toLowerCase();f.length<2&&(f="0"+f);if(a[1])r=h[a[1]]+f;else if(a[2])r=a[2];else if(a[3])r=a[3]+f;else if(q=a[4]||a[5])r=q.replace(/(.)/g,"$1$1"),q.length===3&&(r+=f);else if(a[6])return d.compress(a[7],a[8],a[9],(k=+a[10],isNaN(k)?b:e((k<0?0:k)*255)));if(r&&r.length===8)return parseInt(r,16)>>>0}return null},getCssRGBA:function(c){return d.getCssRGB(c,!0)},getCssRGB:function(c,d){return"rgb"+
(d?"a(":"(")+(c>>>24)+", "+(c>>>16&255)+", "+(c>>>8&255)+(d?(", "+(c&255)/255).substr(0,7)+")":")")},getCssHex:function(c,d,b){c=(c>>>(d?0:8)).toString(16);d=(d?8:6)-c.length;return(b||"#")+(d>0?"0000000".substr(-d)+c:c)}}})})();ovi.provide("nokia.maps.util.Brush");
(function(e){var l=nokia.maps.gfx.Color;e.Brush=new ovi.Class({color:"#05A6",fill:"solid",initialize:function(h,d){var c,g,b=e.d;h&&("color"in h&&(c=l.parseCss(h.color),c===null&&b("Invalid color set!")),"fill"in h&&h.fill!=="solid"&&h.fill!=="none"&&b("Invalid fill set!"));if(d instanceof nokia.maps.util.Brush)for(g in d)this[g]=d[g];for(g in h)this[g]=h[g]},fa:function(){return this.c||(this.c=e.$g(this))}})})(nokia.maps.util);ovi.provide("ovi.dom.common");
ovi.dom.addEvent=function(e,l,h,d){e.addEventListener?e.addEventListener(l,h,d!==void 0?d:!1):e.attachEvent&&e.attachEvent("on"+l,h)};ovi.dom.removeEvent=function(e,l,h,d){e.removeEventListener?e.removeEventListener(l,h,d!==void 0?d:!1):e.detachEvent&&e.detachEvent("on"+l,h)};ovi.dom.addClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=e.className,d=" "+h+" ",c=0,g;g=l[c++];)d.indexOf(" "+g+" ")===-1&&(h+=(h?" ":"")+g);return e.className=h};
ovi.dom.removeClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=e.className.split(" "),d=0,c=0,g=h.length,b;b=l[d++];)for(c=g;c--;)b===h[c]&&h.splice(c,1);return e.className=h.join(" ")};ovi.dom.hasClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=" "+e.className+" ",d=l.length,c=0,g;d&&(g=l[c++]);)d=h.indexOf(" "+g+" ")>-1;return d};
ovi.dom.toggleClass=function(e){for(var l=Array.prototype.slice.call(arguments,1),h=" "+e.className+" ",d,c=0,g=l.length;c<g;c++)d=l[c],(h.indexOf(" "+d+" ")>-1?ovi.dom.removeClass:ovi.dom.addClass)(e,d)};ovi.dom.offset=function(e,l){var h=e.getBoundingClientRect(),d=e.ownerDocument,c=d.documentElement,g=d.body,d=h.top+(c.scrollTop||g.scrollTop)-c.clientTop,h=h.left+(c.scrollLeft||g.scrollLeft)-c.clientLeft;l&&(c=ovi.dom.offset(l),d-=c.top,h-=c.left);return{top:d,left:h}};
ovi.dom.dimensions=function(e){if("scrollTo"in e&&e.document)return e=e.document.documentElement,{width:e.clientWidth,height:e.clientHeight};return{width:e.offsetWidth,height:e.offsetHeight}};
ovi.dom.getStyle=function(){if(window.getComputedStyle){var e=["moz","ms","webkit"];ovi.dom.getStyle=function(d,c){var g=d.ownerDocument.defaultView;if(!g)return null;var g=g.getComputedStyle(d,null),b=g.getPropertyValue(c);if(b)return b;for(var f=0,r=e.length;f<r;f++)if(b=g.getPropertyValue("-"+e[f]+"-"+c))return b;return null}}else{var l=/-([a-z])/ig,h=function(d,c){return c.toUpperCase()};ovi.dom.getStyle=function(d,c){c=c==="float"?"styleFloat":c.replace(l,h);return d.currentStyle[c]||d.currentStyle["Ms"+
c.charAt(0).toUpperCase()+c.slice(1)]||null}}return ovi.dom.getStyle.apply(null,arguments)};ovi.provide("nokia.maps.advsearch._packaging.base");ovi.provide("nokia.maps.map.component.Component");
(function(e){var l=nokia.maps.util.d,h={"2d":"MAP_2D","3d":"GLOBE",panorama:"PANORAMA"},d=e.Component=new ovi.Class({Extends:nokia.maps.util.OObject,getId:function(){if(window)return this.c},getVersion:function(){return this.n},queryReference:function(){this.$e++;return this},releaseReference:function(){return this.$e!==0?--this.$e:0},attach:function(c){this.mapDisplay&&l("Error: A component can only be attached to one display!");this.mapDisplay=c},detach:function(){delete this.mapDisplay},destroy:nokia.maps.util.u,
isCompatible:function(c){return this.q&this[h[c]]},capture:nokia.maps.util.u,MAP_2D:1,PANORAMA:2,GLOBE:4,$e:1,q:0});ovi.Array("Overview TypeSelector DistanceMeasurement InfoBubbles ScaleBar ViewControl ZoomBar ZoomRectangle OverlaysSelector ContextMenu Traffic TrafficIncidents Panorama PublicTransport".split(" ")).forEach(function(c){e[c]=function(){ovi.warn("There is no UI defined for the display. Are you missing the UI package?");return new d({c:c+"Dummy",n:"0"})}})})(nokia.maps.map.component);
ovi.provide("nokia.maps.advrouting._packaging.base");ovi.provide("nokia.maps.routing._packaging.base");ovi.provide("nokia.maps.positioning._packaging.base");ovi.provide("ovi.json");
(function(){function e(e,d){if(typeof d==="string"){var c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?Z$/.exec(d);if(c)return new Date(Date.UTC(+c[1],+c[2]-1,+c[3],+c[4],+c[5],+c[6],+c[8]||0))}return d}var l=window.JSON||{};window.JSON||function(){function e(a){return a<10?"0"+a:a}function d(f){b.lastIndex=0;return b.test(f)?'"'+f.replace(b,function(f){var b=a[f];return typeof b==="string"?b:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function c(a,b){var g,
s,u,l,x=f,v,y=b[a];y&&typeof y==="object"&&(g=Object.prototype.toString.apply(y),g==="[object Date]"?y=y.getUTCFullYear()+"-"+e(y.getUTCMonth()+1)+"-"+e(y.getUTCDate())+"T"+e(y.getUTCHours())+":"+e(y.getUTCMinutes())+":"+e(y.getUTCSeconds())+"Z":k.test(g)&&(y=y.valueOf()));typeof q==="function"&&(y=q.call(b,a,y));switch(typeof y){case "string":return d(y);case "number":return isFinite(y)?String(y):"null";case "boolean":case "null":return String(y);case "object":if(!y)return"null";f+=r;v=[];if(Object.prototype.toString.apply(y)===
"[object Array]"){l=y.length;for(g=0;g<l;g+=1)v[g]=c(g,y)||"null";u=v.length===0?"[]":f?"[\n"+f+v.join(",\n"+f)+"\n"+x+"]":"["+v.join(",")+"]";f=x;return u}if(q&&typeof q==="object"){l=q.length;for(g=0;g<l;g+=1)s=q[g],typeof s==="string"&&(u=c(s,y))&&v.push(d(s)+(f?": ":":")+u)}else for(s in y)Object.hasOwnProperty.call(y,s)&&(u=c(s,y))&&v.push(d(s)+(f?": ":":")+u);u=v.length===0?"{}":f?"{\n"+f+v.join(",\n"+f)+"\n"+x+"}":"{"+v.join(",")+"}";f=x;return u}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,r,a={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q,k=/\[object (String|Number|Boolean)\]/;if(typeof l.stringify!=="function")l.stringify=function(a,b,k){var d;r=f="";if(typeof k==="number")for(d=0;d<k;d+=1)r+=" ";else typeof k==="string"&&(r=k);if((q=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");
return c("",{"":a})};if(typeof l.parse!=="function")l.parse=function(a,f){function b(a,c){var k,m,r=a[c];if(r&&typeof r==="object")for(k in r)Object.hasOwnProperty.call(r,k)&&(m=b(r,k),m!==void 0?r[k]=m:delete r[k]);return f.call(a,c,r)}var c;g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),typeof f==="function"?b({"":c},""):c;throw new SyntaxError("JSON.parse");}}();ovi.json={parse:function(h,d){return l.parse(h,d===void 0?e:d)},stringify:l.stringify}})();ovi.provide("nokia.maps.net.IResult");ovi.provide("nokia.maps.behavior._packaging.base");ovi.provide("nokia.maps.map._packaging.base");ovi.provide("nokia.maps.dom.Touch");ovi.provide("nokia.maps.dom");
(function(e){function l(f,b){var a=b.width,c=b.height,k=f.getContext("2d");k.globalCompositeOperation="copy";k.drawImage(b,0,0,a,c,0,0,a,c)}function h(f,b){if("$n$opacity"in b)f.$n$opacity=b.$n$opacity,f.$n$width=b.$n$width,f.$n$height=b.$n$height}var d=null,c=function(){var f=new Image;f.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";return f.width!==f.cloneNode(!1).width}(),g=function(){var f=document.createElement("script");f.text="//";return!f.cloneNode(!0).text}(),
b=ovi.browser.msie;ovi.extend(e,{contains:b?function(f,b){var a=ovi.type(f),c=ovi.type(b);return(a=="document"||a=="element")&&(c=="element"||c=="textnode")?f.contains(b):!1}:function(f,b){for(;b;){if(b===f)return!0;b=b.parentNode}return!1},cloneNode:function(f,b){var a,q=f.nodeName;if(q==="IMG")c?(a=f.ownerDocument.createElement("img"),a.src=f.src):a=f.cloneNode(!1);else if(a=f.cloneNode(!!b),q==="CANVAS")l(a,f);else if(g&&(nodeScripts=f.getElementsByTagName("script"),i=nodeScripts.length))for(cloneScripts=
a.getElementsByTagName("script");i--;)cloneScripts[i].text=nodeScripts[i].text;h(a,f);return a},importNode:document.importNode&&document.importNode.toString().indexOf("[native code]")>0&&!b?function(f,b,a){f=f.importNode(b,!!a);b.nodeName==="CANVAS"&&l(f,b);h(f,b);return f}:function(f,b,a){var c,k,m,p,d;if(f!==b.ownerDocument){m=b.attributes;c=f.createElement(b.nodeName);for(k=m.length;k--;)if((p=m[k]).specified)(d=p.name)==="style"?c.style.cssText=b.style.cssText:d==="class"?c.className=b.className:
c.setAttribute(d,p.value);if(a)for(k=b.firstChild;k;)c.appendChild(e.importNode(f,k,a)),k=k.nextSibling}else c=e.cloneNode(b,a);b.nodeName==="CANVAS"&&l(c,b);h(c,b);return c},isQuirksMode:function(f){ovi.type(f)!=="document"&&(f=document);if(!f||typeof f.compatMode!=="string")return!0;return f.compatMode==="BackCompat"||f.compatMode==="QuirksMode"},supportsCanvas:function(){var f=document.createElement("CANVAS"),b;return f&&f.getContext&&(b=f.getContext("2d"))&&typeof b.fillText==="function"}(),getWindowSize:function(f){if(ovi.type(f)!==
"window"&&(f=window,ovi.type(f)!=="window"))return null;var b=document.images&&document.compatMode&&document.compatMode.indexOf("CSS1")>=0,a=f.document;if(f.innerWidth)return{width:f.innerWidth,height:f.innerHeight};if(b)return f=a.body.parentElement,{width:f.clientWidth,height:f.clientHeight};if(a.body&&a.body.clientWidth)return{width:a.body.clientWidth,height:a.body.clientHeight};return null},setStyle:function(f,b){var a={constructor:!0,prototype:!0};if(b&&f&&f.style)for(var c in b)!a[c]&&c in f.style&&
(f.style[c]=b[c]);return f},getStyle:function(f,b){if(document.defaultView&&document.defaultView.getComputedStyle){var a=f.ownerDocument.defaultView.getComputedStyle(f,"");if(!a)return!1;return a[b]}else return f.currentStyle[b]},ownerWindow:function(b){var c=ovi.type(b),a=null;if(!b)return null;if(c==="window")return b;if(c==="document")a=b;else if(b.ownerDocument)a=b.ownerDocument;else return null;return a.parentWindow||a.defaultView},getScrollBarSize:function(){if(d)return d;var b=document,c=0,
a=0,q=0,k=0,m=0,p=0,g=b.createElement("P"),s=b.createElement("P"),e,h;try{e=g.style;h=s.style;e.height="200px";e.width="200px";h.position="absolute";h.top=0;h.left=0;h.visibility="hidden";h.width="100px";h.height="100px";h.overflow="hidden";s.appendChild(g);b.body.appendChild(s);a=s.offsetWidth;m=s.offsetHeight;h.overflow="scroll";q=s.offsetWidth;p=s.offsetHeight;if(a===q)q=s.clientWidth;if(m===p)p=s.clientHeight;b.body.removeChild(s);c=a-q;k=m-p}catch(l){k=c=0}return k!==k||c!==c||k<=0||c<=0?d={width:17,
height:17}:d={width:c,height:k}},pb:function(b,c,a,q){c=b.ownerDocument.createElement(c);if(a)c.className=a;if(q)c.style.cssText=q;b.appendChild(c);return c},rl:function(b,c){var a=b.styleSheets,q=a.length,k,m,p=b.createElement("style");p.setAttribute("type","text/css");b.getElementsByTagName("head")[0].appendChild(p);k=a[a.length-1];a.length>q?c(k):m=setInterval(function(){for(var b=a.length,f;b--;)f=a[b],f.ownerNode===p&&(c(f),e.bh.push(f),clearInterval(m))},50)},bh:[],eq:function(f,c){for(var a=
e.bh,q=a.length;q--;)if(b&&a[q].owningElement.ownerDocument===f||a[q].ownerNode.ownerDocument===f)break;q<0?e.rl(f,c):c(a[q])},jp:b?function(b,c,a){return b.rules[b.addRule(c,a)]}:function(b,c,a){c=b.insertRule(c.concat("{",a,"}"),b.cssRules.length);return b.cssRules[c]},Er:b?function(b,c){for(var a=b.rules,q=a.length;q--;)if(a[q]===c){b.removeRule(q);break}}:function(b,c){for(var a=b.cssRules,q=a.length;q--;)if(a[q]===c){b.deleteRule(q);break}},$d:b&&document.createElement("p").style.opacity===void 0?
function(b,c){var a=b.style,q=Math.round(c*100);a.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+q+')"';a.filter="alpha(opacity="+q+")"}:function(b,c){b.style.opacity=c},xu:b?function(b){var c=this.Bm(b),a=c.getPropertyValue("background-image"),q,k,m,p=b.ownerDocument,d;if(a.toLowerCase().indexOf(".png")!=-1)q=c.getPropertyValue("background-position-x"),c=c.getPropertyValue("background-position-y"),d=p.createElement("img"),m=p.createElement("div"),m.style.position="absolute",m.style.left=
q,m.style.top=c,k=p.createElement("div"),m.appendChild(k),k.style.position="absolute",b.style.overflow="hidden",d.onload=function(){k.style.filter=["progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src='",a,"', sizingMethod='scale')"].join("");k.style.width=this.width+"px";k.style.height=this.height+"px";m.style.width=this.width+"px";m.style.height=this.height+"px"},a=a.substr(5,a.length-7),d.src=a,b.insertBefore(m,b.firstChild),b.style.background="",b.opacityWrapper=m}:function(){},
Bm:b&&!window.getComputedStyle?function(b){return new function(b){this.el=b;this.getPropertyValue=function(a){var b=/(\-([a-z]){1})/g;a=="float"&&(a="styleFloat");b.test(a)&&(a=a.replace(b,function(a,b,f){return f.toUpperCase()}));return this.el.currentStyle[a]?this.el.currentStyle[a]:null}}(b)}:window.getComputedStyle,findElement:function(b,c){if(c.querySelectorAll){var a=c.querySelectorAll("."+b);return a.length?a[a.length-1]:null}for(var q=RegExp("(^|\\s)"+b+"($|\\s)"),a=c.getElementsByTagName("*"),
k=a.length;k--;)if(q.test(a[k].className))return a[k];return null},Ob:function(b){for(var c;c=b.firstChild;)b.removeChild(c)}})})(nokia.maps.dom);ovi.provide("nokia.maps.dom.TouchList");
window.navigator.msPointerEnabled&&function(e){function l(e){ovi.extend(e,{ph:function(d){for(var c=this.length,g=-1;c--;)if(this[c].pointerId===d.pointerId){g=c;break}return g},pl:function(d){for(var c=0,g=d.length;c<g;c++)this.N(d[c])},N:function(d){var c=this.ph(d);if(c===-1)c=this.length;d.type="MSPointerMove";d.identifier=d.pointerId;d.force=d.pressure;d.radiusX=d.radiusY=1;d.rotationAngle=0;this[c]=d},S:function(d){d=this.ph(d);d>=0&&this.splice(d,1)},identifiedTouch:function(d){for(var c=this.length;c--;)if(this[c].identifier===
d)return this[c];return null},item:function(d){return this[d]}})}e.TouchList=function(){function e(){var d=Object.create(Array.prototype),d=Array.apply(d,arguments)||d;l(d);return d}ovi.extend(e,{fromArray:function(d){return e.apply(null,d)},isArray:function(d){return Object.prototype.toString.call(d).toLowerCase()==="[object array]"}});return e}()}(nokia.maps.dom);ovi.provide("nokia.maps.gfx.Image");
(function(){var e=nokia.maps.gfx.Image=new ovi.Class({Statics:{c:0,fromObjectListener:[],fromObject:function(l,h){for(var d=e.fromObjectListener,c,g=d.length,h=h||document;g--;)if(c=d[g](l,h))return c}},width:0,height:0,opacity:1})})();ovi.provide("nokia.maps.gfx.Painter");nokia.maps.gfx.Painter=new ovi.Class({Statics:{defaultPainter:null,Ag:function(e){return(e=+e)!==e||e<0||e>1?1:e}}});ovi.provide("nokia.maps.util.FontHelper");
(function(e){function l(c,d){return c=c.replace(RegExp("(?:((?:x*-)?small(?:er)?(?![-])|medium|(?:x*-)?large(?:r)?|[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)))(?:/((?:[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)|normal)))?","gi"),function(b,f,c){if(f&&f!=="")d.size=f;if(c&&c!=="")d.lineHeight=c;return""})}function h(c,d){var b=[],c=c.replace(RegExp("(?:(italic|oblique)|(small-caps)|(bold(?:er)?|lighter|[1-9]00)|(inherit|normal))+","gi"),function(f,c,a,q,k){c&&c!==""?d.style=c:a&&a!==""?d.variant=a:q&&q!==""?d.weight=
q:k&&k!==""&&b.push(k);return""});!d.style&&b.length&&(d.style=b.shift());!d.variant&&b.length&&(d.variant=b.shift());!d.weight&&b.length&&(d.weight=b.shift());return c}var d=e.d;e.FontHelper={parse:function(c){var d={},b=0,f=[],r,c=c.replace(RegExp("'.*'|\".*\"","gi"),function(a){r="_s_"+b;f[b]=a;b++;return r}),c=l(c,d),c=h(c,d),c=c.replace(/_s_([\d]+)/,function(a,b){return f[b]}),c=c.replace(/^[\s]+/,"");if(c!=="")d.family=c;if(typeof d.size==="string")d.size=e.FontHelper.Qh(d.size);return d},Qh:function(c){var g=
/([0-9]*(\.[0-9]*){0,1}(e[\+\-]{1}[0-9]*){0,1})\s*([a-zA-Z]+)/g,b=g.exec(c);g.exec("");if(b){c=parseFloat(b[1]);switch(b=b[4].toLowerCase()){case "pt":c=c*96/72;break;case "pc":c=c*96/72*12;break;case "mm":c=c*96/25.4;break;case "cm":c=c*96/25.4*10;break;case "in":c*=96;break;case "px":break;case "em":case "ex":d("Unsupported font size unit: "+b);break;default:d("Unknown font size unit: "+b)}return c+"px"}return parseFloat(c)+"px"},toString:function(c){var d=[];c.style&&d.push(c.style);c.variant&&
d.push(c.variant);c.weight&&d.push(c.weight);c.size&&(c.lineHeight?d.push(c.size+"/"+c.lineHeight):d.push(c.size));c.family&&d.push(c.family);return d.join(" ")}}})(nokia.maps.util);ovi.provide("nokia.maps.geo.Coordinate");
(function(e){var l=e.util,h=Math,d=h.abs,c=h.floor,g=h.round,b=h.min,f=h.log,r=h.tan,a=h.sqrt,q=h.pow,k=h.sin,m=h.cos,p=h.asin,z=h.atan2,s=h.PI,u=s/180,w=s/4,x=s/2,v=s*2,y=s*3,B=180/s,C=l.Vector3D,A=e.geo.Coordinate=function(a,b,f,c,k){c||A.isValid(a,b,f,k)||l.d("Coordinate: lat:"+a+", lng:"+b+(f?", alt:"+f:"")+(k?", altMode:"+k:""));this.longitude=+b;this.latitude=+a;f!==void 0&&(this.altitude=+f);if(k!==void 0)this.altMode=k};ovi.extend(A.prototype,{altitude:void 0,distance:function(f,c){if(c)return this.jm(f);
var d=this.latitude*u,r=f.latitude*u;return 12742E3*p(b(1,a(q(k((d-r)/2),2)+m(d)*m(r)*q(k((this.longitude*u-f.longitude*u)/2),2))))},Ri:function(){var a=(this.latitude+90)*u,b=this.longitude*u,f=6371E3+(this.altitude||0),c=k(a);return new C(f*c*m(b),f*c*k(b),f*m(a))},jm:function(b){var f=this.Ri(),b=b.Ri();return a(q(f.x-b.x,2)+q(f.y-b.y,2)+q(f.z-b.z,2))},bp:function(a,b){if(b/=6371E3){a*=u;var f=u*this.latitude,c=k(f),q=k(b),d=m(b),r=u*this.longitude,g=m(f),f=p(g*m(a)*q+c*d),c=z(k(a)*g*q,d-c*k(f)),
r=((r+c+s)%(2*s)-s)*B}return b?new A(f*B,(r+540)%360-180):this},walk:function(a,b,c){var p,q,g,e,h;if(c)return this.bp(a,b);a=(a%360+360)%360;if(!((a+90)%180))return a=this.longitude+b/(v*m(this.latitude*u)*6371E3)*(a===270?-360:360),new A(this.latitude,(a+540)%360-180);if(b/=6371E3)a*=u,p=this.latitude*u,q=this.longitude*u,g=p+b*m(a),e=g-p,c=f(r(g/2+w)/r(p/2+w)),c=!isNaN(e/c)?e/c:m(p),h=b*k(a)/c,d(g)>x&&(g=g>0?s-g:-(s-g));return b?new A(g*B,((q+h+y+(d(p+e)>x?s:0))%v-s)*B):this},equals:function(a){return a&&
this.latitude===a.latitude&&this.longitude===a.longitude||!1}});ovi.extend(A,{isValid:function(a,b,f,c){return a!=null&&a===+a&&a>=-90&&a<=90&&b!=null&&b===+b&&b>=-180&&b<=180&&(f===void 0||f===+f&&d(f)!==Infinity)&&(c===void 0||A.altModes.indexOf(c)>-1)},altModes:ovi.Array(["GL","OL","SL","SB","WE","WG"]),fromObject:function(){var a,b,f,c,k;a=arguments;var m=a[0];k=a.length;if(m instanceof A)return m;if(k>1)m=a;else if(m)k=m.length;else return null;a=m[0];b=m[1];f=m[2];c=m[3];if(k===2&&a===+a&&b===
+b)return new A(a,b);if(k===3&&a===+a&&b===+b&&f===+f)return new A(a,b,f);if(k===4&&a===+a&&b===+b&&f===+f&&(c===void 0||A.altModes.indexOf(c)>-1))return new A(a,b,f,!1,c);k=m.lat;a=m.lng;if(k!==void 0&&a!==void 0){if(k===+k&&a===+a)return new A(+k,+a);return null}k=m.latitude;a=m.longitude;if(k!==void 0&&a!==void 0&&k===+k&&a===+a)return new A(+k,+a);return null},Eg:function(a,b,f){var k=g(d(a)*3600)/3600,m=c(k),k=(k-m)*3600,p=c(k/60);return m+"\u00b0 "+p+"' "+g(k-p*60)+'" '+(a<0?f:b)},asString:function(a){return A.Eg(a.latitude,
"N","S")+", "+A.Eg(a.longitude,"E","W")}});A.prototype.toString=function(){return A.asString(this)}})(nokia.maps);ovi.provide("nokia.maps.util.QuadTree");
(function(e){function l(b,c){for(var a,q,k,m,p,d,g,e=0,h,x,v=4,y;v--;){y=v+4;p=[];a=+!(v%3);d=c[v];for(h=(q=b[v]).length;h--;){k=q[h];if(m=k.s)for(x=m.length;x--;)if(((g=m[x][y])>d)-a)d=g;for(x=4;x--;)if(m=k[x])a?m[y]<d&&p.push(m):m[y]>d&&p.push(m)}e+=p.length;c[v]=d;b[v]=p}e&&(c=l(b,c));return c}function h(){e.d("Entry out of tree bounds")}var d=1,c=e.QuadTree=new ovi.Class({initialize:function(b,c,a,q,k){this.gh=b||10;this.qi=c||1;this.ri=a||1;this.Lg=q||0;this.Mg=k||0;this.flush()},Statics:{MIN_X:"7",
MIN_Y:"4",MAX_X:"5",MAX_Y:"6",MID_X:"8",MID_Y:"9",TL:"0",TR:"1",BL:"2",BR:"3"},getExtremes:function(){var b,c;if(!(c=this.Vb))if(b=this.cd,b.s||b["0"]||b["1"]||b["2"]||b["3"])c=[b],b=l([c,c,c,c],[b["6"],b["7"],b["4"],b["5"]]),this.Vb=c={},c["4"]=b[0],c["5"]=b[1],c["6"]=b[2],c["7"]=b[3];return c||void 0},flush:function(){this.cd=this.pc=new g(0,0,this.Lg-this.qi,this.Mg-this.ri,this.Lg+this.qi,this.Mg+this.ri);this.Vb=0},remove:function(b){b.la.S(b,this);this.Vb=0},insert:function(b,c,a,q){var k,m=
this.pc;b<a?k=b:(k=a,a=b);c<q?(b=c,c=q):b=q;(k<m["7"]||b<m["4"]||a>m["5"]||c>m["6"])&&h();this.Vb=0;return this.ye(this.pc,k,b,a,c,this.gh)},insertSorted:function(b,c,a,q){var k=this.pc;(b<k["7"]||c<k["4"]||a>k["5"]||q>k["6"])&&h();this.Vb=0;return this.ye(this.pc,b,c,a,q,this.gh)},ye:function(b,c,a,q,k,m){var p=b["8"],d=b["9"];return m&&(q<p||q<b["5"]&&c>=p)&&(k<d||k<b["6"]&&a>=d)?this.ye(b.pm((a>=d?2:0)|c>=p),c,a,q,k,m-1):b.N(c,a,q,k)},intersect:function(b,c,a,q,k){var m=[];this.$b(this.cd,m,b,
c,a,q,k);return m},$b:function(b,c,a,q,k,m,p){var d,g,e=b.s;g=b["7"];var h=b["8"],l=b["5"],v=b["4"],y=b["9"],B=b["6"],C;if(e)if(d=e.length,a>g||k<l||q>v||m<B)for(;d--;)g=e[d],l=g["7"],v=g["4"],B=g["5"],C=g["6"],l>k||B<a||v>m||C<q||(p||l>=a&&B<=k&&v<=m&&C>=q)&&c.push(g);else for(;d--;)c.push(e[d]);k>=h&&(q<=y&&b["1"]&&this.$b(b["1"],c,a,q,k,m,p),m>=y&&b["3"]&&this.$b(b["3"],c,a,q,k,m,p));a<=h&&(q<=y&&b["0"]&&this.$b(b["0"],c,a,q,k,m,p),m>=y&&b["2"]&&this.$b(b["2"],c,a,q,k,m,p))}}),g=c.Quad=function(b,
c,a,q,k,m){if(b)this.la=b,this.c=c,c&1?(a=b["8"],k=b["5"]):(a=b["7"],k=b["8"]),c&2?(q=b["9"],m=b["6"]):(q=b["4"],m=b["9"]);this["7"]=a;this["4"]=q;this["5"]=k;this["6"]=m;this["8"]=(a+k)/2;this["9"]=(q+m)/2},b=c.Entry=function(b,c,a,q,k){this.id=d++;this.la=b;this["7"]=c;this["4"]=a;this["5"]=q;this["6"]=k};ovi.extend(g.prototype,{c:"",la:null,pm:function(b){return this[b]||(this[b]=new g(this,b))},N:function(c,d,a,q){c=new b(this,c,d,a,q);(this.s||(this.s=[])).push(c);return c},S:function(b,c){var a=
this.s,q;if(a){for(q=a.length;q--;)if(a[q]===b){a.splice(q,1);delete b.la;break}a.length||(delete this.s,this.Og(c))}},Og:function(b){if(this.la&&!this.s&&!this[0]&&!this[1]&&!this[2]&&!this[3]){delete this.la[this.c];if(this===b.cd)b.cd=this.la;this.la.Og(b)}}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Strip");
(function(){var e=nokia.maps.util.Strip=function(e,h){var d=(this.names=e||[]).length,c=this.offsets={};for(this.data=h||[];d--;)c[e[d]]=d};ovi.extend(e,{stencil:function(l,h){var d=new e(1,h);d.offsets=l.offsets;d.names=l.names;return d},X_Y:new e(["x","y"]),LAT_LNG:new e(["latitude","longitude"])})})();ovi.provide("nokia.maps.util.Uint32Array");
(function(){var e=typeof Uint32Array!=="undefined",l=ovi.browser.msie?function(e){for(var d=Array(e);e--;)d[e]=0;return d}:e?function(e){return new Uint32Array(e)}:function(e){for(var d=[];d.length<e;)d.push(0);return d};nokia.maps.util.Uint32Array=function(h){var d;if(ovi.type(h)==="array")if(e){d=new Uint32Array(h.length);length=h.length;for(i=0;i<length;i++)d[i]=h[i]}else d=h;else d=e&&typeof h==="object"?new Uint32Array(h):l(arguments.length?+h:0);return d}})();ovi.provide("nokia.maps.geo");
(function(e){function l(c,b,f,d,a,q){var k=0;c<f?k|=1:c>a&&(k|=2);b<d?k|=4:b>q&&(k|=8);return k}var h=0,d=Number.POSITIVE_INFINITY,c;ovi.extend(e.geo,{newProjectionId:function(){return h++},clipLineVsRect:function(c,b,f,d,a,q,k,m,p){p?p.length=0:p=[];for(var e=!1,s,u=l(c,b,a,q,k,m),h=l(f,d,a,q,k,m),e=!1,x,v;;)if(u|h)if(u&h)break;else s=u?u:h,s&8?(x=c+(f-c)*(m-b)/(d-b),v=m):s&4?(x=c+(f-c)*(q-b)/(d-b),v=q):s&2?(v=b+(d-b)*(a-c)/(f-c),x=a):s&1&&(v=b+(d-b)*(k-c)/(f-c),x=k),s==u?(c=x,b=v,u=l(c,b,a,q,k,
m)):(f=x,d=v,h=l(f,d,a,q,k,m));else{e=!0;break}e&&p.push(c,b,f,d);return p},intersectLine:c=function(c,b,f,r){if(!b||b.length<4||!c||c.length<4){if(f)f.length=0;return 0}var r=!r,a=0,q=0,k=0,m=c.length,p,e,s,u,h,l=b[0],v=b[1],y=b[2],B=b[3],C=c[q++],A=c[q++];y<l&&(l^=y,y^=l,l^=y);B<v&&(v^=B,B^=v,v^=B);for(;q<m;){var D=c[q++],E=c[q++],O=(E-A)*(y-l)-(D-C)*(B-v),I=(D-C)*(v-A)-(E-A)*(l-C),L=(E-A)*(y-l)-(D-C)*(B-v),N=I/O,G=L/O,b=l+N*(y-l);p=v+N*(B-v);G=G>=0&&G<=1;r&&(C<D?(e=C,h=D):(e=D,h=C),A<E&&(s=A,u=
E));O===0&&I===0&&L===0?(b=p=d,G=r?(C>=l&&C<=y||D>=l&&D<=y)&&(A>=v&&A<=B||E>=v&&E<=B):!0):G&&r&&(G=N>=0&&N<=1&&b>=e&&b<=h&&p>=s&&p<=u);G?(a++,f&&(f[k++]=b,f[k++]=p)):f&&(f[k++]=f[k++]=NaN);C=D;A=E}if(f)f.length=k;return a},clipPolygonVsRect:function(g,b,f,r,a,q){if(!g||g.length<=4)return q&&((q.length=0)||q)||[];for(var q=q||[],k=q.length=0,m=-1,p,e=g.length,s=0,u,h,l=!1,v,y,B=!1,C=[],A=[],D=!1,E,O;++m<4;){u=g[e-2];h=g[e-1];m===0?(l=h>=f,p=[b,f,r,f]):m===1?(l=u<=r,p=[r,f,r,a]):m===2?(l=h<=a,p=[b,
a,r,a]):m===3&&(l=u>=b,p=[b,f,b,a]);for(;s<e;)v=g[s++],y=g[s++],m===0?B=y>=f:m===1?B=v<=r:m===2?B=y<=a:m===3&&(B=v>=b),B?(l||(C[0]=u,C[1]=h,C[2]=v,C[3]=y,c(p,C,A,!0),u=A[0],h=A[1],u===d&&(m===0?(u=v,h=f):m===1?(u=r,h=y):m===2?(u=v,h=a):m===3&&(u=b,h=y)),s!==2?(q[k++]=u,q[k++]=h):(D=!0,E=u,O=h)),q[k++]=v,q[k++]=y):l&&(C[0]=u,C[1]=h,C[2]=v,C[3]=y,c(p,C,A,!0),u=A[0],h=A[1],u===d&&(m===0?(u=v,h=f):m===1?(u=r,h=y):m===2?(u=v,h=a):m===3&&(u=b,h=y)),q[k++]=u,q[k++]=h),u=v,h=y,l=B;D&&(q[k++]=E,q[k++]=O);
D=!1;g=q;q.length=e=k;k=s=0}return q}})})(nokia.maps);ovi.provide("nokia.maps.geo.Corridor");ovi.provide("nokia.maps.geo.IProjection");ovi.provide("nokia.maps.geo.Proximity");ovi.provide("nokia.maps.kml._packaging.base");ovi.provide("ovi._kernel");ovi.provide("nokia.maps.language._packaging.base");ovi.provide("nokia.maps.Config");
(function(e){function l(b,c){return(typeof c==="string"?c.replace(d,"$1."):"")+b}var h={},d=/([^.])$/,c=e.util.getRootNameSpace("nokia.maps").Settings,g=e.Config=new ovi.Class({initialize:function(){this.Ga={}},Statics:{setDefault:function(b,c,d){if(!d||!h[b])c===void 0||c===null?delete h[b]:h[b]=c},setDefaultNS:function(b,c,d,a){g.setDefault(l(c,b),d,a)},setDefaults:function(b,c){var d,a;for(d in b)if(!c||!h[d])a=b[d],a===void 0||a===null?delete h[d]:h[d]=a},setDefaultsNS:function(b,c,d){var a,q,
k;for(a in c)if(k=l(a,b),!d||!h[k])q=c[a],q===void 0||q===null?delete h[k]:h[k]=q},getDefault:function(b){return h[b]},getDefaultNS:function(b,c){return h[l(c,b)]}},get:function(b){return b in this.Ga?this.Ga[b]:h[b]},getNS:function(b,c){c=l(c,b);return c in this.Ga?this.Ga[c]:h[c]},set:function(b,c){this.Ga[b]=c;return this},setNS:function(b,c,d){this.Ga[l(c,b)]=d;return this},reset:function(b){delete this.Ga[b];return this},resetNS:function(b,c){c=l(c,b);delete this.Ga[c];return this}});c&&(c.secureConnection&&
g.setDefault("secureConnection",c.secureConnection),c.addObserver("secureConnection",function(){g.setDefault("secureConnection",c.secureConnection)}))})(nokia.maps);ovi.provide("nokia.maps.util.RTree");
(function(e){var l=Math,h=l.abs,d=l.min,c=l.max,g=l.sqrt,b=e.RTreeRecord,f=e.d,r=e.RTree=new ovi.Class({initialize:function(a,b,c){(typeof b!="number"||b<2)&&f("The given parameter 'max' is not a number, or less than 2! max is "+b);(typeof c!="number"||c>b/2)&&f("The given parameter 'min' is not a number, or is not at least 2 times smaller than max! min is "+c);this.MaxEntriesPerNode=b;this.MinEntriesPerNode=c;switch(a){case e.RTree.QUADRATIC_PARTITIONING:this.splitNode=this.Co;break;case e.RTree.LINEAR_PARTITIONING:this.splitNode=
this.Ao;break;case e.RTree.LINEAR_MOD_PARTITIONING:this.splitNode=this.Bo;break;case e.RTree.DUMMY_PARTITIONING:this.splitNode=this.zo;break;default:f("The given parameter 'partitioningAlgorithm' is not a valid option!")}this.Root=new e.RTreeNode(!0)},Statics:{QUADRATIC_PARTITIONING:0,LINEAR_PARTITIONING:1,LINEAR_MOD_PARTITIONING:2,DUMMY_PARTITIONING:3,ge:Infinity},MaxEntriesPerNode:null,MinEntriesPerNode:null,Root:null,Rb:1,add:function(a){var b=this.Root,f=1,m=0,p=null,r=null,s=Infinity,u,h;for(a.Volume=
(a.X2-a.X1)*(a.Y2-a.Y1);f<this.Rb;){r=p=null;s=Infinity;m=b.Entries;for(m=m.length;u=b.Entries[--m];)if(h=a.X2==a.X1&&a.Y2==a.Y1?g((u.X1-a.X1)*(u.X1-a.X1)+(u.Y1-a.Y1)*(u.Y1-a.Y1)):(c(u.X2,a.X2)-d(u.X1,a.X1))*(c(u.Y2,a.Y2)-d(u.Y1,a.Y1))-u.Volume,h<s||h==s&&u.BoundingBox<r)p=m,s=h,r=u.Volume;b=b.Entries[p];f++}b.addChild(a,f==1);for(a=b.Entries.length>this.MaxEntriesPerNode?this.splitNode(b):[];b.ParentNode;)f=b.ParentNode,a.length!=2?f.updateBoundingBox(b.X1,b.X2,b.Y1,b.Y2):(f.removeChild(b.ParentEntry),
f.addChild(a[0],!1),f.addChild(a[1],!1),a=f.Entries.length>this.MaxEntriesPerNode?this.splitNode(f):[]),b=b.ParentNode;if(a.length==2)this.Root=new e.RTreeNode(!1),this.Root.addChild(a[0],!0),this.Root.addChild(a[1],!0),this.Rb++},remove:function(a){var c,k=[],m,p=this.MinEntriesPerNode;this.Root||f("Can't remove anything fro already empty tree");(!a||!(a instanceof b)||!a.Leaf||!a.ParentNode)&&f("Invalid node");m=a.ParentNode.Entries;c=m.indexOf(a);if(c!=-1){m.splice(c,1);m.length<p&&(k=m);do a=
a.ParentNode,a.Entries.length<p&&a.ParentNode&&a.ParentNode.removeChild(a.ParentEntry),a.ParentNode&&a.ParentNode.calculateBoundingBox();while(a.ParentNode);for(c=k.length;c--;)this.Mm(k[c]);if(this.Root.Entries.length==1&&!(this.Root.Entries[0]instanceof b))this.Rb--,this.Root=this.Root.Entries[0],this.Root.ParentNode=null;return!0}},removeAll:function(){this.Root=new e.RTreeNode(!0);this.Rb=1},searchByPriority:function(a,b,c,f){var p,d={},r=[[null,null]],g=this.Root,e=0;p=0;var h;a>b&&(p=a,a=b,
b=p);c>f&&(p=c,c=f,f=p);for(;g!=null;){if(g.Leaf)for(p=0;p<g.Entries.length;p++)g.Entries[p].overlaps(a,b,c,f)&&(typeof d[g.Entries[p].Priority]=="undefined"&&(d[g.Entries[p].Priority]=[]),d[g.Entries[p].Priority][d[g.Entries[p].Priority].length++]=g.Entries[p]);else{if(g.Entries.length>e+1)for(p=e+1;p<g.Entries.length;p++)if(g.Entries[p].overlaps(a,b,c,f)){r[r.length++]=[g,p];break}for(p=h=0;p<g.Entries[e].Entries.length;p++)if(g.Entries[e].Entries[p].overlaps(a,b,c,f)){g=g.Entries[e];e=p;h=1;break}if(h)continue}g=
r[r.length-1][0];e=r[r.length-1][1];r.length--}return d},search:function(a,b,c,f,p){var d=[],p=p||this.Root,r,g=0,e,h=[p];a>b&&(t=a,a=b,b=t);c>f&&(t=c,c=f,f=t);if(!p.overlaps(a,b,c,f))return d;for(;g<h.length;){curNode=h[g];r=curNode.Entries;for(e=r.length;p=r[--e];)p.overlaps(a,b,c,f)&&(p.Leaf?d.push(p):h.push(p));g++}return d},Mm:function(a,b){var f=this.Root,m=0,p=1,r,g,u,h;if(a){for(;p<b;){g=r=null;u=Infinity;for(m=0;m<f.Entries.length;m++)if(h=f.Entries[m],h=(c(h.X2,a.X2)-d(h.X1,a.X1))*(c(h.Y2,
a.Y2)-d(h.Y1,a.Y1))-h.Volume,h<u||h==u&&f.Entries[m].BoundingBox<g)r=m,u=h,g=f.Entries[m].Volume;f=f.Entries[r];p++}f.addChild(a);for(m=f.Entries.length>this.MaxEntriesPerNode?this.splitNode(f):[];f.ParentNode!=null;)m.length!=2?f.ParentNode.updateBoundingBox(f.X1,f.X2,f.Y1,f.Y2):(f.ParentNode.removeChild(f.ParentEntry),f.ParentNode.addChild(m[0],!1),f.ParentNode.addChild(m[1],!1),m=f.ParentNode.Entries.length>this.MaxEntriesPerNode?this.splitNode(f.ParentNode):[]),f=f.ParentNode;if(m.length==2)this.Root=
new e.RTreeNode(!1),this.Root.addChild(m[0]),this.Root.addChild(m[1]),this.Rb++}},splitNode:null,Co:function(a){var b=new e.RTreeNode(a.Leaf,a.ParentNode),f=new e.RTreeNode(a.Leaf,a.ParentNode),m=null,p=null,g=-1*r.ge,s=null,u=null,l,x=a.Entries,v=x.length,y=l=0;for(l=0;l<v;l++){s=x[l];for(y=l+1;y<v;y++)u=x[y],u=(c(s.X2,u.X2)-d(s.X1,u.X1))*(c(s.Y2,u.Y2)-d(s.Y1,u.Y1))-s.Volume-u.Volume,u>g&&(m=l,p=y,g=u)}b.addChild(x.splice(m,1)[0]);for(f.addChild(x.splice(p-1,1)[0]);x.length>0;){v=x.length;if(this.MinEntriesPerNode-
b.Entries.length==v){for(;entry=x[--v];)b.addChild(entry);a.Entries=[];break}else if(this.MinEntriesPerNode-f.Entries.length==v){for(;entry=x[--v];)f.addChild(entry);a.Entries=[];break}m=null;p=-1;for(l=0;l<a.Entries.length;l++)g=a.Entries[l],g=h((c(b.X2,g.X2)-d(b.X1,g.X1))*(c(b.Y2,g.Y2)-d(b.Y1,g.Y1))*b.Volume-(c(f.X2,g.X2)-d(f.X1,g.X1))*(c(f.Y2,g.Y2)-d(f.Y1,g.Y1))*f.Volume),g>p&&(m=l,p=g);l=a.Entries[m];b.getEnlargement(l.X1,l.X2,l.Y1,l.Y2)<f.getEnlargement(l.X1,l.X2,l.Y1,l.Y2)?b.addChild(a.Entries.splice(m,
1)[0]):f.addChild(a.Entries.splice(m,1)[0])}return[b,f]},Ao:function(a){for(var b=new e.RTreeNode(a.Leaf,a.ParentNode),f=new e.RTreeNode(a.Leaf,a.ParentNode),m=null,p=null,d=-1*r.ge,g=0,u=0,l=null,x=null,v=a.Entries.length;g<v;g++){l=a.Entries[g];for(u=g+1;u<v;u++)x=a.Entries[u],x=c(c(h(l.X1-x.X1),h(l.X2-x.X2)),c(c(h(l.Y1-x.Y1),h(l.Y2-x.Y2)))),x>d&&(m=g,p=u,d=x)}b.addChild(a.Entries.splice(m,1)[0]);for(f.addChild(a.Entries.splice(p-1,1)[0]);a.Entries.length>0;){if(this.MinEntriesPerNode-b.Entries.length==
a.Entries.length){for(;a.Entries.length>0;)b.addChild(a.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-f.Entries.length==a.Entries.length){for(;a.Entries.length>0;)f.addChild(a.Entries.splice(0,1)[0]);break}m=a.Entries[0];b.getEnlargement(m.X1,m.X2,m.Y1,m.Y2)-f.getEnlargement(m.X1,m.X2,m.Y1,m.Y2)<0?b.addChild(a.Entries.splice(0,1)[0]):f.addChild(a.Entries.splice(0,1)[0])}return[b,f]},Bo:function(a){for(var b=new e.RTreeNode(a.Leaf,a.ParentNode),c=new e.RTreeNode(a.Leaf,a.ParentNode),
f=null,p=null,d=-1*r.ge,s=0,u=0,h=null,l=null,v=a.Entries.length;s<v;s++){h=a.Entries[s];for(u=s+1;u<v;u++)l=a.Entries[u],l=g((h.X1-l.X1)*(h.X1-l.X1)+(h.Y1-l.Y1)*(h.Y1-l.Y1)),l>d&&(f=s,p=u,d=l)}b.addChild(a.Entries.splice(f,1)[0]);for(c.addChild(a.Entries.splice(p-1,1)[0]);a.Entries.length>0;){if(this.MinEntriesPerNode-b.Entries.length==a.Entries.length){for(;a.Entries.length>0;)b.addChild(a.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-c.Entries.length==a.Entries.length){for(;a.Entries.length>
0;)c.addChild(a.Entries.splice(0,1)[0]);break}f=a.Entries[0];b.getEnlargement(f.X1,f.X2,f.Y1,f.Y2)-c.getEnlargement(f.X1,f.X2,f.Y1,f.Y2)<0?b.addChild(a.Entries.splice(0,1)[0]):c.addChild(a.Entries.splice(0,1)[0])}return[b,c]},zo:function(a){for(var b=new e.RTreeNode(a.Leaf,a.ParentNode),c=new e.RTreeNode(a.Leaf,a.ParentNode),f=a.Entries.length/2,p=0,p=0;p<=f;p++)b.addChild(a.Entries.splice(0,1)[0],!0);for(;a.Entries.length>0;)c.addChild(a.Entries.splice(0,1)[0],!0);return[b,c]}})})(nokia.maps.util);
ovi.provide("ovi.ConsoleLogger");
(function(){try{typeof window.loadFirebugConsole==="function"&&window.loadFirebugConsole()}catch(e){}var l=null;ovi.ConsoleLogger=function(){if(l!==null)return l;if(window&&window.console&&/function/.test(window.console.log+""))for(var e=function(b){b=/function/.test(window.console[b]+"")?b:"log";return typeof window.console[b]==="function"?function(){window.console[b].apply(window.console,arguments)}:function(c,d,a,q,k,m,p,g,s,e,h){window.console[b](c||"",d||"",a||"",q||"",k||"",m||"",p||"",g||"",
s||"",e||"",h?"...":"")}},d=["info","debug","warn","error"],c=0,g;g=d[c];c++)this[g]=e(g);else this.debug=this.info=this.warn=this.error=function(){};return l=this};ovi.Logger&&window&&window.console&&/function/.test(window.console.log+"")&&ovi.Logger.addLogger(new ovi.ConsoleLogger)})(ovi);ovi.provide("nokia.maps.util.Pen");
(function(e){var l=nokia.maps.gfx.Color.parseCss;e.Pen=new ovi.Class({strokeColor:"#05A",lineWidth:1,lineCap:"round",lineJoin:"miter",miterLimit:10,stroke:"solid",initialize:function(h,d){var c,g,b=e.d;if(h){if("lineWidth"in h)!e.isNumber(h.lineWidth)&&b("width must be in range [0..100]"),h.lineWidth=e.Pa(h.lineWidth,0,100);"stroke"in h&&h.stroke!=="solid"&&b("cannot set anything else than stroke=solid");"strokeColor"in h&&(g=l(h.strokeColor),g===null&&b("Invalid color set!"));if("lineJoin"in h)g=
h.lineJoin,g!=="miter"&&g!=="round"&&g!=="bevel"&&b("Invalid lineJoin set!");if("lineCap"in h)g=h.lineCap,g!=="butt"&&g!=="round"&&g!=="square"&&b("Invalid lineCap set!");"miterLimit"in h&&!e.isNumber(h.miterLimit)&&b("miterLimit must be a number")}if(d instanceof nokia.maps.util.Pen)for(c in d)this[c]=d[c];for(c in h)this[c]=h[c]},fa:function(){return this.c||(this.c=e.$g(this))}})})(nokia.maps.util);ovi.provide("ovi.dom");ovi.provide("nokia.maps.search._packaging.base");ovi.provide("nokia.maps.net.Request");
(function(e){if(!e.util.getConstructor(e.net.Request))var l=e.net,h=e.util,d=h.d,c=h.u,g=h.isArray,b=h.isObject,f=h.isString,r=0,a=function(){return window.ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:window.XMLHttpRequest}(),q="withCredentials"in new a?a:typeof XDomainRequest!="undefined"?XDomainRequest:null,k=function(a){a.parentNode&&a.parentNode.removeChild(a)},m=l.Request=new ovi.Class({Extends:e.util.OObject,initialize:function(a,b){var c=this;c.G={};c.Yi={};c.De=
++r;m.managerCounter++;c.B=a===m.JSONP||a===m.XHR?a:m.JSONP;c.Qi=3E4;c.ke=!1;c.le="jsoncallback";c.va=!1;c.c=null;b&&b.timeout&&(c.Qi=b.timeout);b&&b.callbackKey&&(c.le=b.callbackKey);b&&b.standardJSONP&&(c.va=b.standardJSONP);b&&b.autoSkip&&(c.ke=b.autoSkip);a==m.XHR&&b&&b.xDomain&&(c.dp=b.xDomain);c.B==m.JSONP&&c.va==!1&&(l.Request.callbacks[c.De]=function(a,b){c.Kg(a,b)});if(c.B==m.XHR&&(c.Ac={},c.$i=b||{},window.execScript&&window.ActiveXObject)){var f="BinaryToArray"+(new Date).getTime();window.execScript("Function "+
f+"(Binary)\nDim i\nReDim byteArray(LenB(Binary))\nFor i = 1 To LenB(Binary)\n  byteArray(i-1) = ChrW(AscB(MidB(Binary, i, 1)))\nNext\n"+f+" = byteArray\nEnd Function\n","vbscript")}},Statics:{JSONP:1,XHR:2,requestCounter:1,managerCounter:0,callbacks:{},requestParams:{},timeoutCallbacks:{},canceledRequests:{}},destroy:function(){this.cancelAll();this.va==!1&&(l.Request.callbacks[that.De]=c)},send:function(a,b,c){this.c=++r;m.requestCounter++;this.G[this.c]=c!=void 0?c:this.c;this.Yi[this.G[this.c]]=
this.c;this.B==m.JSONP?this.io(a,b,this.c):this.ko(a,b,this.c);return c!=void 0?c:this.c},cancel:function(a){a=a==void 0?this.c:this.Yi[a];m.canceledRequests[a]=!0;this.B==m.JSONP?this.Vi(a):this.af(a);this.wb(a)},cancelAll:function(){for(var a in this.G)this.cancel(this.G[a])},tl:function(a){var b=this;l.Request.callbacks[a]=function(){b.Kg(a,arguments)}},io:function(a,b,c){var f=document.createElement("script"),k=document.getElementsByTagName("head")[0];this.va&&this.tl(c);m.requestParams[c]=[a,
b];this.to(f,a,b,c);k.insertBefore(f,k.firstChild);this.Ji(a,b,c)},ko:function(a,b,c){var f=this.$i.method||"GET",k,d=this.$i;d.uri=a;this.ul(a,b,c);this.Ji(a,b,c);try{if(this.Ac[c]=k=this.$l(c,d),k.open(f,this.Zo(f,d,this.Cd),!d.sync,d.username,d.password),this.jo(k,f,d,this.Cd),d.sync&&ovi.browser.mozilla&&parseFloat(ovi.browser.version)<2)this.onreadystatechange()}catch(q){if(c in this.G)this.Cd.error=!0,delete this.G[c],m.callbacks[c](this.Cd)}},Kg:function(a,b){if(!m.canceledRequests[a]){var c=
m.requestParams[a],f=c[1];this.wb(a);if(!this.ke||a==this.c)f({response:b.length<=1?b[0]:b,status:200,id:this.G[a],url:c[0],error:!1,timeout:!1});delete this.G[a];delete m.requestParams[a];this.va&&delete l.Request.callbacks[a]}},ul:function(a,b,c){var f=this;l.Request.callbacks[c]=function(a){f.wb(c);(!f.ke||c==f.c)&&b(a);f.af(c)}},af:function(a){this.Ac[a]&&(this.Ac[a].abort(),this.Ac[a]=null,delete this.Ac[a],delete l.Request.callbacks[a])},to:function(a,b,c,f){var d=this,q=b.indexOf("?")<0?"?":
"&";b+=d.va?q+d.le+"=nokia.maps.net.Request.callbacks["+f+"]":q+d.le+encodeURI("=(function(){nokia.maps.net.Request.callbacks["+d.De+"]("+f+",arguments);})");a.setAttribute("src",b);a.setAttribute("charset","UTF-8");a.setAttribute("defer","defer");a.id=f;a.onload=a.onreadystatechange=function(){if(!this.readyState||this.readyState==="complete"||this.readyState==="loaded")d.wb(f),delete m.requestParams[f],d.va&&delete l.Request.callbacks[f],k(this)};a.onerror=function(){m.canceledRequests[f]||(d.wb(f),
m.requestParams[f]&&(c=m.requestParams[f][1],c({id:d.G[f],url:m.requestParams[f][0],error:!0,timeout:!1})),delete d.G[f],delete m.requestParams[f],d.va&&delete l.Request.callbacks[f],k(this))}},Ji:function(a,b,c){m.timeoutCallbacks[c]=setTimeout(this.Zl(a,b,c),this.Qi)},Zl:function(a,b,c){var f=this;return function(){m.canceledRequests[c]=!0;f.B==m.JSONP?(b=m.requestParams[c][1],a=m.requestParams[c][0],f.Vi(c)):f.af(c);b({status:408,id:f.G[c],url:a,error:!1,timeout:!0});delete f.G[c];f.wb(c)}},Vi:function(a){var b=
document.getElementById(a);if(b)b.onload=b.onreadystatechange=c,b.onerror=c,b.src="",k(b);delete m.requestParams[a];this.va&&(l.Request.callbacks[a]=c)},wb:function(a){clearTimeout(m.timeoutCallbacks[a]);delete m.timeoutCallbacks[a]},jo:function(a,b,c){var f="text/plain",k="",m;if(b!=="GET"&&b!=="DELETE")c.json?(f="application/json",k=ovi.json.stringify(c.json)):c.xml?(f="text/xml",XMLSerializer?k=(new XMLSerializer).serializeToString(c.xml):c.xml.xml?k=c.xml.xml:d("error")):c.content&&b!=="GET"?
(f="application/x-www-form-urlencoded",k=this.ei(c.content)):k=c.body||"";f=c.mimeType||f;c.charset&&(f+="; charset="+c.charset);f={"content-type":f};b=c.headers||{};for(m in b)b.hasOwnProperty(m)&&(f[m.toString().toLowerCase()]=b[m]);if(c.preventCache==="headers"||c.preventCache==="both")f.pragma=f["cache-control"]="no-cache";for(m in f)f.hasOwnProperty(m)&&(m!=="content-type"||c.handleAs==="arraybuffer")&&a.setRequestHeader(m,f[m]);c.handleAs==="binary"&&a.overrideMimeType&&(a.overrideMimeType(f["content-type"]=
"text/text; charset=x-user-defined"),k="",delete f["content-length"]);if(c.handleAs==="arraybuffer")a.responseType="arraybuffer";a.send(k)},Zo:function(a,b,c){a=b.uri;b.preventCache&&b.preventCache!=="headers"&&(a+=(a.indexOf("?")===-1?"?":"&")+"preventCache="+(new Date).getTime());(b=b.uriParameters)&&(a+=(a.indexOf("?")===-1?"?":"&")+this.ei(b));return c.url=a},ei:function(a,c){var f=[],k,m;if(b(a)){for(k in a)m=c?c+"."+k:k,f.push(this.params(a[k],m));return f.join("&")}else if(g(a)){for(k=0;k<
a.length;k++)a[k]=this.params(a[k],c);return a.join("&")}else if(!a)return"";return c?this.Fi(c)+"="+this.Fi(a):""+a},Fi:function(a){return encodeURIComponent(a).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},co:function(a,b){function c(a){this.message=a;this.name="ParserError"}var f=b.handleAs||"text";f==="autodetect"&&(f=a.getResponseHeader("content-type")||"",f=f.match(/[+\/]json/)?"json":f.match(/[+\/]xml/)?"xml":"text");switch(f){case "json":f=
ovi.json.parse(a.responseText);break;case "xml":if(a.responseXML)if((f=a.responseXML.getElementsByTagName("parsererror"))&&f.length>0)throw new c(f.item(0).textContent);else f=a.responseXML;else f=h.Uf(a.responseText);break;case "arraybuffer":f=a.response;break;default:f=a.responseText}return f},$l:function(b,c){var k=this,d,r,g={status:417};k.Cd=g;c=f(c)?{uri:c}:c;d=c.window||window;try{r=c.xhr||k.dp?new q:new a,k.onreadystatechange=r.onreadystatechange=function(){g.id=k.G[b];g.timeout=!1;g.error=
!1;if(!m.canceledRequests[b]&&r.readyState===4)if(ovi.browser.msie&&(r.status===2||r.status===3))g.status=401;else{g.status=r.status>=300&&r.status!==1223||r.status===0&&!(r.responseType==="arraybuffer"||r.responseType==="blob"?r.response:r.responseText)&&("file:"===d.location.protocol||"widget:"===d.location.protocol)?r.status||404:r.status||200;try{g.response=k.co(r,c)}catch(a){if(b in k.G)g.error=!0,delete k.G[b],m.callbacks[b](g)}ovi.browser.msie&&(r=null);if(!(g.status>=200&&g.status<300&&!g.error))g.error=
!0;delete k.G[b];m.callbacks[b](g)}},d.location.protocol==="file:"&&d.netscape&&d.netscape.security&&d.netscape.security.PrivilegeManager&&d.netscape.security.PrivilegeManager.enablePrivilege&&d.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}catch(e){if(b in k.G)g.error=!0,delete k.G[b],m.callbacks[b](g)}return r}})})(nokia.maps);ovi.provide("nokia.maps.dom.EventTarget");
(function(e){if(!nokia.maps.util.getConstructor(nokia.maps.dom.EventTarget)){var l=!l,h=!l,d=l,c=e.EventTarget=function(b){var b=b||this,c;if(!b.isEventTarget){for(c in g)c in b||(b[c]=g[c]);b.isDraggable?b.enableDrag():b.disableDrag();if(ovi.type(b)==="element"&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled))b.style.touchAction="none",b.style.msTouchAction="none"}return b},g={isEventTarget:l,isDraggable:h,enableUserSelect:function(){var b=this.style;if(ovi.type(this)==="element")b.KhtmlUserSelect=
"auto",b.MozUserSelect="auto",b.OUserSelect="auto",b.WebkitUserSelect="auto",b.WebkitTouchCallout="auto",b.msUserSelect="none";return this},disableUserSelect:function(){var b=this.style;if(ovi.type(this)==="element")b.KhtmlUserSelect="none",b.MozUserSelect="none",b.OUserSelect="none",b.WebkitUserSelect="none",b.WebkitTouchCallout="none",b.msUserSelect="none";return this},enableDrag:function(){var b=this.style;this.disableUserSelect();if(ovi.type(this)==="element")b.WebkitUserDrag="element",b.KhtmlUserDrag=
"element";this.isDraggable=l;return this},disableDrag:function(){var b=this.style;if(this.isDraggable&&ovi.type(this)==="element")b.KhtmlUserDrag="auto",b.WebkitUserDrag="auto";this.isDraggable=h;return this},insertListener:function(b,c,d){return this.addListenerNS(null,b,c,d,l)},addListener:function(b,c,d){return this.addListenerNS(null,b,c,d)},addListeners:function(b){for(var c in b)b.hasOwnProperty(c)&&this.addListenerNS(null,c,b[c][0],b[c][1])},insertListenerNS:function(b,c,d,a){return this.addListenerNS(b,
c,d,a,l)},addListenerNS:function(b,c,d,a,q){var k=this.eventListener||(this.eventListener={}),k=k[c]||(k[c]=[]),a=a||!1,m,p;if(c==="beforeunload")(p=e.Page.Fg)[p.length]=d;else if(c==="resize")if((p=e.Page.cf)[p.length]=m={node:this},(c=ovi.type(this))==="window")m.layoutWidth=(c=e.Page(this)).layoutWidth,m.layoutHeight=c.layoutHeight;else if(c==="element")m.offsetWidth=this.offsetWidth,m.offsetHeight=this.offsetHeight;q?k.unshift(d,a,b):k.push(d,a,b);return this},removeListener:function(b,c,d){return this.removeListenerNS(null,
b,c,d)},removeListenerNS:function(b,c,d,a){var q=this.eventListener,k,m,p,a=a||!1;if(c==="beforeunload"){p=(k=e.Page.Fg).length;for(m=-1;++m<p;)if(k[m]===d){k.splice(m,1);break}}else if(c==="resize"){p=(k=e.Page.cf).length;for(m=-1;++m<p;)if(k[m].node===this){k.splice(m,1);break}}if(q&&q[c]){k=q[c];p=k.length;for(m=0;m<p;m+=3)if(k[m]===d&&k[m+1]===a&&k[m+2]===b){k.splice(m,3);m<=k.Ia&&(k.Ia-=3);k.ld-=3;break}k.length===0&&delete q[c]}return this},removeAllListeners:function(){var b,c,d;if(b=this.eventListener)for(c in b)for(;b[c]&&
b[c].length>0;)d=b[c],this.removeListenerNS(d[2],c,d[0],d[1])},dispatch:function(b){return c.dispatchEvent(this,b)},hitTest:function(b,c){var d;if(this.parentNode&&this.ownerDocument&&(d=e.Page(this.ownerDocument).getClientRect(this))&&b>=d.left&&b<=d.right&&c>=d.top&&c<=d.bottom)return l;return h}};ovi.extend(c.prototype,g);c.getDispatchPath=function(b,c,d){for(var a,q=[],k=d&&d.B==="display";b;)c?(a=b.eventListener)&&(a=a[c])&&a.length&&q.push(b):q.push(b),b=k&&b.B&&b.getParent?b.t:c&&b.parentNodes&&
d&&b.parentNodes[d]?b.parentNodes[d]:b.parentNode;return q};c.catchException=function(b){d=b===l};c.dispatchEvent=function(b,f,g){var f=f instanceof e.Event?f:e.Page.parseEvent(f),a=f.type,q=f.namespaceURI,g=g||c.getDispatchPath(b,a,f.display||q),k=g.length,m,p,h,s;if(!a||k===0)return l;f.target=f.target||b;f.eventPhase=1;for(b=f.canSicker?k-1:0;b>=0;b--)if(b===0&&f.eventPhase++,p=g[b],f.currentTarget=p,(s=p.eventListener&&p.eventListener[a])&&(h=s.length)){s.ld=h;for(m=0;m<h;m+=3)if((s[m+1]||b===
0)&&!(s[m+2]!==null&&s[m+2]!==q)){try{s.Ia=m,s[m].call(p,f)}catch(u){if(d)ovi.warn("Exception in event listener #"+m/3+", capturing phase for event "+a),ovi.error(String(u)==="[object Error]"?u.message:u);else throw u;}finally{m=s.Ia,h=s.ld}if(f.propagation===2)return!f.defaultPrevented}if(f.propagation===1)return!f.defaultPrevented}f.eventPhase++;if(f.canBubble)for(b=1;b<k;b++)if(p=g[b],f.currentTarget=p,(s=p.eventListener&&p.eventListener[a])&&(h=s.length)){s.ld=h;for(m=0;m<h;m+=3)if(!s[m+1]&&!(s[m+
2]!==null&&s[m+2]!==q)){try{s.Ia=m,s[m].call(p,f)}catch(w){if(d)ovi.warn("Exception in event listener #"+m/3+", bubbling phase for event "+a),ovi.error(String(w)==="[object Error]"?w.message:w);else throw w;}finally{m=s.Ia,h=s.ld}if(f.propagation===2)return!f.defaultPrevented}if(f.propagation===1)break}return!f.defaultPrevented}}})(nokia.maps.dom);ovi.provide("nokia.maps.dom.DataTransfer");
(function(){if(!nokia.maps.util.getConstructor(nokia.maps.dom.DataTransfer)){var e=!e,l={text:"text/plain",url:"text/uri-list"},h={string:e,number:e,"boolean":e},d={uninitialized:{copy:e,move:e,link:e},none:{},copy:{copy:e},copyLink:{copy:e,link:e},copyMove:{copy:e,move:e},all:{copy:e,move:e,link:e},link:{link:e},linkMove:{move:e,link:e},move:{move:e}},c=ovi.Array.indexOf,g=nokia.maps.util.d,b=nokia.maps.dom.DataTransfer=function(b){var c=-1,a,d;this.types=[];this.data={};this.ndt=b||null;if(b&&(d=
b.types)&&(a=b.types.length))for(;++c<a;)this.types=d[c];this.files=b&&b.files||[]};ovi.extend(b.prototype,{lift:e,realTime:!e,cursor:"pointer",dropEffect:"none",effectAllowed:"uninitialized",clearData:function(b){var d=this.ndt,a,q=ovi.type(b),k=this.types;if(b===void 0)return d&&d.clearData(),this.types={},this.data={},this;h[q]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||b;d&&d.clearData(b);delete this.data[b];(a=c(k,b))>=0&&k.splice(a,1);return this},setData:function(b,d){var a=
this.ndt,q=ovi.type(b),k=ovi.type(d),m=this.types;h[q]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||b;a&&(k==="string"?a.setData(b,d):a.clearData(b));this.data[b]=d;c(m,b)<0&&(m[m.length]=b);return this},getData:function(b){var c,a=this.ndt,d=ovi.type(b);h[d]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||b;if(a&&(c=a.getData(b)))return c;return this.data[b]},hasData:function(b){var c=this.ndt,a=ovi.type(b);h[a]||g("Invalid format supplied!");b=l[b=(""+b).toLowerCase()]||
b;if(c&&c.getData(b))return e;return b in this.data},setDragImage:function(){},addElement:function(){},allows:function(b){return d[this.effectAllowed][b]}})}})(nokia.maps);ovi.provide("nokia.maps.geo.mercator");
(function(e){var l=e.util,h=l.Point,d=l.Strip,c=l.Uint32Array,g=l.Nf,b=e.geo.Coordinate,l=Math,f=l.min,r=l.max,a=l.log,q=l.tan,k=l.atan,m=l.exp,p=l.floor,z=l.pow,s=l.PI,u=s/4,w=s/2,x=180/s,v=function(){for(var a=31,b={};a--;)b[z(2,a)]=a;return b}();e.geo.mercator={id:0,pointToGeo:function(a){var c=a.x,a=a.y;return new b(a<=0?90:a>=1?-90:x*(2*k(m(s*(1-2*a)))-w),(c===1?1:g(c,1))*360-180,void 0,1)},xyToGeo:function(a,c){return new b(c<=0?90:c>=1?-90:x*(2*k(m(s*(1-2*c)))-w),(a===1?1:g(a,1))*360-180,void 0,
1)},mapXYToGeo:function(a,c){return new b(c<=0?90:c>=1073741823?-90:x*(2*k(m(s*(1-2*c/1073741823)))-w),(a===1073741823?1:g(a/1073741823,1))*360-180)},mapPointsToGeo:function(a,b){for(var b=b||d.stencil(d.LAT_LNG),c=b.data,f=a.length,p=0,q=0,r=b.names.length,e=b.offsets.latitude,h=b.offsets.longitude,u,l;p<f;)c[q+h]=((u=a[p++])===1073741823?1:g(u/1073741823,1))*360-180,c[q+e]=(l=a[p++])<=0?90:l>=1073741823?-90:x*(2*k(m(s*(1-2*l/1073741823)))-w),q+=r;return b},geoToPoint:function(b){return new h(b.longitude/
360+0.5,f(1,r(0,0.5-a(q(u+w*b.latitude/180))/s/2)))},latLngToPoint:function(b,c){return new h(c/360+0.5,f(1,r(0,0.5-a(q(u+w*b/180))/s/2)))},latLngToMapPoint:function(b,c){return new h(p((c/360+0.5)*1073741823),p(f(1,r(0,0.5-a(q(u+w*b/180))/s/2))*1073741823))},geoToMapPoints:function(b,k){var m=b.data,d=m.length,g=0,e=0,h=b.names.length,l=b.offsets.latitude,z=b.offsets.longitude;for(k||(k=new c(d/h*2));e<d;)k[g++]=p((m[e+z]/360+0.5)*1073741823),k[g++]=p(f(1,r(0,0.5-a(q(u+w*m[e+l]/180))/s/2))*1073741823),
e+=h;return k},scaleMapXY:function(a,b,c,f){var k=30-v[c];return f?new h(a>>k,b>>k):(f=(c-=1)>>1,new h((a>>k)+((a&c)>f),(b>>k)+((b&c)>f)))},scaleMapPoints:function(a,b,f,k,m){var d=a.length,p=0,q=0,g=0,r=30-v[b],e,s,h,u;f||(f=new c(d));m=!!m;if(k)if(m)for(;p<d;)f[p]=a[p++]>>r;else{for(;q<d;)if(p=a[q++]>>r,s=a[q++]>>r,h!==p||u!==s)f[g++]=h=p,f[g++]=u=s;f.length=g}else{for(k=(b-=1)>>1;q<d;)if(p=((e=a[q++])>>r)+((e&b)>k),s=((e=a[q++])>>r)+((e&b)>k),m||h!==p||u!==s)f[g++]=h=p,f[g++]=u=s;if(!m)f.length=
g}return f}}})(nokia.maps);ovi.provide("nokia.maps.util.Coroutine");
(function(){function e(){var b=m(),c=b;F=0;h();if(Z)for(var f=m(),b=f+H.AF_MAX_EXEC_TIME;E.length&&f<b;)f=E.shift().data,f=f.run(),h();else{f=m();for(b=f+H.MAX_EXEC_TIME;D.length&&f<b;)M?(f=O.shift(),f||(f=O,O=I,I=f,$++,f=O.shift()),f=f.data):f=D.shift().data,f=f.run(),h(),M=!M}d(b=m());V&&a.clearTimeout(V);V=a.setTimeout(l,F+75);G+=b-c}function l(){V&&a.clearTimeout(V);V=setTimeout(l,500);m()>F&&e()}function h(){var a,b,c;for(a=a||m();(b=A.k)&&b&&(c=b.data).yc<=a;)H.resume(c)}function d(a){var b;
E.length&&ba();D.length?J(0):(b=A.k)?(a=b.data.yc-(a||m()),J(a<0?0:a)):J()}function c(a,b){return b.nice(!0)-a.nice(!0)}function g(a,b){return a.yc-b.yc}function b(a,b){s.call(this);r.prototype=B&&B.scope||y&&y.scope||{};var c=-1,f,k=a&&a.El,m=new r(b);if(a&&a.defaults)for(f in a.defaults)this[f]=a.defaults[f];this.id="ctx#"+x++;this.parent=B||y||null;this.name=(this.coroutine=a)&&a.Je;this.R={length:0};this.O={length:0};if(b&&b.length)for(;++c<b.length&&c<k.length;)m[k[c]]=b[c];this.scope=m;this.xd=
new z(this);this.Dd=new z(this);this.Gd=new z(this)}function f(a,b){var c=this,f=c.context;do if(c.has(a))return c[a]=b,this;while((f=f.parent)&&(c=f.scope));y.scope[a]=b;return this}function r(a){this.arguments=a;this.has=this.hasOwn=this.hasOwnProperty;this.set=f}var a=window,q=nokia.maps.util,k={0:{status:"terminated"},1:{status:"running"},2:{status:"blocking"}},m=q.now,p=q.LinkedList,z=p.Element,s=q.OObject,u=Array.prototype.slice,w=ovi.type,x=1,v=!0;b.prototype=new s({status:2,ba:0,cc:0,fo:0,
Eh:-1,Wl:0,priority:50,prioritySetter:function(a){if(w(a)!=="number")return this.priority;a<0&&(a=0);a>100&&(a=100);return a},useAnimationFrame:!1,od:0,nice:function(a){if(a&&this.cc<this.timeStamp){this.ba-=(this.timeStamp-this.cc)/H.SLICE_SIZE/C.length;if(this.ba<0)this.ba=0;if(this.ba>300)this.ba=300;this.od=this.priority-this.ba;this.cc=this.timeStamp;this.realtime&&(this.od+=1E3)}return this.od},realtime:!1,precede:function(a){a instanceof b&&(this.R[a.id]=a,this.R.length++,a.O[this.id]=this,
a.O.length++,a.R[this.id]&&(delete a.R[this.id],a.R.length--,delete this.O[a.id],this.O.length--));return this},postpone:function(a){a instanceof b&&(this.O[a.id]=a,this.O.length++,a.R[this.id]=this,a.R.length++,a.O[this.id]&&(delete a.O[this.id],a.O.length--,delete this.R[a.id],this.R.length--));return this},clearPrecedence:function(){if(!this.R.length)return null;for(var a=[],b=this.R,c;void 0 in b;)c=b[void 0],delete c.O[this.id],c.O.length--,a.push(c);this.R={length:0};return a},clearPostponement:function(){if(!this.O.length)return null;
for(var a=[],b=this.O,c;void 0 in precedeList;)c=b[void 0],delete c.R[this.id],c.R.length--,a.push(c);this.O={length:0};return a},run:function(b,c){if(!c&&!this.useAnimationFrame&&this.O.length)return m();if(!c&&this.useAnimationFrame&&!Z)return m();var f=this.Gd,d=this.xd,p=this.Dd,q=this.coroutine,g=B,r=this.scope,e,s,h,u=h=m();this.nice(!0);f.list&&f.list.remove(f);d.list&&d.list.remove(d);p.list&&p.list.remove(p);B=this;this.fo++;this.ep=b?1.0E20:h+(Z?H.AF_SLICE_SIZE:H.SLICE_SIZE);this.Eh=$;this.set("status",
1);this.timeStamp=this.callTime=h;this.se=!0;if(v)try{s=q.Xb.call(r.that,r,this)}catch(l){e=l}else s=q.Xb.call(r.that,r,this);B=g;h=m();this.ba+=(f=h-u)/H.SLICE_SIZE;if(this.ba<0)this.ba=0;if(this.ba>300)this.ba=300;this.od=this.priority-this.ba;this.Wl+=f;this.cc=h;L+=f;G-=f;this.clearPrecedence();if(e&&this.onError)try{e=this.onError(r,this,e)}catch(z){}if(e||this.se){this.se=!1;this.set("returnValue",s);H.kill(this);if(this.onTerminated)this.onTerminated(r,this);e&&(ovi.warn("Coroutine '"+q.Je+
"' aborted abnormally with exception"),ovi.info((e.name?e.name+": ":"")+e.message))}else if(k[this.status]!==s&&!this.Fm&&a.console&&a.console.warn)this.Fm=!0,console.warn("The coroutine with the name '"+this.coroutine.Je+"' returned in a blocked state, but didn't return the Coroutine.BLOCK object.\nThe reason may be a bug that the developer of the coroutine forgot a return, which can lead to errors!");return h}});var y=new b,B=null,C={length:0},A=new p,D=new p,E=new p,O=new p,I=new p,L=0,N=m(),G=
0,M=!0,$=0,F=0,Z=!1,ba=function(){function b(){c=!1;Z=!0;if(v)try{e()}catch(f){a&&a.console&&a.console.log&&a.console.log(f)}else e();Z=!1}var c=!1;return function(){c||(c=!0,q.requestAnimationFrame(b))}}(),J=function(){function b(){u=null;e()}function c(b){b.source!==a&&b.data==="nm.util.Coroutine#postMessageHack"&&e();if(b.source===a&&b.data==="nm.util.Coroutine#postMessageHack")return b.stopImmediatePropagation?b.stopImmediatePropagation():b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,
!g&&q?(g=q=!1,e()):g=q=!1,!1}function f(){k=null;e()}var k=null,d=a.setImmediate||a.webkitSetImmediate||a.mozSetImmediate||a.oSetImmediate||a.msSetImmediate||function(a){return setTimeout(a,0)},p=a.clearImmediate||a.webkitClearImmediate||a.mozClearImmediate||a.oClearImmediate||a.msClearImmediate||function(a){return clearTimeout(a)},q=!1,g=!1,r,s=function(){var b=navigator,c=b.userAgent.toLowerCase(),f=!1;if(r=b.appName==="Microsoft Internet Explorer")+((((c.match(/(?:version|chrome|firefox|msie)[\/ ]([\d.]+)/)||
[])[1]||"").match(/([\d]+(?:[.][\d]+){0,1})/)||[])[1]||0)>=9&&+a.document.documentMode>=9&&(f=!0);return f}(),h=r&&!s?!1:a.postMessage&&(a.addEventListener||a.attachEvent),u=null;h&&(a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c));return function(c,r){var r=r||m(),c=+c,e=r+c;if(e!==e||e<F||!F)u&&(a.clearTimeout(u),u=null),k&&(p(k),k=null),g=!0,F=0;if(e===e&&!F)if(F=e,c<16)if(h){if(!q||g)q=!0,g=!1,a.postMessage("nm.util.Coroutine#postMessageHack","*")}else k||(k=
d(f));else u||(u=a.setTimeout(b,c))}}(),V,H=nokia.maps.util.Coroutine={TERMINATED:0,RUNNING:1,BLOCKING:2,YIELDED:k[1],BLOCKED:k[2],KILLED:k[0],create:function(a,c){function f(){var a=arguments,c,k=new b(f,c=u.call(a,0));C[k.id]=k;C.length++;k.scope.that=this;k.scope.context=k;c.callee=a.callee;c.caller=a.callee.caller;k.cc=k.createTime=k.timeStamp=k.callTime=m();H.resume(k);return k}f.El=u.call(arguments,2);f.Je=a;f.Xb=c;return f},createEx:function(a,b,c){var f=u.call(arguments,0),f=f.splice(2,1)&&
this.create.apply(this,f);c&&(f.defaults=c);return f},forName:function(a){var b,c,f=[];for(b in C)if((c=C[b]).name&&c.name.match(a))f[f.length]=c;return f},all:function(){var a,b=[];for(a in C)b.push(C[a]);return b},forId:function(a){return C[a]},wait:function(a,b,c){var f=a.$blocking||(a.$blocking={});if(c=c||B)return f[c.id]=c,c.Pc=a,H.suspend(c,b)},signal:function(a){var b;if(a=a&&a.$blocking)for(b in a)return H.resume(b=a[b]),b},broadcast:function(a){var b,c=a&&a.$blocking;if(c){for(b in c)H.resume(c[b]);
delete a.$blocking}},shallYield:function(){var a=B;return a&&(a.timeStamp=m())&&a.timeStamp>=a.ep},yield:function(a){if(a=a||B)return H.suspend(a,0)},sleep:function(a,b){if(b=b||B)return b.Pc=null,H.suspend(b,a)},kill:function(a){arguments.length===1?a instanceof b||(a=B):a=a||B;if(a){if(a.status===0)return H.KILLED;var c=a.xd,f=a.Gd,k=a.Dd;c.list&&c.list.remove(c);f.list&&f.list.remove(f);k.list&&k.list.remove(k);delete C[a.id];C.length--;H.broadcast(a);a.set("status",0);return H.KILLED}},suspend:function(a,
b){if((a=a||B)&&a.status!==0){if(b===null)b=Number.NaN;b=+b;a.se=!1;var f=a.xd,k=a.Gd,d=a.Dd;f.list&&f.list.remove(f);k.list&&k.list.remove(k);d.list&&d.list.remove(d);a.set("timeStamp",m());if(b<=0)return a.set("status",1),a.useAnimationFrame?(a.nice(!0),E.addSorted(c,null,f)):(I.push(d),a.nice(!0),D.addSorted(c,null,f)),H.YIELDED;if(b>0)a.yc=a.timeStamp+b,A.addSorted(g,null,k);a.set("status",2);return H.BLOCKED}},resume:function(a){if(a&&a.status===2){var b=a.xd,f=a.Gd,k=a.Dd,p=m();if(a.Pc)delete a.Pc.$blocking[a.id],
a.Pc=a.yc=null;f.list&&A.remove(f);a.set("timeStamp",p);a.nice(!0);a.useAnimationFrame?E.addSorted(c,null,b):(D.addSorted(c,null,b),a.realtime?O.unshift(k):a.Eh<$?O.push(k):I.push(k));a.set("status",1);d(p)}},MAX_EXEC_TIME:30,AF_MAX_EXEC_TIME:10,SLICE_SIZE:10,AF_SLICE_SIZE:10,count:function(){return C.length},taskCpuTime:function(){return L},schedulerCpuTime:function(){return G},totalCpuTime:function(){return m()-N},current:function(){return B},scheduler:function(){e()},schedulerNextRuntime:function(){return F},
killAll:function(){for(var a in C)H.kill(C[a],"killAll called!")},scope:function(a){eval("fn = "+a.toString());return a},catchException:function(a){v=!!a}};H.ExecutionContext=b;H.Scope=r;y.scope.global=y.scope;e()})();ovi.provide("nokia.maps.ui._packaging.base");ovi.provide("nokia.maps.net._packaging.base");ovi.provide("nokia.maps.dom.Page");
(function(e){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Page)){var l=nokia.maps.util,h=l.Coroutine,d=l.now,c=Math.pow,g=Math.sqrt,b=ovi.type,f=e.TouchList,r=function(a,b){return b?a===b?!0:r(a,b.parentNode):!1},a=navigator,q=a.userAgent.toLowerCase(),k=a.appVersion,m={windows:/Windows/.test(k),mac:/MacIntel/.test(a.platform),linux:/X11/.test(k)&&!/tablet/.test(q)&&!/armv7/.test(q),maemo:/apple/.test(q)&&/linux/.test(q)&&/armv7/.test(a.platform),iphone:/iphone/.test(q),ipod:/ipod/.test(q),ipad:/ipad/.test(q),
android:/android/.test(q),meego:/meego/.test(q),windowsphone:/windows\ phone/.test(q)},p,z,s={msie:z=a.appName==="Microsoft Internet Explorer"||/Trident/.test(k),chrome:/chrome/.test(q),safari:/apple/i.test(navigator.vendor)&&!/browserng/.test(q),opera:/opera/.test(q),mozilla:/firefox|fennec/.test(q)&&!/apple/.test(navigator.vendor),konqueror:/konqueror/.test(q),camino:/camino/.test(q),cp:/browserng/.test(q),fullVersion:p=(q.match(/(?:version|chrome|firefox|msie|\brv)[\/: ]([\d.]+)/)||[])[1]||"",
version:+((p.match(/([\d]+(?:[.][\d]+){0,1})/)||[])[1]||0),touch:m.android||m.iphone||m.ipad||m.meego||m.maemo,mobile:/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(q||a.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test((q||
a.vendor||window.opera).substr(0,4)),web:!this.mobile,language:a.language||a.userLanguage,webkit:/webkit/.test(q),gecko:/gecko\//.test(q),engineVersion:(q.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],realVersion:z&&q.match(/msie/)&&(window.matchMedia&&10||self.console&&console.profile&&9||document.documentMode!=void 0&&8)||Math.floor(p),dnd:!1},u="onwheel"in document?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",w=window.navigator&&(navigator.pointerEnabled||navigator.msPointerEnabled)&&
(navigator.msMaxTouchPoints||navigator.maxTouchPoints),x=window.MSPointerEvent&&MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",v=navigator.pointerEnabled?"pointerdown":"MSPointerDown",y=navigator.pointerEnabled?"pointermove":"MSPointerMove",B=navigator.pointerEnabled?"pointerup":"MSPointerUp",C=navigator.pointerEnabled?"pointercancel":"MSPointerCancel",A=s.webkit&&!s.touch?"offsetX":"layerX",D=s.webkit&&!s.touch?"offsetY":"layerY",E={},O,I=function(a){function k(a){var b;a.pointerType===x?(b=a.type,
b===v?J(ea(a)):b===y?I(ea(a)):b===B?z(ea(a)):b===C?q(ea(a)):fa(a)):fa(a)}function p(a){a&&K(ea(a))}function q(a){a&&(z.call(this,a),na=[],Sa=Ta=0)}function z(b){if(b){qb=void 0;for(var c=ea(b),f=-1,k,m=c.changedTouches,p,q;++f<m.length;){q=new Ua(m[f]);for(k=0;k<na.length;k++)if(q.id===na[k].id){p=na[k];na.splice(k--,1);break}if(p){p.up=q;p.pressed=!1;if(ia)aa.style.display="none",q.target=a.elementFromPoint(q.pageX,q.pageY),aa.style.display="block";c.target=q.target;c.pageX=q.pageX;c.pageY=q.pageY;
c.targetX=q[A];c.targetY=q[D];K(c);if(!ia&&!c.defaultPrevented&&na.length===0&&p.down.target===q.target&&!p.tapFired)p.tapFired=!0,K(new ka({type:"tap",target:q.target,pageX:q.pageX,pageY:q.pageY,targetX:q.pageX+b[A],targetY:q.pageY+b[D]})),k=d(),cb>0&&k<cb?(cb=0,K(new ka({type:"dbltap",target:q.target,pageX:q.pageX,pageY:q.pageY}))):cb=k+L.DOUBLE_TAP_TIME}}ia&&b.preventDefault();h.resume(qa)}}function I(b){if(b){for(var c=ea(b),f=-1,k,m=c.changedTouches,p=d(),q,g;++f<m.length;){g=new Ua(m[f]);g.timeStamp=
p;for(k=0;k<na.length;k++)if(q=na[k],q.id===g.id){q.current=g;if(ia)aa.style.display="none",g.target=a.elementFromPoint(g.pageX,g.pageY),aa.style.display="block";q.preventMoveDefault&&b.preventDefault()}if(!ia)c.target=g.target,c.pageX=g.pageX,c.pageY=g.pageY,c.targetX=g[A],c.targetY=g[D],K(c)}ia?(aa.style.left=ga.current.pageX+"px",aa.style.top=ga.current.pageY+"px",(Q.realTime||!Ba)&&qa.run()):qa.run();h.schedulerNextRuntime()<p-10&&h.scheduler();(ia||Ea)&&b.preventDefault()}}function J(a){if(a&&
a.changedTouches[0].identifier!==qb){qb=a.changedTouches[0].identifier;for(var a=ea(a),b=-1,c=a.changedTouches,f=a.timeStamp,k,m,d;++b<c.length;){d=new Hb;d.id=(k=new Ua(c[b])).id;d.down=k;d.current=k;d.pressed=!0;if(Ea)d.longpressSent=d.tapFired=d.preventDrag=!0;k.timeStamp=f;na.some(function(a){return d.id===a.id})||na.push(d);m=d.down.target;try{for(;m;){if(m&&m.isEventTarget&&m.isDraggable){d.preventMoveDefault=!0;break}m=m.parentNode}}catch(p){}a.target=k.target;a.pageX=k.pageX;a.pageY=k.pageY;
a.targetX=k[A];a.targetY=k[D];K(a)}h.resume(qa)}}function V(a){var b=ea(a),c,f;da(a);if(!s.msie&&(c=a.relatedTarget)&&c.nodeName==="IFRAME")for(f in la)if(la[f].pressed)a=b.clone(),a.target=ua,a.type="mouseup",a.button=f,K(a);h.resume(db)}function H(a){da(a)}function P(a){var b,c,f,k=-1,m=d();da(a);b=ea(a);b.target=ua;ia?(aa.style.left=va+"px",aa.style.top=wa+"px",(Q.realTime||!Ba)&&qa.run()):(Va=b,h.resume(db),qa.run());if(Ca<=8){for(;++k<la.length;)if(f=la[k],f.pressed&&!(a.button&rb[k])&&(f=f.down.target,
c=b.clone(),c.type="mouseup",c.button=k,K(c),!ia&&!c.defaultPrevented))c=b.clone(),c.type="click",c.button=k,c.target=f,K(c);h.schedulerNextRuntime()<m-10&&h.scheduler()}}function za(a){var b=ea(a),c,f=la[b.button];if(!s.opera||!(s.version<11&&a.button===2)){da(a);b.target=ua;if(Ca<=8&&!f.pressed)Ia=!0,c=b.clone(),c.type="mousedown",K(c);if(f.pressed){!ia&&!Ea&&qa.run();K(b);if(c&&Ia)a=b.clone(),a.type="click",K(a),c.button!==2&&(Ia=!1);h.resume(qa)}}}function T(a){var b=ea(a),c;c=b.target;var f=
b.pageX,k=b.pageY,m,p;da(a);b.target=ua;if(Ca<=8&&b.button===0&&c&&c.style&&(c.style.overflow==="auto"||c.style.overlfow==="scroll"))if(a=Ib(c),m=a.right-eb.width,p=a.bottom-eb.height,c.clientHeight<c.scrollHeight&&f>=m&&f<=a.right||c.clientWidth<c.scrollWidth&&k>=p&&k<=a.bottom)return;fb=b.button===2?!0:!1;K(b);if(s.opera&&s.version<11&&b.button===2)fb=!1,b=b.clone(),b.type="mouseup",K(b),c=b.clone(),c.type="click",K(c),(b=d())-Ja<L.DOUBLE_CLICK_TIME?(b=c.clone(),b.type="dblclick",K(b),Ja=0):Ja=
b;h.resume(qa)}function pa(a){var b;da(a);b=ea(a);if(!(s.opera&&a.button===2)){if(s.opera&&a.button===2)(time=d())-Ja<L.DOUBLE_CLICK_TIME?(doubleClickEvent=b.clone(),doubleClickEvent.type="dblclick",K(doubleClickEvent),Ja=0):Ja=time;K(b)}}function fa(a){da(a);K(ea(a))}function K(a){if(a){var b=a.type,f=a.button,k=a.touches,d=la[f],p,q=!1;if(m.android){if(b==="gesturechange")return;if(b==="touchstart"&&(Ta++,Sa++,Ta>2))return;b==="touchend"&&(Ta--,Sa--)}if(b==="resizestart"||b==="resize"||b==="resizeend")return Ka(a.target,
a);if(d&&(!O||O!==x))if(b==="mousedown"&&d)d.down=a.clone(),d.up=null,d.pressed=!0,d.preventClick=d.clickFired=d.longpressSent=!1,sb|=1<<f;else if(b==="mouseup"&&d)d.up=a.clone(),d.pressed=!1,sb&=~(1<<f);else if(b==="click"){if(d.clickFired||d.preventClick)q=!0,d.preventClick&&a.preventDefault();d.clickFired=!0}else if(b==="longpress")d.longpressSent=!0;if(!Wa&&(b==="gesturestart"||Ta>=2)){Ea=!0;for(p in na)f=na[p],f.tapFired=f.preventDrag=f.longpressSent=!0;if(m.android&&k&&k.length===2)a.type="gesturestart",
a.scale=1,tb=g(c(k[0].screenX-k[0].screenY,2)+c(k[1].screenX-k[1].screenY,2)),ub=a.scale,Ka(a.target,a,!1),Wa=q=!0;h.resume(qa)}else if(Sa>1&&Wa){if(m.android&&k&&k.length===2)Ka(a.target,a,!1),a.type="gesturechange",a.scale=g(c(k[0].screenX-k[0].screenY,2)+c(k[1].screenX-k[1].screenY,2))/tb,ub=a.scale,Ka(a.target,a,!1),q=!0}else if(b==="gestureend"||Sa===1&&Wa){Ea=!1;if(m.android)a.type="gestureend",a.scale=k&&k.length===2?Math.sqrt(c(k[0].screenX-k[0].screenY,2)+c(k[1].screenX-k[1].screenY,2))/
tb:ub,Ka(a.target,a,!1),q=!0,Wa=!1;h.resume(qa)}ia&&!Jb[b]&&(q=!0);if(!q&&(a.shiftKey=vb,a.ctrlKey=gb,a.altKey=wb,a.metaKey=xb,a.buttonState=sb,Ka(a.target,a,b==="mouseout"||b=="mouseleave"?a.jh:!1),b==="click"&&a.defaultPrevented))d.preventClick=!0}}function da(b){if(b){var c=b.target||b.srcElement||null,f=b.type,k="toElement"in b?b.toElement:b.relatedTarget;if(Xb[f])vb=b.shiftKey,gb=b.ctrlKey,wb=b.altKey,xb=b.metaKey||!1;if(Kb[f]){if("pageX"in b&&b.pageX!==void 0&&b.pageX!==null&&b.pageX===b.pageX)va=
b.pageX,wa=b.pageY,La=b.clientX,Ma=b.clientY;else if("clientX"in b&&"scrollLeft"in ha&&b.clientX!==void 0&&b.clientX!==null&&b.clientX==b.clientX)va=b.clientX+(a.documentElement.scrollLeft?a.documentElement.scrollLeft:ha.scrollLeft),wa=b.clientY+(a.documentElement.scrollTop?a.documentElement.scrollTop:ha.scrollTop),La=b.clientX,Ma=b.clientY;else return;if(ia&&Ba)aa.style.display="none",c=a.elementFromPoint(b.clientX,b.clientY),aa.style.display="block";if(c&&c.nodeType===3)c=c.parentNode;ua=c||null;
f==="mouseout"&&!k&&(ua=null)}}}function W(a){b(a)==="element"&&aa.appendChild(a)}function ja(a,c,f){for(var k=b(a);xa.childNodes.length;)xa.removeChild(xa.childNodes[0]);if(k==="element")c=b(c)==="number"?c===c?c:0:0,f=b(f)==="number"?f===f?f:0:0,xa.style.left=c+"px",xa.style.top=f+"px",xa.appendChild(a)}function X(){yb[Q.effectAllowed]?ya=Q.effectAllowed:Q.effectAllowed=ya}function ab(){yb[ya]&&yb[ya][Q.dropEffect]?oa=Q.dropEffect:oa=Q.dropEffect="none"}function Fb(){if(aa){for(aa.parentNode&&aa.parentNode.removeChild(aa);aa.childNodes.length;)aa.removeChild(aa.childNodes[0]);
for(;xa.childNodes.length;)xa.removeChild(xa.childNodes[0])}}function Gb(){Fa=ra.orientation;zb=a.body.clientWidth;Xa=a.body.clientHeight;Ya=ra.innerWidth;hb=ra.innerHeight;Ab=ra.outerWidth;Bb=ra.outerHeight;if(!m.iphone){if(!s.webkit)zb=null,Ya?Xa||(Xa=a.documentElement.offsetHeight||null):(Ya=a.body.clientWidth,hb=a.body.clientHeight,Xa=null);Ab=Ya;Bb=hb}Fa?Fa===-90?Fa=90:Fa===90&&(Fa=270):Fa=screen.width>screen.height?90:0;Y.width=zb;Y.height=Xa;Y.layoutWidth=Ya;Y.layoutHeight=hb;Y.viewportWidth=
Ab;Y.viewportHeight=Bb;Y.orientation=Fa}function ea(b){if(b instanceof ka)return b;var c,k,d,m,p,q;d=(b=b||window.event)&&(b.target||b.srcElement)||null;if((c=ib)&&ib.nativeEvent===b)return c.currentTarget=b.currentTarget,c.bubbles=b.bubbles,c.eventPhase=b.eventPhase,c.defaultPrevented=b.defaultPrevented,c;c=new ka;(c.nativeEvent=b)||l.d("Invalid or no event object supplied!");(!(c.type=b.type)||!c.type.length)&&l.d("Invalid or no type in event!");c.bubbles=b.bubbles===!0||b.bubbles===!1?b.bubbles:
!1;c.cancelable=b.cancelable===!0||b.cancelable===!1?b.cancelable:!0;c.currentTarget=b.currentTarget;c.defaultPrevented=b.defaultPrevented===!0||b.defaultPrevented===!1?b.defaultPrevented:!1;if(c.eventPhase)c.eventPhase=b.eventPhase;c.namespaceURI=b.namespaceURI;c.page=Y;k=c.type;if(k==="DOMMouseScroll"||k==="mousewheel"||k==="MozMousePixelScroll")c.type=k="wheel";if(c.target=d){if(c.target.nodeType===3)c.target=c.target.parentNode}else return ib=c;if(Yb[c.type]&&w&&(O=b.pointerType,c.pointerId=b.pointerId,
c.hwTimestamp=b.hwTimestamp,c.isPrimary=b.isPrimary,c.pointerType=b.pointerType,c.pressure=b.pressure,c.rotation=b.rotation,c.tiltX=b.tiltX,c.tiltY=b.tiltY,q=new Ua(b),m=b.pointerId,b.pointerType===x)){if(!sa.identifiedTouch(m)&&c.type!==v)return null;if(c.type===v&&(sa.N(b),Ha[c.pointerId]=c.target,c.type=jb[c.type],sa.length>1&&!E[m]))d=new MSGesture,d.target=c.target,d.addPointer(m),E[m]=d;c.target=d=q.target=Ha[c.pointerId];if(c.type===y&&sa.identifiedTouch(c.pointerId))sa.N(b),c.type=jb[c.type];
if(c.type===B)sa.S(b),Ha[c.pointerId]=null,delete Ha[c.pointerId],c.type=jb[c.type],bb(c.pointerId),sa.length===1&&bb(sa[0].pointerId);if(c.type===C)sa.S(b),Ha[c.pointerId]=null,delete Ha[c.pointerId],c.type=jb[c.type],bb(c.pointerId),sa.length===1&&bb(sa[0].pointerId);b.touches=new f;b.touches.pl(sa);b.changedTouches=new f;b.changedTouches.N(q);b.targetTouches=new f;for(q=0;q<sa.length;q++)r(d,Ha[sa[q].identifier])&&b.targetTouches.N(sa[q])}if(Zb[c.type])c.touches=b.touches,c.targetTouches=b.targetTouches,
c.changedTouches=b.changedTouches;if($b[k]||Lb[k]){if(Lb[k])c.type=ac[k];c.pageX=b.pageX;c.pageY=b.pageY;c.targetX=b[A];c.targetY=b[D];c.scale=b.scale;c.rotation=b.rotation}c.view=void 0;c.relatedTarget="relatedTarget"in b?b.relatedTarget:b.fromElement===d?b.toElement:b.fromElement;c.detail=b.detail;if(b.display)c.display=b.display,c.displayX=b.displayX,c.displayY=b.displayY;if(Kb[k]){c.shiftKey=b.shiftKey;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey||!1;c.screenX=b.screenX;c.screenY=
b.screenY;c.clientX=b.clientX;c.clientY=b.clientY;"pageX"in b?(c.pageX=b.pageX,c.pageY=b.pageY,"layerX"in b?(c.targetX=s.msie&&s.version==9?b.offsetX:b[A],c.targetY=s.msie&&s.version==9?b.offsetY:b[D]):(c.targetX=b.offsetX,c.targetY=b.offsetY)):(c.pageX=b.clientX+(a.documentElement.scrollLeft||ha.scrollLeft),c.pageY=b.clientY+(a.documentElement.scrollTop||ha.scrollTop),c.targetX=b.offsetX,c.targetY=b.offsetY);if(bc[k]){k==="mousedown"&&(kb=!1);d=b.button;if(Ca<=8&&k==="mousedown")for(q=0;q<la.length;q++)la[q].pressed&&
(d&=~rb[q]);else if(Ca<=8&&(k==="click"||k==="contextmenu")&&d===0)for(q=p=d=0;q<la.length;q++)if(m=la[q],!m.pressed&&m.up&&m.up.timeStamp>p)d=rb[q],p=m.up.timeStamp;c.button=Ca<=8||s.konqueror?cc[d]:d}if(dc[k])if(u==="wheel")c.deltaX=b.deltaX,c.deltaY=b.deltaY,c.deltaZ=b.deltaZ,c.deltaMode=b.deltaMode;else if(c.deltaMode=b.type==="MozMousePixelScroll"?0:1,c.deltaX=0,c.deltaZ=0,u==="mousewheel"){if(c.deltaY=b.wheelDelta/-40,b.wheelDeltaX)c.deltaX=b.wheelDeltaX/-40}else c.deltaY=b.detail}if(ec[k])c.data=
b.data,c.inputMode=c.inputMode;if(fc[k])c.keyIdentifier=b.keyIdentifier,c.keyLocation=b.location===+b.location?b.location:b.keyLocation,c.repeat=b.v,c.ctrlKey=b.ctrlKey,c.shiftKey=b.shiftKey,c.altKey=b.altKey,c.metaKey=b.metaKey||!1;return ib=c}function bb(a){var b=E[a];if(b)b.stop(),b.target=null,delete E[a]}function Ib(b){if(!b||!b.ownerDocument||!b.parentNode||b.parentNode===b)return null;var c,f=s.gecko&&a.getBoxObjectFor&&b.style.position==="absolute"&&(b.style.top===""||b.style.left==="");c=
b.offsetParent;var k=b.offsetLeft,d=b.offsetTop,m,p;if(b.getBoundingClientRect)c=a.documentElement,k=c.pageXOffset?c.pageXOffset:a.body.pageXOffset?a.body.pageXOffset:ra.pageXOffset?ra.pageXOffset:c.scrollLeft,d=c.pageYOffset?c.pageYOffset:a.body.pageYOffset?a.body.pageYOffset:ra.pageYOffset?ra.pageYOffset:c.scrollTop,f=b.getBoundingClientRect(),f={left:f.left+k-c.clientLeft,top:f.top+d-c.clientTop,right:f.right+k-c.clientLeft,bottom:f.bottom+k-c.clientTop,width:f.width,height:f.height};else if(a.getBoxObjectFor&&
!f)f=a.getBoxObjectFor(b),c=a.getBoxObjectFor(viewport),f={left:f.screenX-c.screenX,top:f.screenY-c.screenY},f.right=f.left+b.offsetWidth-1,f.bottom=f.top+b.offsetHeight-1;else{for(;c;){if((m=c.offsetLeft)&&m===m)k+=m;if((p=c.offsetTop)&&p===p)d+=p;if((m=c.clientLeft)&&m===m)k+=m;if((p=c.clientTop)&&p===p)d+=p;k-=c.scrollLeft;if(!s.opera||c.tagName!=="TR")d-=c.scrollTop;c=c.offsetParent}if(s.safari&&b.style.position==="absolute"||s.opera)d-=ha.offsetTop;f={left:k,top:d,right:k+b.offsetWidth-1,bottom:d+
b.offsetHeight-1}}if(!f.width)f.width=f.right-f.left+1,f.height=f.bottom-f.top+1;return f}function Na(c,f){if(b(c)==="string")return Cb(a.createElement(c),f);c.tagName||l.d("tagName must be string or object with property 'tagName'");var k=a.createElement(c.tagName),d;for(d in c)gc[d]||k.setAttribute(d,c[d]);(f||(f=c.style))&&Cb(k,f);return k}function Cb(a,b){if(b&&a&&a.style)for(var c in b)!hc[c]&&c in a.style&&(a.style[c]=b[c]);return a}function Hb(){}function Ua(a){if(a)for(var b in a)this[b]=a[b];
this.id=this.identifier}function Za(){this.pressed=this.longpressSent=this.clickFired=this.preventClick=!1;this.down=this.up=null}var ra=a.parentWindow||a.defaultView,Mb=a.documentElement,ha=a.getElementsByTagName("BODY")[0],ic=a.getElementsByTagName("HEAD")[0],Y=this,kb=!1,jc=m.mac&&s.webkit,Ca=function(){var b;if(s.msie)b=5,a.documentMode?b=a.documentMode:a.compatMode&&a.compatMode==="CSS1Compat"&&(b=7);return b}(),ka=e.Event,lb=e.EventTarget,kc=e.DataTransfer,Nb=lb.getDispatchPath,Ka=lb.dispatchEvent,
R=ovi.dom.addEvent,Ob=ovi.Array.indexOf;Ua.prototype={id:null,identifier:null,target:null,timeStamp:0,pageX:0,pageY:0,screenX:0,screenY:0,clientX:0,clientY:0};Hb.prototype={preventMoveDefault:!1,preventDrag:!1,pressed:!1,longpressSent:!1,tapFired:!1,id:null,down:null,current:null,up:null};var hc={constructor:!0,prototype:!0},gc={constructor:!0,prototype:!0,tagName:!0,style:!0},Ga=Math.abs,ib=null,jb={MSPointerDown:"touchstart",MSPointerMove:"touchmove",MSPointerUp:"touchend",MSPointerCancel:"touchcancel",
pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"},sa=w?new f:null,Ha={},Yb={MSPointerDown:!0,MSPointerMove:!0,MSPointerUp:!0,MSPointerCancel:!0,pointerup:!0,pointermove:!0,pointerdown:!0,pointercancel:!0},Lb={MSGestureStart:!0,MSGestureChange:!0,MSGestureEnd:!0},ac={MSGestureStart:"gesturestart",MSGestureChange:"gesturechange",MSGestureEnd:"gestureend"},Zb={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0},$b={gesturestart:!0,gesturechange:!0,
gestureend:!0},Jb={dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0},Kb=ovi.extend(ovi.extend({},Jb),{mousemove:!0,mouseup:!0,mousedown:!0,mouseover:!0,mouseout:!0,mouseenter:!0,mouseleave:!0,click:!0,dblclick:!0,contextmenu:!0,wheel:!0}),bc={mousedown:!0,mouseup:!0,contextmenu:!0,click:!0,dblclick:!0},dc={wheel:!0},ec={},fc={keydown:!0,keypress:!0,keyup:!0},rb={0:1,1:4,2:2,3:8,4:16},cc={1:0,4:1,2:2,8:3,16:4},lc=a.compatMode!=="CSS1Compat",zb=0,Xa=0,Ya=0,hb=0,Ab=0,Bb=
0,Fa=0,eb=function(){var a=0,b=0,c=0,f=0,k=0,d=0,m=Na("P",{height:"200px",width:"200px"}),p=Na("P",{position:"absolute",top:0,left:0,visibility:"hidden",width:"100px",height:"100px",overflow:"hidden"});try{p.appendChild(m);ha.appendChild(p);b=p.offsetWidth;k=p.offsetHeight;p.style.overflow="scroll";c=p.offsetWidth;d=p.offsetHeight;if(b===c)c=p.clientWidth;if(k===d)d=p.clientHeight;ha.removeChild(p);a=b-c;f=k-d}catch(q){f=a=0}return f!==f||a!==a||f<=0||a<=0?{width:17,height:17}:{width:a,height:f}}(),
va=0,wa=0,La=0,Ma=0,ua=null,ma=null,Oa=[],la=[new Za,new Za,new Za,new Za,new Za],sb=0,na=[],cb=0,ia=!1,Ea=!1,yb={uninitialized:{copy:!0,move:!0,link:!0},none:{},copy:{copy:!0},copyLink:{copy:!0,link:!0},copyMove:{copy:!0,move:!0},all:{copy:!0,move:!0,link:!0},link:{link:!0},linkMove:{move:!0,link:!0},move:{move:!0}},mb=!1,nb=0,ob=0,ta=null,ga=null,ya=null,Ba=!0,oa=null,Pb={none:s.msie?"not-allowed":"no-drop",link:s.msie||s.safari?"default":"alias",move:s.msie?"hand":"pointer",copy:s.msie||s.safari?
"default":"copy"},Da=null,ca=null,Pa=!1,Q=null,aa=null,Qa=null,Qb=null,xa=null,vb=!1,gb=!1,wb=!1,xb=!1,Xb={keydown:!0,keyup:!0,mousedown:!0,mouseup:!0},U=L.browser.mobile,Rb=U?5:150,mc=U?1:25,qa=h.create("nokia.maps.dom.Page#queueCo",function(c,f){var k,d,m=f.callTime,p=m-L.LONGPRESS_INTERVAL,q=!1,g=m+Rb,r,e,u,l=-1,z,x,w,y,v,D;if(ia){if(ga?(v=(r=ga.current.pageX)-nb,D=(y=ga.current.pageY)-ob,k=ga):(v=(r=va)-nb,D=(y=wa)-ob,k=la[ta]),nb=r,ob=y,aa.style.left=r+"px",aa.style.top=y+"px",!k.pressed&&k.up||
Ea||mb){if(Ba&&!Ea&&!mb&&ca&&oa!=="none")k=new ka({type:"drop",target:ca,relatedTarget:Da,button:ta,pageX:r,pageY:y,deltaX:v,deltaY:D,dataTransfer:Q}),K(k),ab(),k.defaultPrevented||(k=Q.getData("text/plain"),b(ca)==="element"&&(ca.nodeName==="TEXTAREA"||ca.nodeName==="INPUT"&&ca.type.toLowerCase()==="text")?oa==="copy"||oa==="move"?k&&k.length&&(ca.value+=k):oa="none":oa="none");else if(!Ba)Q.dropEffect=oa="none",k=new ka({type:"dragleave",target:ca,relatedTarget:Da,button:ta,cancelable:!1,pageX:r,
pageY:y,deltaX:0,deltaY:0,dataTransfer:Q}),K(k);Q.dropEffect=oa;Q.effectAllowed=ya;k=new ka({type:"dragend",target:Da,relatedTarget:ca,button:ta,pageX:r,pageY:y,deltaX:0,deltaY:0,dataTransfer:Q});K(k);qa.realtime=!1;if(s.msie)ha.releaseCapture&&ha.releaseCapture(),ha.style.cursor=Qb;Fb();ia=mb=!1;Q=ga=ta=null}}else if(!Ea){if(na.length===1&&(k=na[0])&&k.current)if(v=k.current.pageX-k.down.pageX,D=k.current.pageY-k.down.pageY,k.pressed&&!k.preventDrag&&Ga(v)+Ga(D)>8)ga=k,r=k.current.pageX,y=k.current.pageY;
if(!ga)for(l in la)if(k=la[l],k.down&&(v=va-k.down.pageX,D=wa-k.down.pageY,k.pressed&&Ga(v)+Ga(D)>1)){ta=+l;r=va;y=wa;break}if((ga||ta!==null)&&k){kb=!0;e=k.down.target;try{for(;e;){if(e.isEventTarget&&e.isDraggable)break;e=e.parentNode}}catch(B){e=null}if(e){ga?(v=(r=ga.current.pageX)-ga.down.pageX,D=(y=ga.current.pageY)-ga.down.pageY,k=ga):(v=(r=va)-k.down.pageX,D=(y=wa)-k.down.pageY,k=la[ta]);nb=r;ob=y;if(!aa)aa=Na("DIV",{position:"absolute",top:k.down.pageX+"px",left:k.down.pageY+"px",zIndex:65535,
overflow:"visible",width:0,height:0}),xa=Na("DIV",{position:"absolute",top:0,left:0,zIndex:255,overflow:"visible",width:0,height:0}),Qa=Na("DIV",{position:"absolute",top:"-25px",left:"-25px",zIndex:65535,overflow:"visible",width:"50px",height:"50px"}),Qa.innerHTML="&nbsp;";aa.appendChild(xa);!s.msie&&!ga&&aa.appendChild(Qa);aa.style.left=r+"px";aa.style.top=y+"px";Qa.style.cursor="default";ha.appendChild(aa);Q=new kc;Q.setDragImage=ja;Q.addElement=W;u=new ka({type:"dragstart",target:e,relatedTarget:null,
button:ta,pageX:k.down.pageX,pageY:k.down.pageY,targetX:k.down.targetX,targetY:k.down.targetY,deltaX:0,deltaY:0,dataTransfer:Q});K(u);if(u.defaultPrevented)Fb(),k.preventDrag=!0,ia=!1,Q=ga=ta=null;else if(qa.realtime=Q.realtime,Da=k.down.target=e,ia=!0,Ba=Q.lift!==!1,ca=null,k.longpressSent=k.tapFired=k.preventClick=!0,Pa=!1,X(),Q.effectAllowed=ya,Q.dropEffect=oa,ha.setCapture&&ha.setCapture(),s.msie)Qb=ha.style.cursor||"auto",ha.style.cursor="default"}else ta=ga=null}}if(ia){d=ga?ga.current.target:
ua;if(Ba&&ca&&ca!==d){e=d;try{for(;e;){if(e===ca)break;e=e.parentNode}}catch(A){e=null}if(!e||e===ra||e===a||e===ha)k=new ka({type:"dragleave",target:ca,relatedTarget:Da,button:ta,pageX:r,pageY:y,dataTransfer:Q}),K(k),Q.effectAllowed=ya,Q.dropEffect=oa="none",ca=null,Pa=!1}if(Ba&&!ca&&d){e=d;try{for(;e;){if(e.isEventTarget)break;e=e.parentNode}}catch(C){e=null}if(e)d=new ka({type:"dragenter",target:ca=e,relatedTarget:Da,button:ta,pageX:r,pageY:y,dataTransfer:Q}),K(d),d.defaultPrevented?(Pa=!0,ab(),
Q.effectAllowed=ya):(Pa=!1,Q.effectAllowed=ya,Q.dropEffect=oa="none")}if(Ba&&ca&&Pa)d=new ka({type:"dragover",target:ca,relatedTarget:Da,button:ta,pageX:r,pageY:y,deltaX:v,deltaY:D,dataTransfer:Q}),K(d),d.defaultPrevented?(ab(),Q.effectAllowed=ya):(Pa=!1,Q.effectAllowed=ya,Q.dropEffect=oa="none");r=new ka({type:"drag",target:Da,relatedTarget:ca,button:ta,pageX:r,pageY:y,deltaX:v,deltaY:D,dataTransfer:Q});K(r);r.defaultPrevented&&(mb=!0);if(Q)if(X(),Q.dropEffect=oa,Ba){if(Qa.style.cursor=Pb[oa],s.msie)ha.style.cursor=
Pb[oa]}else s.msie?ha.style.cursor=Q.cursor==="pointer"?"hand":Q.cursor||"hand":Qa.style.cursor=Q.cursor==="hand"?"pointer":Q.cursor||"pointer";return h.sleep(mc)}for(l in la)if(k=la[l],k.pressed&&(d=k.down))if(q=!0,!k.longpressSent&&d.target&&Ga(va-d.pageX)+Ga(wa-d.pageY)<=1&&d.timeStamp<=p){if(k.longpressSent=!0,r=d.clone(),r.type="longpress",r.nativeEvent=null,K(r),r.defaultPrevented)k.preventClick=!0}else!k.longpressSent&&g>d.timeStamp+L.LONGPRESS_INTERVAL&&(g=d.timeStamp+L.LONGPRESS_INTERVAL);
for(x in na)if(k=na[x],k.pressed&&(z=k.down))if(q=!0,!k.longpressSent&&(w=k.current)&&z.target&&Ga(w.pageX-z.pageX)+Ga(w.pageY-w.pageY)<=8&&z.timeStamp<=p){if(k.longpressSent=!0,r=new ka(ovi.extend({type:"longpress"},z)),K(r),r.defaultPrevented)k.tapFired=!0}else!k.longpressSent&&g>z.timeStamp+L.LONGPRESS_INTERVAL&&(g=z.timeStamp+L.LONGPRESS_INTERVAL);if(ia)return h.sleep(Rb);if(q){if((r=g-m)<0)r=1;return h.sleep(r)}return h.sleep()})(),Ta=0,Sa=0,ub,tb,Wa=!1,fb=!1,Ja=0,Ia=!1,Db=0,Va=null,pb=0,db=
h.create("nokia.maps.dom.Page#mouseMoveCo",function(b,c){var f,k,d,m;m=ma;var p=c.callTime;p>=pb&&(Va&&K(Va),Va=null,pb=p+L.MOUSEMOVE_THRESHOLD);if(ma&&ma!==ua)d=new ka({type:"mouseout",target:ma,relatedTarget:ua,pageX:va,pageY:wa,clientX:La,clientY:Ma,jh:c.mouseCurrentOverDispatchPath}),c.mouseCurrentOverDispatchPath=null,K(d),ma=null;for(d=-1;++d<Oa.length;)if(k=Oa[d],(f=Ob(Oa,k))>=0&&(!k.hitTest||!k.hitTest(va,wa)))Oa.splice(f,1),f=new ka({type:"mouseleave",target:k,pageX:va,pageY:wa,clientX:La,
clientY:Ma,jh:c.mouseCurrentEnterDispatchPath}),c.mouseCurrentEnterDispatchPath=null,K(f),d--;if(ua&&!ma){ma=ua;if(ma!==ra&&ma!==a&&ma!==ha&&ma!==Mb&&Ob(Oa,ma)<0)d=new ka({type:"mouseenter",target:ma,pageX:va,pageY:wa,clientX:La,clientY:Ma}),Oa.push(ma),d=ea(d),c.mouseCurrentEnterDispatchPath=lb.getDispatchPath(ma,d.type,d.display),K(d);m=new ka({type:"mouseover",target:ma,relatedTarget:m,pageX:va,pageY:wa,clientX:La,clientY:Ma});m=ea(m);c.mouseCurrentOverDispatchPath=lb.getDispatchPath(ma,m.type,
m.display);K(m)}if(!Va||pb<=p)return h.sleep();return h.sleep(pb-p)})(),qb,Sb=!1,U=Ca<=8?a:ra,S=Ca<=8?!1:!0;qa.onError=db.onError=function(){};R(a,"touchstart",J,S);R(a,"touchmove",I,S);R(a,"touchend",z,S);R(a,"touchcancel",q,S);R(U,"gesturestart",p,S);R(U,"gesturechange",p,S);R(U,"gestureend",p,S);R(U,"orientationchange",function(){K(ea(event));K(new ka({type:"resize",target:ra}))},S);R(U,"MSPointerDown",k,S);R(U,"MSPointerMove",k,S);R(U,"MSPointerUp",k,S);R(U,"MSPointerCancel",k,S);R(U,"pointerdown",
k,S);R(U,"pointermove",k,S);R(U,"pointerup",k,S);R(U,"pointercancel",k,S);R(U,"MSGestureStart",p,S);R(U,"MSGestureChange",p,S);R(U,"MSGestureEnd",p,S);R(U,"resize",function(){h.resume(N)},S);!m.android&&R(U,"mouseover",H,S);!m.android&&R(U,"mouseout",V,S);!m.android&&R(U,"click",pa,S);!m.android&&R(U,u,fa,S);u==="DOMMouseScroll"&&R(U,"MozMousePixelScroll",fa,S);!m.android&&R(U,"dblclick",fa,S);!m.android&&R(U,"mousedown",T,S);!m.android&&R(U,"mouseup",za,S);!m.android&&R(U,"mousemove",P,S);R(U,"contextmenu",
function(a){var b=ea(a),c;da(a);if(ia)b.preventDefault();else{if(fb&&!s.gecko&&!Ia&&(a=b.clone(),a.type="click",K(a),a.button===2&&(s.chrome||s.safari||s.opera||Ca>=9)))(c=d())-Db<L.DOUBLE_CLICK_TIME?(a=a.clone(),a.type="dblclick",K(a),Db=0):Db=c;if(Ia)a=b.clone(),a.type="dblclick",K(a);b.target.isEventTarget&&(la[2].pressed||la[0].pressed&&gb&&jc)?(setTimeout(function(){if(!kb)b.defaultPrevented=!1,K(b)},250),b.preventDefault()):kb?b.preventDefault():K(b);fb=Ia=!1}},S);R(U,"keydown",fa,S);R(U,"keypress",
fa,S);R(U,"keyup",fa,S);R(U,"focus",fa,S);R(U,"blur",fa,S);R(a,"selectstart",function(a){for(var a=ea(a),b=Nb(a.target),c=-1,f=b.length;++c<f;)if(b[c].isDraggable)return a.preventDefault(),!1},S);R(a,"dragstart",function(a){if(!s.dnd)for(var b=Nb(a.target),c=b.length,f=-1;++f<c;)if(b[f].isEventTarget&&b[f].isDraggable)return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},S);R(a,"drag",function(a){var b=ua;da(a);ua=b||null},S);R(a,"dragover",function(a){if(a&&a.target&&a.target.droppable)a.preventDefault?
a.preventDefault():a.returnValue=!1},S);R(a,"dragenter",function(a){var a=ea(a),b;if(ca)b=a.target,a.target=ca,a.type="dragleave",K(a),a.type="dragenter",a.target=b;K(a)},S);R(a,"drop",function(a){K(a=ea(a));if(a.defaultPrevented)a.type="dragleave",a.target=ca,K(a);if(Sb)a.type="dragend",a.target=Da,K(a)},S);R(a,"dragend",function(a){Sb=!0;!ca&&K(ea(a))},S);R(ra,"beforeunload",fa,!1);Gb();a.$jslPage=Y;Y.window=ra;Y.document=a;Y.html=Mb;Y.head=ic;Y.body=ha;Y.documentMode=Ca;Y.quirksMode=lc;Y.scrollbarsWidth=
eb.width;Y.scrollbarsHeight=eb.height;Y.parseEvent=ea;Y.update=Gb;Y.processEvent=K;Y.$=function(a){return this.document.getElementById(a)};Y.setStyle=Cb;Y.createElement=Na;Y.getClientRect=Ib;Y.destroy=function(){h.kill(N);h.kill(qa);h.kill(db)};Y.Sw=function(a){eval("fn = "+a.toString());return a};Y.ctrlKeyDown=function(){return gb};Y.shiftKeyDown=function(){return vb};Y.altKeyDown=function(){return wb};Y.metaKeyDown=function(){return xb}},L=e.Page=function(a){var c=document,f;if(!a){if(c.$jslPage)return c.$jslPage;
return new I(c)}if(a.$jslPage)return a.$jslPage;if((f=b(a))!=="document"){if(f==="window")c=a.document;else if(a.ownerDocument)c=a.ownerDocument;else if(a.parentNode)for(c=null;a&&a.parentNode;){if((f=b(a))==="document"){c=a;break}if(f==="window"){c=a.document;break}if(a.ownerDocument){c=a.ownerDocument;break}a=a.parentNode}c||l.d("Invalid node given!")}else c=a;if(c.$jslPage)return c.$jslPage;return new I(c)},a={parseEvent:function(a){if(a instanceof e.Event)return event;var b=(a=a||window.event)&&
(a.target||a.srcElement)||null,b=b&&b.ownerDocument||document;if(!b)return L().parseEvent(a);if(b.$jslPage)return b.$jslPage.parseEvent(a);return(new I(b)).parseEvent(a)},LONGPRESS_INTERVAL:500,MOUSEMOVE_THRESHOLD:0,DOUBLE_TAP_TIME:500,DOUBLE_CLICK_TIME:300,RESIZE_IDL_TIME:1E3,RESIZE_SLEEP_MIN_TIME:125,RESIZE_SLEEP_MAX_TIME:500,platform:m,browser:s,Fg:[],cf:[]},N=h.create("nokia.maps.dom.Page#resizeCo",function(a,c){var f=e.Event,k=L.cf,d=k.length,m=c.callTime,p,q,g;switch(a.ip){default:a.ip=0;case 0:a.resizeData=
[],a.ip++;case 1:a.i=-1,a.resizesRunning=0,a.ip++;case 2:for(;++a.i<d;){d=k[a.i];g=d.node;k=!1;d.mode=d.mode||0;if((p=b(g))==="window"){if(q=L(g),q.update(),q.layoutWidth!==d.layoutWidth||q.layoutHeight!==d.layoutHeight)d.layoutWidth=q.layoutWidth,d.layoutHeight=q.layoutHeight,k=!0}else if(p==="element"&&(q=L(g),d.offsetWidth!==g.offsetWidth||d.offsetHeight!==g.offsetHeight))d.offsetWidth=g.offsetWidth,d.offsetHeight=g.offsetHeight,k=!0;if(k){if(d.mode===0)d.mode=1,q.processEvent(new f({type:"resizestart",
target:g}));d.lastResizeTime=m;q.processEvent(new f({type:"resize",target:g}));a.resizesRunning++}else if(d.mode===1)m>d.lastResizeTime+L.RESIZE_IDL_TIME?(d.mode=0,q.processEvent(new f({type:"resizeend",target:g}))):a.resizesRunning++;return h.yield()}a.ip++;case 3:if(a.ip=1,a.resizesRunning)return h.sleep(L.RESIZE_SLEEP_MIN_TIME)}return h.sleep(L.RESIZE_SLEEP_MAX_TIME)})();ovi.extend(L,a);N.onError=function(){};if(m.ipad||m.iphone)h.MAX_EXEC_TIME=10,h.AF_MAX_EXEC_TIME=10,h.SLICE_SIZE=5,h.AF_SLICE_SIZE=
5}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.IDL");
(function(){var e=nokia.maps.dom.Page.browser,l=e.mozilla&&!e.fullVersion.indexOf("3.6"),h=nokia.maps.util.d,d={},c=function(){var a={BEGIN_2D_IMAGE:["-","begin2dImage"],BEGIN_PATH:["@","beginPath"],MOVE_TO:["M","moveTo"],LINE_TO:["L","lineTo"],BEZIER_CURVE_TO:["C","bezierCurveTo"],STROKE_TEXT:["t","strokeText"],FILL_TEXT:["T","fillText"],CLOSE_PATH:["x","closePath"],FILL:["f","fill"],STROKE:["s","stroke"],SAVE:[">","save"],RESTORE:["<","restore"],SET:["#","set"],DRAW_IMAGE:["I","drawImage"],DRAW_IDL:["i",
"drawIDL"],END:["X","end"]},b;for(b in a)a[b]=a[b][0].charCodeAt(0),d[a[b]]=b;return a}(),g=[["strokeColor",255,1],["fillColor",255,2],["lineWidth",1,3],["lineCap","round",4],["lineJoin","miter",5],["miterLimit",10,6],["font","10px sans-serif",7],["textAlign","start",8],["textBaseline","middle",9],["opacity",1,10]],b=nokia.maps.util.Matrix3D,f=function(){for(var a=-1,b=g.length,c=[];++a<b;)c.push(g[a][0]);return c}(),r=nokia.maps.gfx.IDL=new ovi.Class({initialize:function(a){this.data=a&&a.length>
3?a:a=[];this.width=a[1];this.height=a[2];this.description=a[3];this.resetState()},Statics:{attributeToIdentifier:{},identifierToAttribute:{},opcodes:c},resetState:function(){var a=g.length;this.yb=[];for(this.matrix=new b;a--;)this[g[a][0]]=g[a][1]},saveState:function(a){var b=this.yb,c=f.length,d=0;b.push(a);for(b.push(this.matrix.clone());d<c;)b.push(this[f[d++]])},restoreState:function(){var a=this.yb,b=f.length;if(!a.length)return this.resetState();for(;b--;)this[f[b]]=a.pop();this.matrix=a.pop();
return a.pop()},push:function(){for(var a=this.data,b=this.matrix.rows,f=b[0],b=b[1],m,p,g,r,e,w,x,v=-1,y=arguments,B=y.length;++v<B;)m=y[v],m===c.BEGIN_2D_IMAGE?a.push(m,this.width=+y[++v],this.height=+y[++v],this.description=""+y[++v]):m===c.MOVE_TO||m===c.LINE_TO?(w=+y[++v],x=+y[++v],a.push(m,f[0]*w+f[1]*x+f[3],b[0]*w+b[1]*x+b[3])):m===c.STROKE_TEXT||m===c.FILL_TEXT?(p=y[++v],w=+y[++v],x=+y[++v],g=+y[++v],r=+y[++v],a.push(m,p,f[0]*w+f[1]*x+f[3],b[0]*w+b[1]*x+b[3],f[0]*g+f[1]*r+f[3],b[0]*g+b[1]*
r+b[3])):m===c.BEZIER_CURVE_TO?(p=+y[++v],g=+y[++v],r=+y[++v],e=+y[++v],w=+y[++v],x=+y[++v],a.push(m,f[0]*p+f[1]*g+f[3],b[0]*p+b[1]*g+b[3],f[0]*r+f[1]*e+f[3],b[0]*r+b[1]*e+b[3],f[0]*w+f[1]*x+f[3],b[0]*w+b[1]*x+b[3])):m===c.SET?a.push(m,y[++v],y[++v]):m===c.DRAW_IMAGE||m===c.DRAW_IDL?a.push(m,y[++v],y[++v],y[++v],y[++v],y[++v],y[++v],y[++v],y[++v],y[++v],this.matrix.clone()):d[m]?(m===c.CLOSE_PATH&&l&&a.push(m),a.push(m)):h('Invalid opcode "'+m+'" found in IDL')},concat:function(a){var b=new r,c;for(c in this)b[c]=
this[c];b.data=this.data.concat(a.data.slice(4));b.yb=this.yb.slice();return b},append:function(a){this.data=this.data.concat(a.data.slice(4));return this},clone:function(){var a=new r,b;for(b in this)a[b]=this[b];a.data=this.data.slice();a.yb=this.yb.slice();return a}});(function(){for(var a=-1,b=g.length,c,f;++a<b;)c=g[a],f=c[0],c=c[2],r.attributeToIdentifier[f]=c,r.identifierToAttribute[c]=f})()})();ovi.provide("nokia.maps.dom.imgLoader");
(function(){function e(a,b,c,f,k,d,p){m.push(k);delete f.Mi;f.removeAttribute("src");delete c.oi;a&&a.call(b,c,d,p)}function l(){k=h(self,!0);l=!1}function h(a,b){a=g.pb(a.document.body,"iframe",!1,b?"visibility:hidden;position:absolute;left:-9999px;":!1).contentWindow;g.pb(a.document.head,"base").href=document.baseURI;return a}function d(a){a.onerror?a.onerror.call(a,q,!0):a.onload=a.onerror=null;a.removeAttribute("src")}function c(b,c,k,d){var m,p=!0;b||(b=document.createElemenet("img"));b.onload=
b.onerror=function(a,c){b.onload=b.onerror=null;m=(a||b.ownerDocument.parentWindow.event).type==="load";k&&k.call(d,b,c?void 0:m,c||p)};b.src=c;m===void 0&&(b.complete&&r&&b.onload.call(b,b.naturalWidth!==0||f?a:q),p=!1);return m}var g=nokia.maps.dom,b=g.Page.browser,f=b.msie,r=b.webkit,a={type:"load"},q={type:"error"},k,m=[],p=g.loadImg=r?function(a,b,f,d){var p,q;l&&l();p=m.pop()||h(k);q=a.oi=new p.Image;q.Mi=p;a.ef=c(q,b,function(k,m,q){m?a.ef=c(a,b,function(a,b,c){e(f,d,a,k,p,b,c&&q)}):e(f,d,
a,k,p,m,q)});q=a.ef;delete a.ef;return q}:c,z=g.cancelImg=r?function(a){if(a=a.oi)a.Mi.stop(),d(a)}:d,s=g.imgLoader={maxRequests:b.mobile?6:34,lb:[],ea:0,request:function(a,b,c,f){s.lb.push([a,b,c,f]);return s.ki(!1)},cancel:function(a){for(var b,c=s.lb,f,k=0,d=s.lb.length;k<d;k++)if(c[k][0]===a){b=c.splice(k,1)[0];break}b?(f=b[2])&&f.call(b[3],a,void 0,!0):z(a)},Ze:function(){s.ki(!0)},ki:function(a){var b=s.maxRequests,c,k=s.lb,d=k.splice(0,b-s.ea),m=d.length,q;for(q=0;q<m;q++)c=d[q],++s.ea,c=p(c[0],
c[1],function(c,d){return function(m,p,q){--s.ea<b&&k.length&&(q&&!a?setTimeout(s.Ze,0):f?setTimeout(s.Ze,0):s.Ze());c&&c.call(d,m,p,q)}}(c[2],c[3]),s);return!a?c:void 0}}})();ovi.provide("nokia.maps.gfx.Graphics");
(function(){var e=ovi.type,l=Math.PI/180,e=ovi.type,h=nokia.maps.gfx,d=nokia.maps.util,c=h.Color.parseCss,g=h.IDL,b=g.opcodes,f=g.attributeToIdentifier;nokia.maps.gfx.Graphics=new ovi.Class({initialize:function(b){if(b instanceof g)this.j=b},beginImage:function(c,a,f){(this.j=new g).push(b.BEGIN_2D_IMAGE,c,a,""+f);return this},getIDL:function(){return this.j},setIDL:function(b){this.j=b instanceof g?b:d.d("idl must be an instance of nokia.maps.gfx.IDL");return this},getWidth:function(){return this.j.width},
getHeight:function(){return this.j.height},getMatrix:function(){return this.j.matrix},getDescription:function(){return this.j.description},save:function(){this.j&&(this.j.push(b.SAVE),this.j.saveState());return this},restore:function(){this.j&&(this.j.push(b.RESTORE),this.j.restoreState());return this},set:function(d,a){var q=this.j;if(d==="width"||d==="height"){if((a=+a)<0)a=0;q[d]=a;this.beginImage(q.width,q.height,q.description)}else if(d==="description")q.data[3]=q.description=a;else{d==="fillStyle"&&
(d="fillColor");d==="strokeStyle"&&(d="strokeColor");if((d==="fillColor"||d==="strokeColor")&&e(a)==="string")a=c(a);q[d]=a;f[d]&&q.data.push(b.SET,f[d],a)}return this},fill:function(){this.j.data.push(b.FILL);return this},stroke:function(){this.j.data.push(b.STROKE);return this},scale:function(b,a){this.j.matrix=this.j.matrix.scale(b,a,1);return this},rotate:function(b){this.j.matrix=this.j.matrix.rotateZ(b*l);return this},translate:function(b,a){this.j.matrix=this.j.matrix.translate(b,a,0);return this},
drawRect:function(c,a,f,k,d,p){var g=this.j,e,h,d=+d||0,p=+p||d;d===0&&p===0?g.push(b.BEGIN_PATH,b.MOVE_TO,c,a,b.LINE_TO,e=c+f,a,b.LINE_TO,e,h=a+k,b.LINE_TO,c,h,b.CLOSE_PATH):(e=0.5522847498*d,h=0.5522847498*p,f=c+f,k=a+k,g.push(b.BEGIN_PATH,b.MOVE_TO,c+d,a,b.LINE_TO,f-d,a,b.BEZIER_CURVE_TO,f-d+e,a,f,a+p-h,f,a+p,b.LINE_TO,f,k-p,b.BEZIER_CURVE_TO,f,k-p+h,f-d+e,k,f-d,k,b.LINE_TO,c+d,k,b.BEZIER_CURVE_TO,c+e,k,c,k-p+h,c,k-p,b.LINE_TO,c,a+p,b.BEZIER_CURVE_TO,c,a+p-h,c+e,a,c+d,a,b.CLOSE_PATH));return this},
drawImage:function(c,a,f,k,d,p,g,e,h){this.j.push(b.DRAW_IMAGE,c,a,f,k,d,p,g,e,h);return this},drawGraphics:function(c,a,f,k,d,p,g,e,h){this.j.push(b.DRAW_IDL,c.getIDL(),a,f,k,d,p,g,e,h);return this},drawEllipse:function(c,a,f,k){var d=this.j,p=c,g=c+f,e=a,h=a+k;f/=2;var l=k/2,x=0.5522847498*f,k=0.5522847498*l;c+=f;a+=l;f=c-x;x=c+x;l=a-k;k=a+k;d.push(b.BEGIN_PATH,b.MOVE_TO,c,h,b.BEZIER_CURVE_TO,x,h,g,k,g,a,b.BEZIER_CURVE_TO,g,l,x,e,c,e,b.BEZIER_CURVE_TO,f,e,p,l,p,a,b.BEZIER_CURVE_TO,p,k,f,h,c,h,b.CLOSE_PATH)},
beginPath:function(){this.j.push(b.BEGIN_PATH);return this},moveTo:function(c,a){this.j.push(b.MOVE_TO,c,a);return this},closePath:function(){this.j.push(b.CLOSE_PATH);return this},lineTo:function(c,a){this.j.push(b.LINE_TO,c,a);return this},polylineTo:function(c){for(var a=c.length,f=0,k=[];f<a;)k.push(b.LINE_TO,c[f++],c[f++]);this.j.push.apply(this.j,k);return this},quadraticCurveTo:function(b,a,c,f){return this.bezierCurveTo(b,a,b,a,c,f)},bezierCurveTo:function(c,a,f,k,d,p){this.j.push(b.BEZIER_CURVE_TO,
c,a,f,k,d,p);return this},fillText:function(c,a,f,k,d){var p=this.j,k=e(k)==="number"?k:a+1,d=e(d)==="number"?d:f;p.push(b.FILL_TEXT,c,a,f,k,d);return this},strokeText:function(c,a,f,k,d){var p=this.j,k=e(k)==="number"?k:a+1,d=e(d)==="number"?d:f;p.push(b.STROKE_TEXT,c,a,f,k,d);return this}})})();ovi.provide("nokia.maps.gfx.SvgParser");
(function(){function e(a){for(var a=a.replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])(\-|\+)([0-9])/g,"$1 $2$3").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" "),b=0,c=a.length;b<c;b++)a[b]=+a[b];return a}function l(a){a=b.FontHelper.Qh(a);return+a.substr(0,a.length-2)}function h(a,b){var c=a.getAttribute(b);return c?l(c):0}function d(a,b,c){for(;a&&a.nodeType===1;){if(a.getAttribute(b))return a.getAttribute(b);a=a.parentNode}return c}var c=Math.PI,g=nokia.maps,b=g.util,f=b.Matrix3D,r=
b.FontHelper.toString,a=nokia.maps.gfx,q=a.Graphics,k=a.Color.parseCss,m=a.IDL.opcodes,a=document.documentElement,p=g.dom.getStyle(a,"fontFamily"),z=g.dom.getStyle(a,"fontSize");nokia.maps.gfx.SvgParser=new ovi.Class({svg:function(a){var b=this.M,c=b&&b.getIDL(),k=c?b.getWidth():h(a,"width"),d=c?b.getHeight():h(a,"height"),m=a.getAttribute("viewBox"),p=m?m.split(" "):[0,0,k,d],m=k/p[2],g=d/p[3],q=-p[0]*m,p=-p[1]*g;c||b.beginImage(k+0,d+0);b.getIDL().matrix=b.getIDL().matrix.concat(new f([[m,0,0,q],
[0,g,0,p],[0,0,1,0]]));this.li(a)},rect:function(a){var b=h(a,"x"),c=h(a,"y"),f=h(a,"width"),k=h(a,"height"),d=h(a,"rx"),m=h(a,"ry")||d;this.M.drawRect(b,c,f,k,d,m);this.Fa(a,!0)},circle:function(a){var b=h(a,"cx"),c=h(a,"cy"),f=h(a,"r");this.M.drawEllipse(b-f,c-f,2*f,2*f);this.Fa(a,!0)},ellipse:function(a){var b=h(a,"cx"),c=h(a,"cy"),f=h(a,"rx"),k=h(a,"ry");this.M.drawEllipse(b-f,c-k,2*f,2*k);this.Fa(a,!0)},line:function(a){var b=this.M,c=h(a,"x1"),f=h(a,"y1"),k=h(a,"x2"),d=h(a,"y2");b.beginPath();
b.moveTo(c,f);b.lineTo(k,d);this.Fa(a,!0)},polyline:function(a){var b=this.M,c=e(a.getAttribute("points")),f=c.length,k=2;b.beginPath();for(b.moveTo(c[0],c[1]);k<f;k+=2)b.lineTo(c[k],c[k+1]);this.Fa(a,!0)},polygon:function(a){var b=this.M,c=e(a.getAttribute("points")),f=c.length,k=2;b.beginPath();for(b.moveTo(c[0],c[1]);k<f;k+=2)b.lineTo(c[k],c[k+1]);b.closePath();this.Fa(a,!0)},path:function(a){var b=this.M,c=b.getIDL(),f;f=a.getAttribute("d").replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])\-/g,
"$1 -").replace(/([0-9])\+/g,"$1 ").replace(/([a-zA-Z])([a-zA-Z])/g,"$1 $2").replace(/([a-df-zA-DF-Z])([0-9]|\.|\-|\+)/g,"$1 $2").replace(/([0-9])([a-df-zA-DF-Z])/g,"$1 $2").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" ");f=f.length===1&&f[0]===""?[]:f;var k=this.Fa(a,!1),a=k&1;k&=2;var d=0,p=0,g=-1,q,r,e,h,l,z,N,G,M,$,F,Z;for(c.push(m.BEGIN_PATH);;){if(!M){G=f[++g];if(!G)break;M=G.toLowerCase();G=G.toUpperCase()===G}$=M;if(M==="m")F=d=q=+f[++g]+(G?0:d),Z=p=r=+f[++g]+(G?0:p),c.push(m.MOVE_TO,q,
r),M=(N=+f[g+1])===N?"l":null;else if(M==="l")d=q=+f[++g]+(G?0:d),p=r=+f[++g]+(G?0:p),c.push(m.LINE_TO,q,r),M=(N=+f[g+1])===N?M:null;else if(M==="h")d=q=+f[++g]+(G?0:d),r=p,c.push(m.LINE_TO,q,r),M=(N=+f[g+1])===N?M:null;else if(M==="v")q=d,p=r=+f[++g]+(G?0:p),c.push(m.LINE_TO,q,r),M=(N=+f[g+1])===N?M:null;else if(M==="z")c.push(m.CLOSE_PATH),M=null,d=F,p=Z;else if(M==="c"||M==="q")e=+f[++g]+(G?0:d),h=+f[++g]+(G?0:p),M==="q"?(l=e,z=h):(l=+f[++g]+(G?0:d),z=+f[++g]+(G?0:p)),d=q=+f[++g]+(G?0:d),p=r=+f[++g]+
(G?0:p),c.push(m.BEZIER_CURVE_TO,e,h,l,z,q,r),M=(N=+f[g+1])===N?M:null;else if(M==="s"||M==="t")e==="c"||e==="q"||e==="s"||e==="t"?(l=d-l,z=p-z,e=d+l,h=p+z):(e=d,h=p),M==="t"?(l=e,z=h):(l=+f[++g]+(G?0:d),z=+f[++g]+(G?0:p)),d=q=+f[++g]+(G?0:d),p=r=+f[++g]+(G?0:p),c.push(m.BEZIER_CURVE_TO,e,h,l,z,q,r),M=(N=+f[g+1])===N?M:null;else{ovi.warn("SvgParser hit unknown command '"+M+"' at path element!");break}e=$}a&&b.stroke();k&&b.fill()},text:function(a){var b=this.M;b.getIDL();var c=this.Fa(a,!1),f=d(a,
"font",null),k,f=f?this.Jn(f):{};f.style=d(a,"font-style",null)||f.style;f.variant=d(a,"font-variant",null)||f.variant;f.weight=d(a,"font-weight",null)||f.weight;f.size=l(d(a,"font-size",null)||f.size||z)+"px";f.family=d(a,"font-family",null)||f.family||p;b.set("font",r(f));b.set("textAlign",d(a,"text-anchor","start").replace("middle","center"));if(c&&(k=a.textContent||a.text))f=h(a,"x"),a=h(a,"y"),c&1&&b.strokeText(k,f,a),c&2&&b.fillText(k,f,a)},image:function(){},linearGradient:function(){},radialGradient:function(){},
use:function(){},g:function(a){this.li(a)},Jn:function(a){var c=b.FontHelper.parse;this.te||(this.te={});var f=this.te[a];f||(f=this.te[a]=c(a));return f},Te:function(a,c){var f,k=ovi.type(a),d;if(k==="string")f=(d=nokia.maps.util.Uf(a)).documentElement;else if(k==="document"&&a.documentElement)f=(d=a).documentElement;ovi.type(f)!=="element"&&b.d("svgMarkup needs to be a valid SVG string or XML document!");this.M=c||new q;this.mi(f);return d},parseSvg:function(a){this.Te(a);return this.M.getIDL()},
parseSvgInfo:function(a){return(a=this.Te(a))?{width:this.M.getWidth(),height:this.M.getHeight(),document:a}:null},parseSvgToGraphics:function(a,b){this.Te(a,b);return this.M},mi:function(a){var b,c,f;if(f=this[a.nodeName])(b=this.M).save(),this.Vl(a),(c=a.getAttribute("transform"))&&this.Dl(c),f.call(this,a),b.restore()},li:function(a){for(a=a.firstChild;a;a=a.nextSibling)a.nodeType===1&&this.mi(a)},Vl:function(a){var b=a.getAttribute("style"),c,f=/([^:\s*]+)\s*:\s*([^;]+?)\s*(;|$)/g;if(b){for(;c=
f.exec(b);)a.setAttribute(c[1],c[2]);a.removeAttribute("style")}},Dl:function(a){for(var b,k=/([a-zA-Z]*)\s*\(([^\)]*)\)/g,d,m=this.M.getIDL(),p=m.matrix;b=k.exec(a);)switch(d=e(b[2]),b[1].toLowerCase()){case "matrix":p=p.concat(new f([[d[0],d[2],0,d[4]],[d[1],d[3],0,d[5]],[0,0,1,0]]));break;case "translate":p=p.translate(d[0],d.length>1?d[1]:0,0);break;case "scale":p=p.scale(d[0],d.length>1?d[1]:d[0],0);break;case "rotate":d.length>1&&(p=p.translate(d[1],d[2],0));p=p.rotateZ(-(d[0]/180)*c);d.length>
1&&(p=p.translate(-d[1],-d[2],0));break;case "skewx":p=p.skewX(d[0]);break;case "skewy":p=p.skewY(d[0])}m.matrix=p},Fa:function(a,b){var c=this.M,f=c.getIDL().matrix,m=0,p=d(a,"fill","#000"),g=d(a,"stroke","none");c.set("opacity",+d(a,"opacity","1"));p!=="none"&&(m|=2,c.set("fillColor",k(p,+d(a,"fill-opacity","1"))),b&&c.fill());if(g!=="none"){m|=1;var q,f=f.getScale();c.set("strokeColor",k(g,+d(a,"stroke-opacity","1")));(q=d(a,"stroke-width",0))&&c.set("lineWidth",l(q)*0.5*(f.x+f.y));c.set("lineCap",
d(a,"stroke-linecap","flat").replace("flat","butt"));c.set("lineJoin",d(a,"stroke-linejoin","miter"));c.set("miterLimit",+d(a,"stroke-miterlimit",4));b&&c.stroke()}return m}})})();ovi.provide("nokia.maps.geo.Strip");
(function(e){var l=e.geo.Coordinate,h=e.util,d=h.Coroutine,c=h.d,g=e.geo.Strip=new ovi.Class({initialize:function(b,c){this.internalArray=[];this.addAll(b,0,c)},destroy:function(){this.ob&&d.kill(this.ob)},internalArray:null,ob:null,Statics:{fromObject:function(b){if(b instanceof g)return b;if(ovi.type(b)!=="array")return new g;return new g(b.length&&ovi.type(b[0])==="string"?g.convertToArray(b.slice(1),b[0]):g.convertToArray(b,"auto"),"values lat lng alt")},convertToArray:function(b,f){if(!b)return[];
if(b.length===0||f==="unsafe values lat lng alt")return b;if(b instanceof g)return b.asArray();var d=f?f.split(" "):["auto"],a=[],q=!1,k,m,p=d.length,e=0;d[0]==="unsafe"&&(q=!0,d.splice(0,1),p--);for(p>4&&c("convertToArray: i > 4");p--;)k=d[p],(k=this.Io[k])?(d[p]=k[0],e+=k[1]):c("convertToArray: no member found");(e!==100||!d.length)&&c("convertToArray: counter does not match 100");(m=this.oe[d[0]])?m.call(this,q,b,a,d.slice(1)):c("convertToArray: function expected");return a},Io:{lat:["latitude",
1],lng:["longitude",2],alt:["altitude",0],unsafe:["unsafe",0],coords:["coords",100],auto:["auto",100],arrays:["arrays",97],values:["values",97]},Ul:{latitude:0,longitude:1,altitude:2},oe:{auto:function(b,c,d){h.isNumber(c[0])?g.oe.values(b,c,d,["latitude","longitude"]):g.oe.coords(b,c,d)},coords:function(b,f,d){var a=f.length,g,k;for(g=0;g<a;g++)b?k=f[g]:(k=l.fromObject(f[g]))||c("coords: expected geo.Coordinate"),d.splice(d.length,0,k.latitude,k.longitude,k.altitude)},values:function(b,c,d,a){g.Wg(!1,
b,c,d,a)},arrays:function(b,c,d,a){g.Wg(!0,b,c,d,a)}},Wg:function(b,f,d,a,q){var k=b?d[0].length:d.length,m=q.length,p=b?d.length:0,e,h;if(b)for(;p--;)d[p].length!==k&&c("_convertValues index out of bound");else k%m&&c("_convertValues members length is incorrect"),k/=m;for(p=0;p<k;p++){h=[p*3,0,void 0,void 0,void 0];for(e=0;e<m;e++)h[g.Ul[q[e]]+2]=b?d[e][p]:d[p*m+e];f||l.isValid.apply(this,h.slice(2))?a.splice.apply(a,h):c("_convertValues: expected coords")}}},add:function(b,f){var d=this.getLength(),
b=l.fromObject(b),f=~~(f===0||f>0?f:d);f>d&&c("add: index out of bound");b&&this.Ea(this,f,1,this.internalArray.splice(f*3,0,b.latitude,b.longitude,b.altitude))},addAll:function(b,f,d){var a=this.getLength(),f=~~(f===0||f>0?f:a);f>a?c("addAll: index out of bound"):this.splice(f,0,b,d)},addAllAsync:function(b,f,g,a){var q=this,k=q.getLength(),m,p=b[0]instanceof l?1:g?g.match("alt")?3:2:2,f=~~(f===0||f>0?f:k);f>k?c("addAll: index out of bound"):m=d.create("nokia.maps.geo.Strip#addAllAsyncCo",function(a){for(var b,
c,f=a.idx,k=a.coords,m=a.multiplier;(b=k.length)>0;)if(b=k.splice(0,(c=300*m)<b?c:b),q.splice(f,0,b,a.mode),f=a.idx=f+300,d.shallYield())return d.yield();a.callback&&a.callback()},"coords","idx","mode","multiplier","callback");q.ob=m(b,f,g,p,a);q.ob.onTerminated=function(){q.ob=null};q.ob.run()},set:function(b,f){b=+b;(b<0||b>this.getLength()||isNaN(b))&&c("geo.Strip#set: index out of bounds");(f=l.fromObject(f))&&this.Ea(this,b=~~b,1,this.internalArray.splice(b*3,3,f.latitude,f.longitude,f.altitude))},
remove:function(b){b=+b;b<0||b>=this.getLength()||isNaN(b)?c("geo.Strip#remove: index out of bound"):this.Ea(this,b=~~b,0,this.internalArray.splice(b*3,3))},splice:function(b,f,d,a){(b=+b)>=0&&b<=this.getLength()&&(f=+f)>=0||c("splice: arguments out of bound, idx="+b+", remove="+f);d=g.convertToArray(d,a);if(f||d.length)this.Ea(this,b=~~b,d.length/3,this.internalArray.splice.apply(this.internalArray,[b*3,~~f*3].concat(d)))},get:function(b){var f=this.internalArray;!(b>=0&&b<f.length/3)&&c("get: index out of bound");
b=~~b*3;return new l(f[b],f[b+1],f[b+2],1)},getLatLng:function(b,f){var d=[],a,g=0;a=this.getLength();var k,b=+b;k=f<0?a+f:f?f+b>a?a:f+b:b+1;(isNaN(b)||b<0||(k=~~k)<b)&&c("getLatLng: index and count combination out of bounds");for(a=~~b;a<k;a++)d[g++]=this.internalArray[a*3],d[g++]=this.internalArray[a*3+1];return d},getLength:function(){return this.internalArray.length/3>>>0},asArray:function(){return[].concat(this.internalArray)},Ea:function(){var b=this.ua,c;if(b)for(c=0;c in b;)b[c++].apply(b[c++],
arguments)},addObserver:function(b,c){typeof b!=="function"&&h.d("addObserver: callback is not a function");var d=this.ua||(this.ua=[]),a=d.length;d[a++]=b;c&&(d[a]=c);d.length=++a},removeObserver:function(b,c){var d,a,g=0;if(d=this.ua)for(a=d.length;g<a;)d[g]===b&&d[g+1]===c&&(d.splice(g,2),a===2&&delete this.ua),g+=2;return this}})})(nokia.maps);ovi.provide("nokia.maps.util._packaging.base");ovi.provide("nokia.maps.dom.Event");
(function(e){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Event)){var l=!l,h=!l,d=nokia.maps.util.now,c=nokia.maps.util.d,g=e.Event=function(b){if(b)for(var c in b)this[c]=b[c];if(!this.timeStamp)this.timeStamp=d()};ovi.extend(g.prototype,{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,bubbles:l,canBubble:l,canSicker:l,cancelable:l,defaultPrevented:h,PROPAGATION_OK:0,PROPAGATION_STOP:1,PROPAGATION_STOP_IMMEDIATE:2,propagation:0,stopPropagation:function(){var b=this.nativeEvent;if(this.propagation===
0&&(this.propagation=1,b))try{b.stopPropagation?b.stopPropagation():b.cancelBubble=l}catch(c){}return this},cancel:function(){return this.stopImmediatePropagation().preventDefault()},stopImmediatePropagation:function(){var b=this.nativeEvent;if(this.propagation!==2&&(this.propagation=2,b))try{b.stopImmediatePropagation?b.stopImmediatePropagation():b.cancelBubble=l}catch(c){}return this},preventDefault:function(){var b=this.nativeEvent;if(!this.defaultPrevented&&(this.defaultPrevented=l,b))try{b.preventDefault?
b.preventDefault():b.returnValue=h}catch(c){}return this},DOM_INPUT_METHOD_UNKNOWN:0,DOM_INPUT_METHOD_KEYBOARD:1,DOM_INPUT_METHOD_PASTE:2,DOM_INPUT_METHOD_DROP:3,DOM_INPUT_METHOD_IME:4,DOM_INPUT_METHOD_OPTION:5,DOM_INPUT_METHOD_HANDWRITING:6,DOM_INPUT_METHOD_VOICE:7,DOM_INPUT_METHOD_MULTIMODAL:8,DOM_INPUT_METHOD_SCRIPT:9,DOM_KEY_LOCATION_STANDARD:0,DOM_KEY_LOCATION_LEFT:1,DOM_KEY_LOCATION_RIGHT:2,DOM_KEY_LOCATION_NUMPAD:3,DOM_KEY_LOCATION_MOBILE:4,DOM_KEY_LOCATION_JOYSTICK:5,getModifierState:function(){c("NOT IMPLEMENTED!")},
DOM_DELTA_PIXEL:0,DOM_DELTA_LINE:1,DOM_DELTA_PAGE:2,deltaMode:0,preventUnload:function(b){if(this.type==="beforeunload")this.nativeEvent.returnValue=b;return this},clone:function(){return new g(this)}})}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.BitmapImage");
(function(){function e(a,b){return typeof a==="number"?a:b}var l=Math.min,h=Math.max,d=ovi.browser.msie&&ovi.browser.version<10,c=ovi.browser.version>=8,g=nokia.maps.gfx,b=nokia.maps.dom,f=b.Page.browser,f=b.Page.browser,r=b.setStyle,a=g.Image,q=nokia.maps.util.d,k=nokia.maps.gfx.BitmapImage=new ovi.Class({Extends:nokia.maps.gfx.Image,Statics:{utilizeCanvas:f.mobile?f.safari:f.chrome||f.mozilla||f.opera},initialize:function(b,c,f,k,d,g){this.c=a.c++;this.width=f||0;this.height=k||0;this.offsetX=e(d);
this.offsetY=e(g);typeof b==="string"?this.src=b:b&&img.nodeName==="IMG"?(this.src=b.src,c||(c=b.ownerDocument)):q("image");this.F=c||document},isBitmap:1,getDocument:function(){return this.F},Rh:function(){var a=-1,b=this.ec,c=b&&b.length||0,f;for(this.ec=null;++a<c;){f=b[a];try{f[0].apply(f[1],f[2])}catch(k){ovi.warn("Exception in user defined callback within gfx.BitmapImage!"),ovi.debug(k)}}},Hi:function(a){this.naturalWidth=a.naturalWidth||a.width;this.naturalHeight=a.naturalHeight||a.height;
this.width=this.width||a.naturalWidth||a.width;this.height=this.height||a.naturalHeight||a.height},Bn:function(a,b){var c=-1,k=this.We,d=k&&k.length||0;this.state=b?1:-1;if(b){this.Hi(a);f.msie&&this.width===0&&(a.ownerDocument.body.appendChild(a),this.Hi(a),a.ownerDocument.body.removeChild(a));for(;++c<d;)this.L(k[c]);this.We=null}this.Rh()},prepare:function(a,c){var f,k,d=!1,g,c=c||this;if(typeof a==="function"){f=this.ec||(this.ec=[]);g=[].concat(arguments);g.splice(0,2,this);for(k=f.length;k--;)if(f[k][0]===
a&&f[k][1]===c){d=!0;break}d||f.push([a,c,g])}if(this.state===1)this.Rh();else if(this.state!==0)this.state=0,this.Jb=this.Jb||this.F.createElement("IMG"),b.imgLoader.request(this.Jb,this.src,this.Bn,this)},L:function(a){var b=this.width&&this.height,c,f,g,q,e,v;if(typeof this.state!=="number"||this.state<=0)if(this.prepare(),this.state<=0)return a=a||this.F.createElement("DIV"),r(a,{position:"absolute",overflow:"hidden",width:b?this.width+"px":"0",height:b?this.height+"px":"0"}),(this.We||(this.We=
[])).push(a),a;b=this.offsetX!==void 0;if(k.utilizeCanvas)b&&(g=h(0,l(this.offsetX,this.naturalWidth)),q=h(0,l(this.offsetY,this.naturalHeight)),e=l(this.width+this.offsetX-g,this.naturalWidth-g),v=l(this.height+this.offsetY-q,this.naturalHeight-q)),c=this.F.createElement("CANVAS"),c.width=this.width,c.height=this.height,f=c.getContext("2d"),b?e&&v&&f.drawImage(this.Jb,g,q,e,v,0,0,e,v):f.drawImage(this.Jb,0,0,this.width,this.height),this.o=c;else{try{c=this.Jb.cloneNode(!1)}catch(y){c=this.F.createElement("IMG"),
c.src=this.src}b&&r(c,{position:"absolute",left:-this.offsetX+"px",top:-this.offsetY+"px"});if(b||d){a=a||this.F.createElement("DIV");r(a,{position:"absolute",overflow:"hidden",width:this.width+"px",height:this.height+"px"});if(d&&(c.style.position="absolute",!b))c.style.width=this.width+"px",c.style.height=this.height+"px";a.appendChild(c);return a}c.style.width=this.width+"px";c.style.height=this.height+"px"}if(a)return a.style.width=this.width+"px",a.style.height=this.height+"px",a.appendChild(c),
a;return c},createElement:function(a){var b=this.L();this.setOpacity(b,a);return b},setOpacity:function(a,b){var f=typeof b==="number"&&b>=0&&b<=1?b:this.opacity,k=a.ownerDocument,g,e=Math.round(f*100);((f=+f)!==f||f<0||f>1)&&q("opacity!");a.$n$opacity=f;if(d){if(f<1&&!a.$n$opacityHack){for(a.$n$opacityHack=!0;a.firstChild;)a.removeChild(a.firstChild);g=k.createElement("DIV");if(!c)g.style.filter="alpha(opacity="+e+")";r(g,{position:"relative",width:this.width+"px",height:this.height+"px",overflow:"hidden"});
a.$n$alphaImageLoader="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod='scale', src='"+this.src+"')";k=k.createElement("DIV");k.style.filter=a.$n$alphaImageLoader+(c?"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")":"");r(k,{position:"absolute",top:(this.offsetX||0)+"px",left:(this.offsetY||0)+"px",width:this.width+"px",height:this.height+"px"});g.appendChild(k);a.appendChild(g)}if(f<1||a.$n$opacityHack)if(a.firstChild.firstChild.style.filter=a.$n$alphaImageLoader+
(c?"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")":""),!c)a.firstChild.style.filter="alpha(opacity="+e+")"}else a.style.opacity=f;return this},clone:function(a,b,c,f,d){return new k(this.src,a||this.F,b||this.width,c||this.height,e(f,this.offsetX),e(d,this.offsetY))}});a.fromObjectListener.push(function(a,b){return a instanceof k?a:typeof a==="string"&&a.indexOf("<svg")===-1||a&&a.nodeName==="IMG"?new k(a,b):void 0})})();ovi.provide("nokia.maps.gfx.GraphicsImage");
(function(){var e=Array.prototype.slice,l=nokia.maps.gfx,h=nokia.maps.util,d=h.d,c=ovi.type,g=l.IDL,b=l.Painter,f=l.Image,r=l.Graphics,a=new l.SvgParser,d=nokia.maps.util.d,q=nokia.maps.gfx.GraphicsImage=new ovi.Class({Extends:nokia.maps.gfx.Image,initialize:function(a,m,p,q){var s=e.call(arguments,0),u=a,l=a;this.c=f.c++;if(c(a)!=="function")l instanceof r&&(u=l.getIDL()),u instanceof g?(this.j=u,this.width=u.width,this.height=u.height,this.state=1,a=h.u):d("GraphicsImage: Illegal render function or IDL!");
this.F=p||document;this.Xb=a;this.am=m||this;this.opacity=1;s.splice(0,4,null);this.Fl=s;this.Se=q instanceof b?q:new b.defaultPainter},isGraphics:1,getDocument:function(){return this.F},getIDL:function(){return this.j},prepare:function(a,b){var f,d;if(!this.state)f=new r,d=this.Fl,d[0]=f,this.Xb.apply(this.am,d),this.j=f.getIDL(),this.width=this.j.width,this.height=this.j.height,this.state=1;if(c(a)==="function")this.ec||(this.ec=[]),d=[].concat(arguments),d.splice(0,2,this),a.apply(b||this,d)},
createElement:function(a){this.state||this.prepare();return this.Se.createElement(this.j,this.F,typeof a==="number"?a:this.opacity)},setOpacity:function(a,b){this.Se.setOpacity(a,b);return this},clone:function(a){var b,c;b=new q(this.Xb);for(c in this)b[c]=this[c];if(a)b.F=a;return b}});f.fromObjectListener.unshift(function(b){if(b instanceof q)return b;if(b instanceof g)return new q(g);if(typeof b==="string"&&b.indexOf("<svg")>=0)return new q(a.parseSvg(b))})})();ovi.provide("nokia.maps.geo.BoundingBox");
(function(e){function l(a,b){var c=a+b/2;c-=c>180?360:0;return c}function h(a,b){var c=b-a;c+=c<0?360:0;return c}var d=Math,c=d.min,g=d.max,b=d.abs,f=e.geo,r=e.util.d,a=f.Coordinate,q=f.BoundingBox=function(b,c,f){var b=a.fromObject(b),d;if(!b||c&&!(d=a.fromObject(c)))r(b?"bottomRight":"topLeft");this.topLeft=b;d?f||b.latitude<d.latitude&&r("BoundingBox top latitude < bottom latitude"):d=b;if((this.bottomRight=d)&&b.longitude>d.longitude)this.isCDB=!0};ovi.extend(q.prototype,{isCDB:!1,qg:void 0,Ef:void 0,
Rc:void 0,equals:function(a){return a&&this.topLeft.equals(a.topLeft)&&this.bottomRight.equals(a.bottomRight)},contains:function(b){var c,f;b instanceof a&&(b=new q(b,b));b=this.merge(b);f=b.getCenter();c=this.getCenter();return f.latitude===c.latitude&&f.longitude===c.longitude&&this.getHeight()===b.getHeight()&&this.getWidth()===b.getWidth()},intersects:function(a){var b=this.topLeft,c=this.bottomRight,f=a.topLeft,a=a.bottomRight,d=b.longitude<=c.longitude,g=f.longitude<=a.longitude,q=b.longitude<
a.longitude,r=f.longitude<c.longitude;return c.latitude<=f.latitude&&a.latitude<=b.latitude&&(!d&&(!g||q||r)||!g&&(q||r)||q&&r)},isEmpty:function(){return this.topLeft.longitude===this.bottomRight.longitude&&this.topLeft.latitude===this.bottomRight.latitude},getCenter:function(){var b=this.Rc;if(b===void 0)var b=this.topLeft.longitude,c=this.bottomRight.latitude,b=new a(c+(this.topLeft.latitude-c)/2,l(b,h(b,this.bottomRight.longitude)));return b},getWidth:function(){var a=this.qg;a===void 0&&(a=h(this.topLeft.longitude,
this.bottomRight.longitude));return a},getHeight:function(){var a=this.Ef;a===void 0&&(a=this.topLeft.latitude-this.bottomRight.latitude);return a},resizeToCenter:function(b){b instanceof a||r("Parameter center must be an instance of nokia.maps.geo.Coordinate");var c=this.topLeft.longitude,f=this.topLeft.latitude,d=this.bottomRight.longitude,g=this.bottomRight.latitude,e=l(c,h(c,d)),w=b.latitude-g-(f-g)/2,x=b.longitude-e,x=x>180||x<-180?-(e+b.longitude):x,b=c+(x<0?2*x:0);d+=x>0?2*x:0;d=d>180?d-360:
d;f=w>0?f+2*w:f;f>=90&&(f=90);g=w<0?g+2*w:g;g<=-90&&(g=-90);return new q(new a(f,b<-180?360+b:b),new a(g,d))},merge:function(a){a&&a.push?a.push(this):a=[this,a];return q.merge(a)}});ovi.extend(q,{fromObject:function(b,c){var f;if(b&&(f=b.length)!==void 0){if(f===2&&b[0]instanceof a&&b[1]instanceof a)return new q(b[0],b[1],c);if(f===4)return new q(new a(b[0],b[1],void 0,c),new a(b[2],b[3],void 0,c),c)}return b instanceof q?b:null},coverAll:function(a){(!a||a.length===void 0)&&r("no argument was given, array is expected");
!a.length&&r("empty array was given");for(var b=a[0],c=b.latitude,f=b.longitude,d=[c,f,c,f],g=a.length;--g;)b=a[g],d=q.Ic(d,[c=b.latitude,f=b.longitude,c,f]);return q.fromObject(d)},fromPath:function(a,b){!a&&r("no argument was given, geo strip is expected");!(a instanceof f.Strip)&&r("geo strip is expected");var c=null,d,g,e=a.getLength(),h;if(e)if(e===1)d=a.get(0),c=[d.latitude,d.longitude,d.latitude,d.longitude];else if(e===2)d=a.getLatLng(0),d.push(d[0]),d.push(d[1]),g=a.getLatLng(1),g.push(g[0]),
g.push(g[1]),c=q.fromObject(q.Ic(d,g),b);else{d=a.getLatLng(0);g=a.getLatLng(1);q.qh(d=[d[0],d[1],g[0],g[1]]);c=d;for(h=2;h<e;h++)d=a.getLatLng(h-1),g=a.getLatLng(h),q.qh(d=[d[0],d[1],g[0],g[1]]),c=q.Ic(c,d)}return q.fromObject(c,b)},merge:function(a){(!a||!a.length||!(a[0]instanceof q))&&r("array of bounding boxes is expected");for(var b=a[0],c=b.topLeft,f=b.bottomRight,d=[c.latitude,c.longitude,f.latitude,f.longitude],g=a.length;--g;)(b=a[g])instanceof q?d=q.Ic(d,[(c=b.topLeft).latitude,c.longitude,
(f=b.bottomRight).latitude,f.longitude]):r("it is possible to merge bounding boxes only");return q.fromObject(d)},Ic:function(a,b){var f,d,q=a[1],r=a[3],e=b[1],x=b[3],v,y,B,C,A;f=c(a[2],b[2]);d=g(a[0],b[0]);v=h(q,r);y=l(q,v);B=h(e,x);A=l(e,B)-y;A+=A-1.0E-6<0?360:0;A-1.0E-6<180?(y=q,C=x):(A=360-A,y=e,C=r);A=A+v/2+B/2;A+5.0E-7>=360?(y=-180,C=180):A-5.0E-7<v?(y=q,C=r):A-5.0E-7<B&&(y=e,C=x);return[d,y,f,C]},qh:function(a){var c=a[1],f=a[3],d=a[0],g=a[2];if(c>f&&f-c>180||c<f&&c-f<-180||f<c&&b(f-c)<180)a[1]=
f,a[3]=c;d<g&&(a[0]=g,a[2]=d)}})})(nokia.maps);ovi.provide("nokia.maps.geo.QuadTree");
(function(e){function l(b,c){var d,a,g,k;if(a=c.length){d=b.length;for(g={};d--;)g[b[d].id]=1;for(;a--;)(k=c[a]).id in g||b.push(k)}}var h=e.geo,d=e.util,c=h.BoundingBox,e=d.QuadTree,g=e.Entry,e=h.QuadTree=new ovi.Class({initialize:function(b){this.K=new d.QuadTree(b,180,90,0,0);this.Qc=ovi.Array()},isCDB:!1,getBoundingBox:function(){var b;if(!this.ca&&!this.isCDB&&(b=this.K.getExtremes()))this.ca=new c([-b["4"],b["7"]],[-b["6"],b["5"]]);return this.ca||null},insertBoundingBox:function(b){var c=b.topLeft,
d=b.bottomRight,a=c.longitude,q=d.longitude,k;this.ca=null;if(b.isCDB)this.Qc.push(k=new g(null,a,-c.latitude,q+360,-d.latitude)),this.isCDB=!0;return k||this.K.insertSorted(a,-c.latitude,q,-d.latitude)},insertCoordinate:function(b){var c=b.longitude,b=-b.latitude;this.ca=null;return this.K.insertSorted(c,b,c,b)},insertLine:function(b,c,d,a){var q,k;this.ca=null;c<a?q=c:(q=a,a=c);b<d?(c=-d,b=-b):(c=-b,b=-d);if(a-q>180)this.Qc.push(k=new g(null,a,c,q+360,b)),this.isCDB=!0;return k||this.K.insertSorted(q,
c,a,b)},insertLineAlt:function(b,c,d,a,g){return this.insertLine(b,c,a,g)},remove:function(b){var c;if(b.la)this.K.remove(b);else if((b=(c=this.Qc).indexOf(b))>=0)c.splice(b,1),this.isCDB=c.length>0;this.ca=null},ze:function(b,c,d,a,g){for(var k=this.Qc,m=k.length,p,e=[],h=b+360,u=d+360;m--;)p=k[m],this.Ch(p,b,c,d,a,g)?e.push(p):this.Ch(p,h,c,u,a,g)&&e.push(p);return e},Ch:function(b,c,d,a,g,k){var m=b[7],p=b[4],e=b[5],b=b[6];return!(m>a||e<c||p>g||b<d)&&(k||m>=c&&e<=a&&p<=g&&b>=d)},intersectBoundingBox:function(b,
c){var d=this.K,a=b.topLeft,g=b.bottomRight,k=-a.latitude,a=a.longitude,m=-g.latitude,g=g.longitude,p;b.isCDB?(p=d.intersect(-180,k,g,m,c),l(p,d.intersect(a,k,180,m,c)),l(p,this.ze(g,k,a+360,m,c))):(p=d.intersect(a,k,g,m,c),l(p,this.ze(a,k,g,m,c)));return p},intersectCoordinate:function(b){var c=-b.latitude,b=b.longitude,d=this.K.intersect(b,c,b,c,1);l(d,this.ze(b,c,b,c,1));return d}})})(nokia.maps);ovi.provide("nokia.maps.geo.Shape");
(function(e){function l(a,b){return a/b<0&&g(b-a)>180}var h=Math,d=h.min,c=h.max,g=h.abs,b=h.pow,f=h.sqrt,r=h.round,a=e.geo,q=e.util,k=q.Point,m=q.math.clipping.clipStrips,p=q.math.clipping.clip,z=a.Coordinate,s=a.BoundingBox,u=q.Coroutine,w=[],x=!x,v=!x;a.Shape=new ovi.Class({Extends:a.Strip,initialize:function(b,c){this.K=new a.QuadTree(+c||10);this._super(w);this.Fb=!!b;this.Ti=[];this.Gb=0;this.addObserver(this.zm,this)},Statics:{hp:w,rh:function(b,c){var f=0,d=b.arr,k,g,m,p,q,e,r,h,s=d.length;
b.shape?(p=+d[b.i-2],h=+d[b.i-1]):(b.shape=new a.Shape(b.closed),b.i=0,s>2&&(p=+d[b.i++],h=+d[b.i++],b.shape.internalArray.push(p,h,0)));g=b.shape;m=g.K;q=g.Ti;for(k=g.internalArray;b.i<s;)if(e=+d[b.i++],r=+d[b.i++],k.push(e,r,0),(p=m.insertLine(p,h,e,r)).nb=q.length,q.push(p),g.Gb+=l(r,h),p=e,h=r,!(++f&15)&&u.shallYield())return u.yield();if(g.closed&&d.length>=2)e=+d[0],r=+d[1],k.push(e,r,0),(p=m.insertLine(p,h,e,r)).nb=q.length,p.$closing=1,q.push(enty),g.Gb+=l(r,h);if(c&&b.callback)return u.kill(c),
b.callback.call(b.ctx,g);return g},fromLatLngArray:function(a,b,c,f){var d;if(q.isFunction(c))return d=u.create("nokia.maps.geo.Shape#fromLatLngArrayCo",this.rh,"arr","closed","callback","ctx"),this.sh=d(a,b,c,f||void 0),null;return this.rh({arr:a,closed:b},null)}},destroy:function(){this.sh&&u.kill(this.sh);this._super()},getBoundingBox:function(){var a,b,c=this.ca;if(!c)c=this.K.getBoundingBox()||s.fromPath(this),this.Fb&&this.Gb&&(a=this.get(0),b=this.get(this.getLength()-1),c=c.merge(s.coverAll([a,
b]))),this.ca=c;return this.ca},$p:function(a){var b=this.internalArray;this.internalArray=a.internalArray;this.Ea(this,0,a.internalArray.length/3,b)},zm:function(a,b,f,k){var a=this.Fb,g=this.K,m=this.Ti,p=m.length,q=k.length/3,k=c(b-1,0),e;this.ca=null;a&&p&&g.remove(m.splice(--p,1)[0]);if(q){p=d(b-1+q,p-1);for(e=k;e<=p;e++)g.remove(m[e]);q=[k,p-k+1]}else p>0&&b<=p&&b>0?(g.remove(m[k]),q=[k,1]):q=[k,0];k=c(b-1,0);p=d(b-1+f,this.getLength()-2);for(e=k;e<=p;e++)q.push(g.insertLineAlt.apply(g,this.internalArray.slice(e*
3,e*3+6)));m.splice.apply(m,q);p=m.length;a&&p&&((m[p++]=g.insertLine.apply(g,this.getLatLng(this.getLength()-1).concat(this.getLatLng(0)))).$closing=1);for(e=p;e--;)m[e].nb=e;this.Gb=this.Xg(this.internalArray,3)},Yg:function(a,b,f){if(!this.Fb)return!1;for(var k=b.length,g=1,m=0,p=b[0],q,e;g<k;g++)q=b[g],e=p.y+(q.y-p.y)*((a.x-p.x)/(q.x-p.x)),d(p.x,q.x)<=a.x&&c(p.x,q.x)>=a.x&&(f?e>a.y:e<a.y)&&m++,p=q;return!!(m%2)},Xg:function(a,b){var c=this.Fb?0:b,f=0,d=a.length,k=a[c?1:d-b+1],g;for(++c;c<d;c+=
b)f+=l(g=a[c],k),k=g;return f},Km:function(a,b){return a.nb-b.nb},bd:function(a,b,c,f){function d(a,b){m&&g(m-b)>180&&(b+=m<0?-360:360);m=b;return c.latLngToPixel(a,b+(f?f:0))}var k=[],m,p=a.length,q,e=0;for(q=0;q<p;q+=2)k[e++]=d(a[q],a[q+1]);b&&(k[e]=d(a[0],a[1]));return k},Ci:function(a,b){for(var c=[],f=Infinity,d=-1,k,c=0;c<a.length;c+=2)k=g(a[c+1]-b),k+=k>180?360-k:k,k<f&&(f=k,d=c);if(c>0)return c=a.splice(d,a.length-d),c.concat(a);return a},sl:function(a){var b=a.length,c,f=0,d,k,m,p=[],q;k=
v;for(c=0;c<b;c+=2)p[f++]=a[c],p[f++]=a[c+1],m=new z(a[c],a[c+1],void 0,x),d=a[c+2]!==void 0?new z(a[c+2],a[c+3],void 0,x):new z(a[0],a[1],void 0,x),m=s.coverAll([m,d]),!k&&g(a[c+1])!==180&&g(d.longitude)!==180&&m.contains(new z(m.topLeft.latitude,180,void 0,x))&&(k=g(d.latitude-a[c]),m=g(d.longitude-a[c+1]),m+=m>180?-360:0,q=g(180-d.longitude),q+=q>180?-360:0,k/=g(m)/g(q),d=d.latitude+(d.latitude>a[c]?-k:k),k=a[c+1]>0?180:-180,p[f++]=d,p[f++]=k,p[f++]=d,p[f++]=-k,k=x);return p.length?p:a},tm:function(a,
b,c,f){var d=[],k=a.length,m,p,q,e,r,h,s=v;for(m=0;m<k;m+=f)if(p=a[m],q=a[m+1],m==0||((h=g(r-q))>180?360-h:h)>c||g(e-p)>b)!s&&g(q)==180&&(d.push(p),d.push(q),d.push(p),d.push(-q),s=x),d.push(p),d.push(q),e=p,r=q;return d},wh:function(a){var c=[],d,g=a,m,p;do{m=r((g.origx?g.origx:g.x)*100)/100;p=r((g.origy?g.origy:g.y)*100)/100;if(!d||f(b(d.x-m,2)+b(d.y-p,2))>0.01)d=new k(m,p),c.push(d);g=g.next}while(g&&g!=a);return c},clip:function(b,c,f,d,q,e,r){var h=this.Fb,u=this.internalArray,v=c.topLeft,G=
c.bottomRight,M=v.y,$=G.y,F=v.x,Z=G.x,ba=c.getCenter(),c=new k(Z,M),J=new k(F,$),c=[v,c,G,J],J=b.pixelToGeo(v),G=b.pixelToGeo(G),V=b.pixelToGeo(ba),G=s.fromPath(new a.Strip([J.latitude,J.longitude,J.latitude,V.longitude,J.latitude,G.longitude,G.latitude,G.longitude,G.latitude,V.longitude,G.latitude,J.longitude],"unsafe values lat lng")),V=!1,H=0,P,za=-2,J=[],T,H=[],pa,fa,K=0,da=0,W;P=[];var ja=[],X;if(f)f/=2,da=ba.x,K=ba.y,H=b.xyToGeo(da-f,K-f),P=b.xyToGeo(da+f,K+f),K=g(H.latitude-P.latitude),da=
g(H.longitude-P.longitude);if(h){J=[[]];P=this.tm(u,K,da,3);X=s.fromPath(new nokia.maps.geo.Strip(P,"unsafe values lat lng"),x);X=X.merge((new s(new z(P[P.length-2],P[P.length-1],void 0,x),void 0,x)).merge(new s(new z(P[0],P[1],void 0,x),void 0,x)));if((H=X.getWidth())<360&&X.topLeft.longitude==-180)X=new s(new z(X.topLeft.latitude,180,void 0,x),X.bottomRight,x);H<360&&X.bottomRight.longitude==180&&(X=new s(X.topLeft,new z(X.bottomRight.latitude,-180,void 0,x),x));T=G;if(H<360&&e>0)T=X.getCenter().longitude,
W=b.geoToPixel(X.topLeft),W.x-=r,W.y-=r,W=b.pixelToGeo(W),e=b.geoToPixel(X.bottomRight),e.x+=r,W.y+=r,e=b.pixelToGeo(e),T=s.fromPath(new a.Strip([W.latitude,W.longitude,W.latitude,T,W.latitude,e.longitude,e.latitude,e.longitude,e.latitude,T,e.latitude,W.longitude],"unsafe values lat lng"),x);P=this.Ci(this.sl(P),X.topLeft.longitude);J[0]=this.bd(P,h,b);if(X.getWidth()==360&&this.Xg(P,2)%2==1){J[0][1].x>J[0][J[0].length-1].x&&(J[0]=J[0].reverse());ja=[];H=J[0].length-1;for(f=0;f<H;f++)u=J[0][f],ja[f]=
new k(u.x-2*b.w,u.y),ja[f+H]=new k(u.x-b.w,u.y),ja[f+2*H]=new k(u.x,u.y),ja[f+3*H]=new k(u.x+b.w,u.y),ja[f+4*H]=new k(u.x+2*b.w,u.y);J[0]=ja;W=b.latLngToPixel(d?90:-90,0);W.y=d?W.y-51:W.y+51;e=W.clone();W.x=J[0][J[0].length-1].x+1;e.x=J[0][0].x-1;J[0].push(W,e)}V=this.Yg(v,J[0],d);ja=m(J,M,F,Z,$);W=ja.length;H=J;X.getWidth()<360&&X.contains(new z(X.topLeft.latitude,180,void 0,x))&&(J=[],P=this.Ci(P,X.bottomRight.longitude),J[0]=this.bd(P,h,b),V=!!(V^this.Yg(v,J[0],d)),ja=m(J,M,F,Z,$),W+=ja.length,
H=H.concat(J));X.getWidth()<360&&!X.contains(new z(X.topLeft.latitude,180,void 0,x))&&T.contains(new z(X.topLeft.latitude,180,void 0,x))&&(e=X.getCenter().longitude>0?-360:360,T=this.bd(P,h,b,e),J=[T],ja=m(J,M,F,Z,$),W+=ja.length,H.push(T))}else{r=this.K.intersectBoundingBox(G,x).sort(this.Km);H=r.length;for(d=0;d<H;d++)if(ba=r[d],v=ba.nb,P=v*3,za+1!==v&&J.push(T=[pa=u[P],fa=u[P+1]]),za=v,P=ba.$closing?0:P+3,ba=u[P],P=u[P+1],!f||d===H-1||r[d+1].nb!==v+1||g(fa-P)>da||g(pa-ba)>K)T.push(pa=ba,fa=P);
if(this.Gb){v=[];for(d=0;d<J.length;d++)if(T=J[d],H=T.length){u=[];for(f=0;f<H;f+=2)f==0||f>0&&!l(T[f+1],T[f-1])?u.push(T[f],T[f+1]):(u.push(T[f],T[f+1]),v.push(u),u=[],T[f-1]+=T[f-1]<0?360:-360,u.push(T[f-2],T[f-1],T[f],T[f+1]));v.push(u)}J=v}P=[];d=u=0;for(H=J.length;d<H;d++)T=J[d],T.length&&(P[u++]=this.bd(T,h,b));H=e?m(P,M,F,Z,$):P}if(!h||!W)if(h)if(V){if(q)return H=[c],H.fullfilled=1,H;return w}else return[];else return H;if(G.contains(X))return H;J=[];for(d=H.length;d--;)if(b=p(c,H[d])){T=this.wh(b);
for(J.push(T);b.nextPoly;)b=b.nextPoly,T=this.wh(b),J.push(T)}return J}})})(nokia.maps);ovi.provide("nokia.maps.dom._packaging.base");ovi.provide("nokia.maps.gfx._packaging.base");ovi.provide("nokia.maps.geo._packaging.base");var Ub=nokia.maps;delete Ub.config.params;Ub.loadPath=Ub.config.baseUrl;Ub.Config.setDefaults(nokia.maps.config);window.nokia.maps=nokia.maps;})();
