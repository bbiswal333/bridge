(function(){ovi.provide("nokia.maps.advsearch.Address");ovi.provide("nokia.maps.advsearch.AlternativeValue");ovi.provide("nokia.maps.advsearch.Category");ovi.provide("nokia.maps.advsearch.CategoryFilter");ovi.provide("nokia.maps.advsearch.Contact");ovi.provide("nokia.maps.advsearch.ContactFilter");ovi.provide("nokia.maps.advsearch.Location");ovi.provide("nokia.maps.advsearch.LocationFilter");ovi.provide("nokia.maps.advsearch.LocationMatchQuality");ovi.provide("nokia.maps.advsearch.MapReference");ovi.provide("nokia.maps.advsearch.Place");
ovi.provide("nokia.maps.advsearch.PlaceFilter");ovi.provide("nokia.maps.advsearch.ReverseGeocodeSettings");ovi.provide("nokia.maps.advsearch.SearchRepresentationOptions");ovi.provide("nokia.maps.advsearch.SearchRequest");ovi.provide("nokia.maps.advsearch.SearchRequestMetaInfo");ovi.provide("nokia.maps.advsearch.SearchResponse");ovi.provide("nokia.maps.advsearch.SearchResponseMetaInfo");ovi.provide("nokia.maps.advsearch.SearchResponseView");ovi.provide("nokia.maps.advsearch.SearchResult");ovi.provide("nokia.maps.advsearch.SearchResultsView");
ovi.provide("nokia.maps.advsearch.SearchSuggestionsView");ovi.provide("nokia.maps.advsearch.Supplier");ovi.provide("nokia.maps.advsearch._packaging.package");ovi.provide("nokia.maps.advsearch.Manager");(function(){var e=nokia.maps.advsearch.Manager=new ovi.Class({Extends:nokia.maps.search.navteq.Manager,initialize:function(l,h){if(this.constructor===e)return new e.Hb(l,h);this._super(l,h)},Statics:{setDefImpl:function(e){return this.Hb?!0:(this.Hb=e)&&!1}}})})();ovi.provide("nokia.maps.advsearch.navteq.Manager");
(function(){function e(){var c=h.serviceMode,a={},f;for(f in b)b.hasOwnProperty(f)&&(a[f]=b[f].replace("{serviceMode}",c?"."+c:""));d.setDefaultsNS(g,l.flatMerge({"geocode.interface":"geocode.json","reversegeocode.interface":"reversegeocode.json","placesearch.interface":"placesearch.json","search.interface":"search.json"},a))}var l=nokia.maps.util,h=nokia.maps.util.getRootNameSpace("nokia.maps").Settings,d=nokia.maps.Config,c=nokia.maps.util.services,g="advsearch",b={baseUrl:"http://{service}{serviceMode}.api.here.com/6.2/",
"china.baseUrl":"http://{service}{serviceMode}.api.heremaps.cn/6.2/","secure.baseUrl":"https://{service}{serviceMode}.api.here.com/6.2/","china.secure.baseUrl":"https://{service}{serviceMode}.api.heremaps.cn/6.2/"},f=nokia.maps.advsearch.navteq.Manager=new ovi.Class({Extends:nokia.maps.advsearch.Manager,ea:0,locations:[],places:[],ra:!1,searchResponse:null,initialize:function(b,a){h.authenticationToken||h.set("authenticationToken","");this.qp=h.appId||"jsapi";this.searchResponse=[];this.ra=!1;this._super(b,
a)},geocode:function(b){var a=arguments;if(a.length==2)this.ra=!0,this._super(a[0],a[1]);else if(a.length==1&&ovi.type(a[0])=="string")this.ra=!0,this._super(a[0]);else if(a.length==1)this.ra=!1,a=c.addNlpParams(c.getBaseURL(this.xa,g,"geocode",!0).replace("{service}","geocoder")+this.Vd(b)+"&gen="+this.gen+"&jsonAttributes=1"),this.qa.send(a,ovi.bind(this,this.fj)),this.ae(0),this.set("state","started")},reverseGeocode:function(b){b.latitude&&b.longitude?(this.ra=!0,this._super(b)):(this.ra=!1,b=
c.addNlpParams(c.getBaseURL(this.xa,g,"reversegeocode",!0).replace("{service}","reverse.geocoder")+this.Vd(b)+"&gen="+this.gen+"&jsonAttributes=1"),this.qa.send(b,ovi.bind(this,this.fj)),this.ae(1),this.set("state","started"))},placeSearch:function(b){var a=arguments;if(a.length==2)this.ra=!0,this._super(a[0],a[1]);else if(a.length==3)this.ra=!0,this._super(a[0],a[1],a[2]);else if(a.length==1&&ovi.type(a[0])=="string")this.ra=!0,this._super(a[0]);else if(a.length==1)this.ra=!1,a=c.addNlpParams(c.getBaseURL(this.xa,
g,"placesearch",!0).replace("{service}","geocoder")+this.Vd(b)+"&jsonAttributes=1"),this.qa.send(a,ovi.bind(this,this.fj)),this.ae(3),this.set("state","started")},search:function(b){var a=arguments;if(a.length==2)this.ra=!0,this._super(a[0],a[1]);else if(a.length==1&&ovi.type(a[0])=="string")this.ra=!0,this._super(a[0]);else if(a.length==1)this.ra=!1,a=c.addNlpParams(c.getBaseURL(this.xa,g,"search",!0).replace("{service}","geocoder")+this.Vd(b)+"&jsonAttributes=1"),this.qa.send(a,ovi.bind(this,this.fj)),
this.ae(4),this.set("state","started")},clear:function(){this.places=[];this.locations=[];this.sa=this.searchResponse=null;this.Ja=!1;this.set("state","cleared")},Vd:function(b){var a=[],c=[],f=[],d,g,e,s,l,w,x,v,y,B,C,A,D,E=encodeURIComponent;try{b.searchText&&a.push("searchtext="+E(b.searchText));if(b.additionalData){g=b.additionalData;for(d in g)c.push(d+","+g[d]);a.push("additionaldata="+c.join(";"));c=[]}if(b.metaInfo)e=b.metaInfo,e.requestId&&a.push("requestid="+E(e.requestId)),e.verboseMode&&
a.push("verbosemode="+e.verboseMode);b.representationOptions?(s=b.representationOptions,s.language?a.push("languages="+s.language.join(",")):h.defaultLanguage&&a.push("languages="+h.defaultLanguage),s.pageInformation==void 0||a.push("pageinformation="+s.pageInformation),(s.maxResults||s.maxResults===0)&&a.push("maxresults="+s.maxResults),s.strictLanguageMode==!0&&a.push("strictlanguagemode=true"),s.strictLanguageMode==!1&&a.push("strictlanguagemode=false"),s.searchResponseAttributes&&a.push("responseattributes="+
s.searchResponseAttributes.join(",")),s.placeAttributes&&a.push("placeattributes="+s.placeAttributes.join(",")),s.locationAttributes&&a.push("locationattributes="+s.locationAttributes.join(",")),s.addressAttributes&&a.push("addressattributes="+s.addressAttributes.join(","))):h.defaultLanguage&&a.push("languages="+h.defaultLanguage);if(b.placeFilter){l=b.placeFilter;l.placeId&&a.push("placeid="+l.placeId);l.name&&a.push("name="+l.name);l.placeScore&&a.push("placescore="+l.placeScore);l.supplierId&&
a.push("supplierids="+l.supplierId.join(","));if(l.categoryFilter){w=l.categoryFilter;for(d=0;d<w.length;d++)x=w[d],x.categoryId&&c.push((x.categorySystemId?x.categorySystemId+",":"")+x.categoryId),x.name&&f.push((x.categorySystemId?x.categorySystemId+",":"")+x.name);c.length>0&&a.push("categoryids="+c.join(";"));f.length>0&&a.push("categorynames="+f.join(";"));c=[]}if(l.contactFilter)v=l.contactFilter,v.phone&&a.push("phone="+E(v.phone)),v.email&&a.push("email="+E(v.email)),v.URL&&a.push("url="+
E(v.URL)),v.fax&&a.push("fax="+E(v.fax)),v.IM&&a.push("im="+E(v.IM))}if(b.locationFilter)y=b.locationFilter,y.locationId&&a.push("locationid="+y.locationId),y.country&&a.push("country="+y.country),y.state&&a.push("state="+y.state),y.county&&a.push("county="+y.county),y.city&&a.push("city="+y.city),y.district&&a.push("district="+y.district),y.street&&ovi.type(y.street)=="array"?(B=y.street,B.length===1?a.push("street="+B[0]):B.length===2&&a.push("street0="+B[0]+"&street1="+B[1])):y.street&&a.push("street="+
y.street),y.houseNumber&&a.push("housenumber="+y.houseNumber),y.postalCode&&a.push("postalcode="+y.postalCode);if(b.spatialFilter&&(C=b.spatialFilter,C.bottomRight&&C.topLeft&&a.push("bbox="+C.topLeft.latitude+","+C.topLeft.longitude+";"+C.bottomRight.latitude+","+C.bottomRight.longitude),C.center&&a.push("prox="+C.center.latitude+","+C.center.longitude+(C.radius||C.radius===0?","+C.radius:"")),C.line)){A=C.line;for(d=0;d<A.length;d++)D=A[d],c.push(D[0]+","+D[1]);a.push("corridor="+c.join(";")+";"+
C.width)}b.reverseGeocodeSettings&&b.reverseGeocodeSettings.mode&&a.push("mode="+b.reverseGeocodeSettings.mode)}catch(O){nokia.maps.util.d("the argument in SearchRequest is illegal")}return a.join("&")},fj:function(b){this.searchResponse=this.zl(b);this.set("state",this.Ja?"failed":"finished")},zl:function(b){var a=b.response,c={};try{if(b.timeout){this.sa=this.Mb({type:"SystemError",subtype:"Timeout",details:"request times out"});this.set("state","failed");return}if(a&&a.error){this.Ja=!0;this.sa=
this.Mb(a.error);return}var a=a.response,f,d={},g,e,h={},l,w,x,v,b={},y=[],B=[],C,A={},D,E={};if(a.metaInfo)f=a.metaInfo,f.requestId&&(d.requestId=f.requestId),f.timestamp&&(d.timestamp=f.timestamp),f.nextPageInformation&&(d.nextPageInformation=f.nextPageInformation),f.previousPageInformation&&(d.previousPageInformation=f.previousInformation),f.additionalData&&(d.additionalData=this.fi(f.additionalData)),c.metaInfo=d;if(a.view){g=a.view;for(l=0;l<g.length;l++){e=g[l];e.viewId==void 0||(h.viewId=e.viewId);
e.label==void 0||(h.label=e.label);e.didYouMeanSuggestion&&(h.didYouMeanSuggestion=e.didYouMeanSuggestion);if(e.performedSearch)h.performedSearch=e.performedSearch;if(e.result){x=e.result;for(w=0;w<x.length;w++){v=x[w];v.relevance==void 0||(b.relevance=v.relevance);v.distance&&(b.distance=v.distance);v.direction&&(b.direction=v.direction);v.matchLevel&&(b.matchLevel=v.matchLevel);v.additionalData&&(b.additionalData=this.fi(v.additionalData));if(v.matchQuality)C=v.matchQuality,C.country!=void 0&&(A.country=
C.country),C.state!=void 0&&(A.state=C.state),C.county!=void 0&&(A.county=C.county),C.city!=void 0&&(A.city=C.city),C.district!=void 0&&(A.district=C.district),C.street!=void 0&&(A.street=C.street),C.houseNumber!=void 0&&(A.houseNumber=C.houseNumber),C.postalCode!=void 0&&(A.postalCode=C.postalCode),b.matchQuality=A,A={};if(v.matchType)D=v.matchType,D.pointAddress=E.pointAddress=D.pointAddress,D.interpolated=E.interpolated=D.interpolated,b.matchType=E,E={};v.place&&(b.place=this.yv(v.place));v.location&&
(b.location=this.tr(v.location));y.push(b);b={}}h.results=y;y=[]}B.push(h);h={}}c.view=B}}catch(O){this.Ja=!0}return c},yv:function(b){var a={};try{var c,f,d={},g=[],e,h,l,w={},x=[],v,y,B,C={},A=[],D,E,O=[];b.name&&(a.name=b.name);b.placeId&&(a.placeId=b.placeId);b.placeScore&&(a.placeScore=b.placeScore);b.additionalData&&(a.additionalData=this.fi(b.additionalData));if(b.contact){c=b.contact;for(v=0;v<c.length;v++)f=c[v],f.type&&(d.type=f.type),f.value&&(d.value=f.value),f.description&&(d.description=
f.description),g.push(d),d={},e=f.type,e=e.substring(0,1).toUpperCase()+e.substring(1),a["primary"+e]||(a["primary"+e]=f.value);a.contacts=g}if(b.category){h=b.category;for(v=0;v<h.length;v++)l=h[v],l.categoryId&&(w.categoryId=l.categoryId),l.categorySystemId&&(w.categorySystemId=l.categorySystemId),l.name&&(w.name=l.name),l.description&&(w.description=l.description),l.alternativeNames&&(w.alternativesNames=this.Jk(l.alternativeNames)),x.push(w),w={};a.categories=x}if(b.suppliers){y=b.suppliers;for(v=
0;v<y.length;v++)B=y[v],B.supplierId&&(C.supplierId=B.supplierId),B.name&&(C.name=B.name),A.push(C),C={};a.suppliers=A}b.alternativeNames&&(a.alternativeNames=this.Jk(b.alternativeNames));if(b.locations){D=b.locations;for(v=0;v<D.length;v++)E=D[v],O.push(this.tr(E));a.locations=O}}catch(I){this.Ja=!0}this.places.push(a);return a},tr:function(b){var a={};try{var c,f=nokia.maps.geo,d=f.Coordinate,g=f.BoundingBox,e,h,f=[],l,w,x,v,y={},B,C={};b.label==void 0||(a.label=b.label);b.displayPosition&&(a.displayPosition=
new d(b.displayPosition.latitude,b.displayPosition.longitude,b.displayPosition.altitude,!0));if(b.navigationPosition){e=b.navigationPosition;for(c=0;c<e.length;c++)h=e[c],f.push(new d(h.latitude,h.longitude,h.altitude,!0));a.navigationPositions=f}if(b.mapView)l=b.mapView,w=new d(l.bottomRight.latitude,l.bottomRight.longitude,l.bottomRight.altitude,!0),x=new d(l.topLeft.latitude,l.topLeft.longitude,l.topLeft.altitude,!0),a.mapView=new g(x,w);b.locationId==void 0||(a.locationId=b.locationId);b.locationScore==
void 0||(a.locationScore=b.locationScore);b.additionalData&&(a.additionalData=this.fi(b.additionalData));b.locationType&&(a.locationType=b.locationType);b.alternativeLabels&&(a.alternativeLabels=this.Jk(b.alternativeLabels));if(b.address)v=b.address,v.label==void 0||(y.label=v.label),v.country&&(y.country=v.country),v.state&&(y.state=v.state),v.county&&(y.county=v.county),v.city&&(y.city=v.city),v.district&&(y.district=v.district),v.street&&(y.street=v.street),v.houseNumber&&(y.houseNumber=v.houseNumber),
v.postalCode&&(y.postalCode=v.postalCode),v.floor==void 0||(y.floor=v.floor),v.suite==void 0||(y.suite=v.suite),v.additionalData&&(y.additionalData=this.fi(v.additionalData)),v.alternativeAttributes&&(y.alternativeAttributes=this.Jk(v.alternativeAttributes)),a.address=y;if(b.mapReference)B=b.mapReference,B.referenceId==void 0||(C.referenceId=B.referenceId),B.mapId==void 0||(C.mapId=B.mapId),B.mapVersion&&(C.mapVersion=B.mapVersion),B.spot&&(C.spot=B.spot),B.sideOfStreet&&(C.sideOfStreet=B.sideOfStreet),
a.mapReference=C}catch(A){this.Ja=!0}this.locations.push(a);return a},Jk:function(b){var a,c,f={},d=[];try{for(a=0;a<b.length;a++)c=b[a],c.key&&(f.key=c.key),c.value&&(f.value=c.value),c.type&&(f.type=c.type),c.semantics&&(f.semantics=c.semantics),c.language&&(f.language=c.language),d.push(f),f={}}catch(g){this.Ja=!0}return d},fi:function(b){var a={};try{var c,f;for(c=0;c<b.length;c++)f=b[c],a[f.key]=f.value}catch(d){this.Ja=!0}return a}});nokia.maps.advsearch.Manager.setDefImpl(f);h.addObserver("serviceMode",
e);e()})();ovi.provide("nokia.maps.advsearch._packaging.package-nokiaenterprise");})();
