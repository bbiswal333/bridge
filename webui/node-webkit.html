<!DOCTYPE HTML>
<html lang="en" ng-app="bridgeApp">
  <head>
    <!-- external css -->
    <link href="lib/bootstrap-3_0_3/css/bootstrap.css" rel="stylesheet" />
    <link href="lib/ng-table-0_3_1/ng-table.css" rel="stylesheet">

    <!-- css -->
    <link href="css/bridge.css" rel="stylesheet" />

    <script>
      var path = require("path"); 
      var server_module = path.join(path.dirname(process.mainModule.filename), 'server.js');
      var server = require(server_module);
      var gui = require('nw.gui');

      //extend server APIs with node-webkit functionality
      server.app.get('/api/system', function(request, response){

        var file = path.join(path.dirname(process.mainModule.filename), '../', 'nw-startup.html');
        gui.Shell.showItemInFolder(file);
        var data = [];
        response.setHeader('Content-Type', 'text/plain'); 
        response.send(data);
      });

      function open_external(url){
        gui.Shell.openExternal(url);
      }
    </script>
               
    <title>Bridge Server</title>
  </head>
  <body ng-controller="bridgeController">

        <div class="header">
          <div class="headertext">Bridge Server</div>
        </div>
        <div class="mainPageBackgroundGradient">
          <div class="mainPageBackground">
            <div ng-view class="content">
                Local Bridge Server running. Please do not close this window/ application.<br />
                <a href="#" onClick="open_external('http://localhost:8000');">To launch bridge, click here.</a>
            </div>
          </div>
        </div>  
  </body>
</html>